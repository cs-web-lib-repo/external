function v_under_list(a,t){if(console.log(t),!t)return;$(".modal-body >",a).remove(),$(".modal-body",a).append('<div id="under_card_list">\n<div class="list"></div>\n</div>'),$(".list",a).append('<div class="over_wrapper select_all">\n<i class="far fa-circle fa-2x"></i>\n</div>'),t.forEach((function(t){if(t.data.tree_type==tree_data.enum_tree_type.card){if(0!=t.data.is_deleted||0!=t.data.is_lock)return}else if(0!=t.data.is_deleted)return;$(".list",a).append(`<div class="over_wrapper" data-card_seq="${t.key}">\n<i class="far fa-circle fa-2x"></i>\n<span class="card_icon">${get_tree_icon(t)}</span>\n<h3>${t.title}</h3>\n</div>`)}));new List("under_card_list",{valueNames:["account_name"]})}function card_set_attr_batch(a,t,e,s,c,n,d){$.ajax({url:"/card_set_attr_batch",method:"POST",data:{space_seq:space_seq,card_seqs:a,status:t,priority:e,hidden:s,todo:c,per_done:n,schedule:d},success:function(t){0==t.ec?($("#card_state_batch_modal").modal("hide"),$("#card_state_batch_select_modal").modal("hide")):61==t.ec?cs_msg.swal_select((function(){$.ajax({url:"/card_set_status_batch",method:"POST",data:{space_seq:space_seq,card_seq:a,status:state_val},success:function(a){0==a.ec?($("#card_state_batch_modal").modal("hide"),$("#card_state_batch_select_modal").modal("hide")):cs_msg.noti_err(a.ec)},dataType:"json"})}),"force","force ex","force comp"):cs_msg.noti_err(t.ec)},dataType:"json"})}function set_card_move_batch(a,t){$.ajax({url:"/card_set_move_batch",method:"POST",data:{space_seq:space_seq,src_seq:a,dst_seq:t},success:function(a){0==a.ec?($("#card_move_batch_modal").modal("hide"),$("#card_move_modal").modal("hide")):cs_msg.noti_err(a.ec)},dataType:"json"})}function check_controller(a,t=!1){let e=$(".check_btn",a);1==t||1==$(".batch_state",a).hasClass("active")?($(">",e).remove(),$(e).append('<i class="fas fa-check-square fa-lg fa-fw text-normal"></i>'),$(e).removeClass("unchecked")):($(">",e).remove(),$(e).append('<i class="far fa-square fa-lg fa-fw"></i>'),$(e).addClass("unchecked"));let s=!1;$("#card_state_batch_select_modal .check_btn").each((function(a,t){0==$(t).hasClass("unchecked")&&(s=!0)})),1==s?$("#card_state_batch_select_modal #state_batch_apply").attr("disabled",!1):$("#card_state_batch_select_modal #state_batch_apply").attr("disabled",!0)}$(document).on("click","#card_state_batch_modal #all_select",(function(){let a=$("#batch_tree").fancytree("getTree");a.getSelectedNodes().length<a.count()?(a.selectAll(!0),$("i",this).removeClass("fa-square"),$("i",this).addClass("fa-check-square")):(a.selectAll(!1),$("i",this).removeClass("fa-check-square"),$("i",this).addClass("fa-square")),$("#card_state_batch_modal select.select_filter")[0].sumo.unSelectAll()})),$(document).on("click","#card_move_batch_modal .list > div",(function(){$(this).hasClass("select_all")?$(this).hasClass("active")?($("#card_move_batch_modal .list > div").removeClass("active"),$("#card_move_batch_modal .list > div > i").removeClass("fa-check-circle"),$("#card_move_batch_modal .list > div > i").addClass("fa-circle")):($("#card_move_batch_modal .list > div").addClass("active"),$("#card_move_batch_modal .list > div > i").removeClass("fa-circle"),$("#card_move_batch_modal .list > div > i").addClass("fa-check-circle")):($(this).toggleClass("active"),$("> i",this).toggleClass("fa-circle"),$("> i",this).toggleClass("fa-check-circle")),$("#card_move_batch_modal .list > div").hasClass("active")?$("#card_move_batch_modal #card_move_batch_btn").attr("disabled",!1):$("#card_move_batch_modal #card_move_batch_btn").attr("disabled",!0)})),$(document).on("click","#card_move_batch_modal #card_move_batch_btn",(function(){$("#card_move_modal").modal()})),$(document).on("click","#card_state_batch_modal #card_state_batch_btn",(function(){if($("#card_state_batch_select_modal .modal-body >").remove(),$("#card_state_batch_select_modal .modal-footer >").remove(),$("#card_state_batch_select_modal").data("tree_type")==tree_data.enum_tree_type.card)for($("#card_state_batch_select_modal .modal-body").append(`<div id="batch_status" class="col-xs-12 padding_5">\n<div class="col-xs-3 info_tm_7">\n<span class="check_btn unchecked"><i class="far fa-square fa-lg fa-fw"></i></span>\n<span class="pull-right">상태:</span>\n</div>\n<div class="col-xs-9">\n<div class="batch_state btn btn-grey btn-sm uncheck default"\ndata-state_val="${tree_data.enum_card_status.ready}">\n<i class="far fa-circle fa-fw"></i>\n</div>\n<div class="batch_state btn btn-primary btn-sm uncheck"\ndata-state_val="${tree_data.enum_card_status.progress}">\n<i class="fas fa-play fa-fw"></i>\n</div>\n<div class="batch_state btn btn-warning btn-sm uncheck"\ndata-state_val="${tree_data.enum_card_status.stop}">\n<i class="fas fa-pause fa-fw"></i>\n</div>\n<div class="batch_state btn btn-danger btn-sm uncheck"\ndata-state_val="${tree_data.enum_card_status.cancel}">\n<i class="fas fa-stop fa-fw"></i>\n</div>\n<div class="batch_state btn btn-success btn-sm uncheck"\ndata-state_val="${tree_data.enum_card_status.complete}">\n<i class="fas fa-check fa-fw"></i>\n</div>\n</div>\n</div>\n<hr class="margin_unset">\n<div id="batch_priority" class="col-xs-12 padding_5">\n<div class="col-xs-3 info_tm_7">\n<span class="check_btn unchecked"><i class="far fa-square fa-lg fa-fw"></i></span>\n<span class="pull-right">우선순위:</span>\n</div>\n<div class="col-xs-9">\n<div class="batch_state btn btn-danger btn-sm uncheck"\ndata-priority_val="${card_detail.type_priority_enum.urgent}">\n<i class="fas fa-angle-double-up fa-fw"></i>\n</div>\n<div class="batch_state btn btn-warning btn-sm uncheck"\ndata-priority_val="${card_detail.type_priority_enum.high}">\n<i class="fas fa-angle-up fa-fw"></i>\n</div>\n<div class="batch_state btn btn-primary btn-sm uncheck default"\ndata-priority_val="${card_detail.type_priority_enum.medium}">\n<i class="fas fa-minus fa-fw"></i>\n</div>\n<div class="batch_state btn btn-dark btn-sm uncheck"\ndata-priority_val="${card_detail.type_priority_enum.low}">\n<i class="fas fa-angle-double-down fa-fw"></i>\n</div>\n<div class="batch_state btn btn-light btn-sm uncheck"\ndata-priority_val="${card_detail.type_priority_enum.lowest}">\n<i class="fas fa-angle-down fa-fw"></i>\n</div>\n</div>\n</div>\n<hr class="margin_unset">\n<div id="batch_schedule" class="col-xs-12 padding_5">\n<div class="col-xs-3 info_tm_7">\n<span class="check_btn unchecked"><i class="far fa-square fa-lg fa-fw"></i></span>\n<span class="pull-right">일정:</span>\n</div>\n<div class="col-xs-9">\n<div id="date_input"></div>\n</div>\n</div>\n<hr class="margin_unset">\n<div id="batch_hidden" class="col-xs-12 padding_5">\n<div class="col-xs-3 info_tm_7">\n<span class="check_btn unchecked"><i class="far fa-square fa-lg fa-fw"></i></span>\n<span class="pull-right">숨김:</span>\n</div>\n<div class="col-xs-9">\n<div class="batch_state btn btn-success btn-sm uncheck radio_btn">\n<i class="fas fa-eye fa-fw"></i>\n</div>\n</div>\n</div>\n<hr class="margin_unset">\n<div id="batch_todo" class="col-xs-12 padding_5">\n<div class="col-xs-3 info_tm_7">\n<span class="check_btn unchecked"><i class="far fa-square fa-lg fa-fw"></i></span>\n<span class="pull-right">할일:</span>\n</div>\n<div class="col-xs-9">\n<div class="batch_state btn btn-worker btn-sm uncheck radio_btn">\n<i class="fas fa-running fa-fw"></i>\n</div>\n</div>\n</div>\n<hr class="margin_unset">\n<div id="batch_per_done" class="col-xs-12 padding_5">\n<div class="col-xs-3 info_tm_7">\n<span class="check_btn unchecked"><i class="far fa-square fa-lg fa-fw"></i></span>\n<span class="pull-right">진행율:</span>\n</div>\n<div class="col-xs-9 info_tm_7">\n<div class="col-xs-9 compact_row">\n<div class="progress">\n<div class="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em; width: 0%;">\n0%\n</div>\n</div>\n</div>\n<div class="col-xs-3">\n<select id="batch_per_done_combobox"></select>\n</div>\n</div>\n</div>\n<hr class="margin_unset">`),v_date_input($("#card_state_batch_select_modal"),moment(),moment(),!0,!1,!0),i=0;i<=100;i+=10){let a=0==i?"selected":"";$("#card_state_batch_select_modal .modal-body #batch_per_done_combobox").append(`<option value="${i}" ${a}>${i}%</option>`)}else $("#card_state_batch_select_modal .modal-body").append(`<div id="batch_status" class="col-xs-12 padding_5">\n<div class="col-xs-3 info_tm_7">\n<span class="check_btn unchecked"><i class="far fa-square fa-lg fa-fw"></i></span>\n<span class="pull-right">상태:</span>\n</div>\n<div class="col-xs-9">\n<div class="batch_state btn btn-grey btn-sm uncheck default"\ndata-state_val="${tree_data.enum_card_status.ready}">\n<i class="far fa-circle fa-fw"></i>\n</div>\n<div class="batch_state btn btn-primary btn-sm uncheck"\ndata-state_val="${tree_data.enum_card_status.progress}">\n<i class="fas fa-play fa-fw"></i>\n</div>\n<div class="batch_state btn btn-warning btn-sm uncheck"\ndata-state_val="${tree_data.enum_card_status.stop}">\n<i class="fas fa-pause fa-fw"></i>\n</div>\n<div class="batch_state btn btn-danger btn-sm uncheck"\ndata-state_val="${tree_data.enum_card_status.cancel}">\n<i class="fas fa-stop fa-fw"></i>\n</div>\n<div class="batch_state btn btn-success btn-sm uncheck"\ndata-state_val="${tree_data.enum_card_status.complete}">\n<i class="fas fa-check fa-fw"></i>\n</div>\n</div>\n</div>`);$("#card_state_batch_select_modal .modal-footer").append('<div id="state_batch_apply" class="btn btn-primary btn-sm pull-right"\ndisabled="disabled" data-i18n="card:batch.apply"></div>'),$("#card_state_batch_select_modal .modal-footer").localize(),$("#card_state_batch_select_modal").modal()})),$(document).on("click","#card_state_batch_select_modal .batch_state",(function(){$(this).parent().children().removeClass("mark"),1==$(this).hasClass("active")?$(this).parent().children().removeClass("active"):($(this).parent().children().removeClass("active"),$(this).addClass("active"),$(this).addClass("mark")),1==$(this).hasClass("radio_btn")?check_controller($(this).parent().parent(),!0):check_controller($(this).parent().parent(),!1)})),$(document).on("click","#card_state_batch_select_modal .check_btn",(function(){let a=$(".batch_state",$(this).parent().next());1==$(this).hasClass("unchecked")?($(">",this).remove(),$(this).append('<i class="fas fa-check-square fa-lg fa-fw text-normal"></i>'),$(this).removeClass("unchecked"),1==a.hasClass("mark")?$(a).each((function(a,t){if(1==$(t).hasClass("mark"))return $(t).addClass("active"),!1})):$(a).each((function(a,t){if(1==$(t).hasClass("default"))return $(t).addClass("active"),!1}))):($(">",this).remove(),$(this).append('<i class="far fa-square fa-lg fa-fw"></i>'),$(this).addClass("unchecked"),$(a).removeClass("active"));let t=!1;$("#card_state_batch_select_modal .check_btn").each((function(a,e){0==$(e).hasClass("unchecked")&&(t=!0)})),1==t?$("#card_state_batch_select_modal #state_batch_apply").attr("disabled",!1):$("#card_state_batch_select_modal #state_batch_apply").attr("disabled",!0)})),$(document).on("change","#card_state_batch_select_modal #batch_per_done_combobox",(function(){let a=$(this).val();$("#card_state_batch_select_modal .progress-bar").css("width",a+"%").text(a+"%"),check_controller($(this).closest(".padding_5"),!0)})),$(document).on("click","#card_state_batch_select_modal #state_batch_apply",(function(){let a=new Array;$("#batch_tree").fancytree("getTree").getSelectedNodes().forEach((function(t){a.push(t.key)}));let t=$("#card_state_batch_select_modal #batch_status"),e=null,s=$("#card_state_batch_select_modal #batch_priority"),c=null,n=$("#card_state_batch_select_modal #batch_schedule"),d=null,l=$("#card_state_batch_select_modal #batch_hidden"),_=null,i=$("#card_state_batch_select_modal #batch_todo"),r=null,o=$("#card_state_batch_select_modal #batch_per_done"),h=null;0==$(".check_btn",t).hasClass("unchecked")&&(e=$(".batch_state.active",t).data("state_val")),0==$(".check_btn",t).hasClass("unchecked")&&(c=$(".batch_state.active",s).data("priority_val")),0==$(".check_btn",l).hasClass("unchecked")&&(_=$(".batch_state.active",l).hasClass("active")),0==$(".check_btn",i).hasClass("unchecked")&&(r=$(".batch_state.active",i).hasClass("active")),0==$(".check_btn",o).hasClass("unchecked")&&(h=$("#batch_per_done_combobox",o).val()),0==$(".check_btn",n).hasClass("unchecked")&&(d=get_schedule_data($(n)));let b=$("#card_state_batch_select_modal").data("tree_type");b==tree_data.enum_tree_type.card&&card_set_attr_batch(a,e,c,_,r,h,d),b==tree_data.enum_tree_type.note&&note_set_status_batch(a,e)})),$("#card_state_batch_modal select.select_filter").on("sumo:closed",(function(){console.log($("#batch_tree").fancytree("getTree").getSelectedNodes());let a=$("#batch_tree").fancytree("getTree");a.selectAll(!1),$(":selected",this).each((function(t,e){let s=$(e).data("type"),c=$(e).val();"auth"==s&&a.visit((function(a){c==a.data.type_member&&a.setSelected(!0)})),"status"==s&&a.visit((function(a){c==a.data.status&&a.setSelected(!0)}))})),a.getSelectedNodes().length<a.count()?($("#card_state_batch_modal #all_select i").removeClass("fa-check-square"),$("#card_state_batch_modal #all_select i").addClass("fa-square")):($("#card_state_batch_modal #all_select i").removeClass("fa-square"),$("#card_state_batch_modal #all_select i").addClass("fa-check-square"))}));