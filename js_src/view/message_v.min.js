function v_get_folder_name(e){switch(e){case message.enum_folder_seq.ready:return"message:ready_list";case message.enum_folder_seq.recv:return"message:recv_list";case message.enum_folder_seq.send:return"message:send_list";case message.enum_folder_seq.trash:return"message:trash_list"}}function v_get_folder_count(e){let s="";return 0<e&&(s=e),99<e&&(s="99+"),s}function v_message_count_size(e,s){return 0==e?0==s?"":humanize_file_size(s):0==s?e:e+" / "+humanize_file_size(s)}function v_message_folder_list(e){$("#tabs-message #message_custom_list ul >").remove();let s=e.message_folder_seq.length;for(let a=0;a<s;++a)e.message_folder_seq[a]<0||$("#tabs-message #message_custom_list ul").append(`<li class="list-group-item web_hover_hidden" data-message_folder_seq="${e.message_folder_seq[a]}">\n<div class="between_flex">\n<span class="message_folder_name over_wrapper">${e.name[a]}\n<span class="unread_count badge badge-danger">${v_get_folder_count(e.unread_count[a])}</span>\n</span>\n<span class="folder_set_btn" data-content="\n<ul class='dropdown-menu' data-message_folder_seq='${e.message_folder_seq[a]}'>\n<li id='message_folder_rename_btn' class='dropdown-item' data-message_folder_name='${e.name[a]}'>\n<a>\n<i class='fas fa-pen'></i>\n<span data-i18n='message:rename'></span>\n</a>\n</li>\n<li class='divider'></li>\n<li id='message_folder_remove_btn' class='dropdown-item'>\n<a>\n<i class='fas fa-trash'></i>\n<span data-i18n='message:remove'></span>\n</a>\n</li>\n</ul>\n">\n<i class="fas fa-cog"></i></span>\n</div>\n</li>`);$("#tabs-message #message_custom_list .list-group-item .folder_set_btn").webuiPopover("destroy").webuiPopover(init.popover_click_option)}function v_message_folder_item(e,s){let a=$(`#message_folder_list .list-group-item[data-message_folder_seq="${e}"]`);e<0||$(".message_folder_name",a).text(s.name),$(".unread_count",a).text(v_get_folder_count(s.unread_count))}function v_message_read_icon(e){return 0==e?'<i class="fas fa-envelope fa-lg fa-fw"></i>':1==e?'<i class="far fa-envelope-open fa-lg fa-fw"></i>':void 0}function v_message_file_icon(e){return 0==e?"":0<e?'<i class="fas fa-paperclip fa-lg"></i>':void 0}function v_message_type_label(e){switch(e){case message.enum_type.ready[0]:return'<div class="label label-default" data-i18n="message:ready_list"></div>';case message.enum_type.send[0]:return'<div class="label label-success" data-i18n="message:send_list"></div>';case message.enum_type.recv[0]:return'<div class="label label-normal" data-i18n="message:recv_list"></div>'}}function v_message_list_item(e,s=0){let a=v_user_photo_drop(account_list.get_account(e.from_account_seq[s]),!0),n="";for(j=0;j<e.json__account_seq[s].length;++j){const a=e.json__account_seq[s][j];n+=`<li data-account_seq="${a}">\n<a href="${a}">\n${v_user_photo_drop(account_list.get_account(e.json__account_seq[s][j]),!0)}\n</a>\n</li>`}return[`<input class="message_checked" type="checkbox" data-message_seq="${e.message_seq[s]}" data-message_type="${e.type[s]}">`,`<div class="message_list_item_flex">\n<span>${v_message_read_icon(e.is_read[s])}</span>\n<span>${v_message_file_icon(e.file_size[s])}</span>\n<span>${v_message_type_label(e.type[s])}</span>\n</div>`,`<span>${a}</span>`,`<div class="over_wrapper">\n<small class="pull-right">${lll_time(e.send_time[s])}</small>\n<span>${e.title[s]}</span>\n<div id="message_item" class="hidden" data-message_seq="${e.message_seq[s]}" data-message_type="${e.type[s]}"></div>\n</div>\n<div class="recv_account col-xs-12">\n${n}\n</div>`,e.send_time[s],e.message_seq[s],e.type[s]]}function v_message_list(e,s){message.list_table.clear(),message.list_table.state.clear();const a=e.message_seq.length;let n=new Array;for(let s=0;s<a;++s)n.push(v_message_list_item(e,s));message.list_table.rows.add(n),message.list_table.draw(),message.list_table.columns(0).checkboxes.deselectAll(),$("#message_split_right #message_contents_option >").remove(),$("#message_split_right #message_contents >").remove()}function v_message_controller(e){let s="",a=$(`#message_folder_list li[data-message_folder_seq="${e}"] .message_folder_name`).text();switch($("#message_controller .web_hidden").text(a),e){case message.enum_folder_seq.ready:s='<div id="message_send_btn" class="btn btn-normal btn-sm" data-i18n="message:send" disabled="disabled"></div>\n<div id="message_edit_btn" class="btn btn-primary btn-sm" data-i18n="message:edit" disabled="disabled"></div>';break;case message.enum_folder_seq.send:s="";break;case message.enum_folder_seq.recv:s='<span>\n<span id="message_reply_group" class="btn btn-normal btn-sm"\ndata-content=\'<ul class="dropdown-menu" role="menu">\n<li><a id="message_reply_btn" data-i18n="message:reply"></a></li>\n<li><a id="message_allreply_btn" data-i18n="message:all reply"></a></li>\n<li><a id="message_forward_btn" data-i18n="message:forward"></a></li>\n</ul>\'>\n<span data-i18n="message:reply"></span>\n<i class="fas fa-caret-down"></i>\n</span>\n</div>';break;case message.enum_folder_seq.trash:s='<div id="message_trash_clear_btn" class="btn btn-sm btn-danger" data-i18n="message:clear"></div>';break;default:s=""}$("#message_type_btn_group >").remove(),$("#message_type_btn_group").append(`${s}`),$("#message_type_btn_group #message_reply_group").webuiPopover("destroy").webuiPopover(init.popover_click_option),i18n_update()}function v_message_contents_option(e){$("#message_contents_option >").remove();let s="",a=v_user_photo_drop(account_list.get_account(e.from_account_seq[0]),!0);for(j=0;j<e.json__account_seq[0].length;++j)s+=`<li>\n<a href="${e.json__account_seq[0][j]}">\n${v_user_photo_drop(account_list.get_account(e.json__account_seq[0][j]),!0)}\n</a>\n</li>`;$("#message_contents_option").append(`<div class="pull-right">\n<small>${lll_time(e.send_time[0])}</small>\n<div class="recv_account">\n${s}\n</div>\n</div>\n<div class="pull-left">\n<span>${v_message_type_label(e.type[0])}</span>\n<span>${v_message_read_icon(e.is_read[0])}</span>\n<span class="send_account">${a}</span>\n</div>\n<span>\n<h5 class="over_wrapper">${e.title[0]}</h5>\n</span>\n`),$("#message_contents_option .recv_account").asBreadcrumbs("destroy"),$("#message_contents_option .recv_account").asBreadcrumbs(init.account_asBreadcrumbs_opt),$("#message_contents_option .recv_account .plus_btn").append($("#message_contents_option .recv_account .breadcrumb-dropdown-menu > li:not(.is-hidden)").length),$("#message_contents_option .account_drop a").webuiPopover("destroy").webuiPopover(init.popover_option)}