function v_contents(e,n){$(">",e).remove(),$(e).addClass("lcl_list");let a=0;n.forEach((function(n){switch(n.type_section){case contents_data.type_section_enum.note:if(n.note){e.append('<div id="node_viewer_sec" class="toast_viewer"></div>');const{Editor:a}=toastui,{codeSyntaxHighlight:i}=a.plugin;new toastui.Editor.factory({el:$(".toast_viewer:last",e)[0],viewer:!0,initialValue:n.note,plugins:[i]});$(".toast_viewer:last a",e).attr("target","_blank")}break;case contents_data.type_section_enum.file:1==n.is_preview?e.append(`<div id="file_section" class="over_wrapper text-center">\n${v_file_preview(n.is_preview,n.file_seq,n.mimetype,n.name,n.size,a++,"span",init.enum_preview_size.w600)}\n</div>`):e.append(`<div id="file_section" class="over_wrapper">\n<div class="start_flex">\n<i class="far fa-file fa-lg"></i>\n<div id="file_down_btn" class="center_flex over_wrapper ml_10"\ndata-file_seq="${n.file_seq}">\n<span class="over_wrapper">${n.name.split(".")[0]}</span>\n<span>.${n.name.split(".")[1]}</span>\n</div>\n</div>\n<div class="ml_30">\n<small>${humanize_file_size(n.size)}</small>\n</div>\n</div>`)}}))}function v_editor(e,n=[],a){let i=$(e).parent();$(e).remove(),$("#note_view_btn",i).remove();let t="fa-2x";if(0==n.length&&(t="fa-3x"),i.prepend('<div id="contents_area" class="panel-body lcl_list margin_5 padding_unset">\n<div id="section_add" class="text-center section_add">\n<span id="section_add_dropdown" class="dropdown">\n<span class="btn btn-grey btn-xs" type="button"\ndata-toggle="dropdown"\naria-haspopup="true"\naria-expanded="false">\n<i class="fa fa-plus"></i>\n</span>\n<ul class="dropdown-menu" role="menu">\n<li id="note_create_btn" class="dropdown-item">\n<a>\n<span  data-i18n="card:contents.note"></span>\n<i class="far fa-sticky-note fa-fw"></i>\n</a>\n</li>\n<li class="divider"></li>\n<li id="file_create_btn" class="dropdown-item">\n<a>\n<span data-i18n="card:contents.file"></span>\n<i class="fas fa-file fa-fw"></i>\n</a>\n</li>\n<li class="divider"></li>\n<li id="clipboard_btn" class="dropdown-item" disabled="disabled">\n<a>\n<span data-i18n="card:contents.clipboard"></span>\n<i class="far fa-clipboard fa-fw"></i>\n</a>\n</li>\n</ul>\n</span>\n</div>\n<div id="section_group" class="list_group"></div>\n</div>').data("article_seq",a),init.current_main_tab==init.main_tabs_enum.tree||init.current_main_tab==init.main_tabs_enum.note){$(i).closest("#info_area");$(i).prepend('<div id="note_view_btn" class="btn btn-sm btn-success note_edit_btn"><i class="fas fa-check fa-lg"></i></div>')}let s=$(i).find("#section_group"),d=0;n.forEach((function(e){let n=$(`<div class="list-group-item" data-section_seq="${e.article_section_seq}">\n<div class="content-sort-handle sort-handle center_flex flex_column" aria-hidden="true">\n<i class="fas fa-chevron-up"></i><i class="fas fa-chevron-down"></i>\n</div>\n<div id="section_option">\n<div id="del_section_btn" class="btn btn-danger btn-xs pull-right margin_2">\n<i class="fas fa-trash"></i>\n</div>\n</div>\n</div>`);switch(e.type_section){case contents_data.type_section_enum.note:{n.append('<div id="edit_note" class="toast_viewer"></div><div class="hidden mk"></div>'),$(".mk:last",n).data("mk",e.note);const{Editor:a}=toastui,{codeSyntaxHighlight:i}=a.plugin;new toastui.Editor.factory({el:$(".toast_viewer:last",n)[0],viewer:!0,initialValue:e.note,plugins:[i]});$(".toast_viewer:last a",n).attr("target","_blank");break}case contents_data.type_section_enum.file:1==e.is_preview?n.append(`<div id="file_edit_section" class="over_wrapper text-center">\n<div>\n<span id="lcl_open_btn" class="lcl_item"\ndata-index="${d++}"\ndata-file_seq="${e.file_seq}"\ndata-file_name="${e.name}"\ndata-file_mimetype="${e.mimetype}"\ndata-file_size="${e.size}"\ndata-file_is_preview="${e.is_preview}">\n<img src="/file_preview/${space_seq}/${e.file_seq}/2" />\n</span>\n</div>\n<div id="file_down_btn" data-file_seq="${e.file_seq}"> ${e.name}</div>\n<small>${humanize_file_size(e.size)}</small>\n</div>`):n.append(`<div id="file_edit_section" class="over_wrapper">\n<i id="file_down_btn" class="far fa-file fa-lg"></i>\n<span id="file_down_btn" data-file_seq="${e.file_seq}"> ${e.name}</span>\n<div>\n<small>${humanize_file_size(e.size)}</small>\n</div>\n</div>`)}n.append('<div id="section_add" class="text-center section_add">\n<span id="section_add_dropdown" class="dropdown">\n<span class="btn btn-grey btn-xs" type="button"\ndata-toggle="dropdown"\naria-haspopup="true"\naria-expanded="false">\n<i class="fa fa-plus"></i>\n</span>\n<ul class="dropdown-menu" role="menu">\n<li id="note_create_btn" class="dropdown-item">\n<a>\n<span  data-i18n="card:contents.note"></span>\n<i class="far fa-sticky-note fa-fw"></i>\n</a>\n</li>\n<li class="divider"></li>\n<li id="file_create_btn" class="dropdown-item">\n<a>\n<span data-i18n="card:contents.file"></span>\n<i class="fas fa-file fa-fw"></i>\n</a>\n</li>\n<li class="divider"></li>\n<li id="clipboard_btn" class="dropdown-item">\n<a>\n<span data-i18n="card:contents.clipboard"></span>\n<i class="far fa-clipboard fa-fw"></i>\n</a>\n</li>\n</ul>\n</span>\n</div>'),s.append(n)})),i.find("#contents_area").append(s),$("#contents_area",i).append('<div id="dropzone_msg" class="text-center fixed">\n<div>\n<div><i class="fas fa-cloud-upload-alt fa-4x"></i></div>\n<h4 data-i18n="cs:drop upload"></h4>\n</div>\n</div>'),file_dropzone($("#contents_area",i),a),sort_section($(s)[0])}function v_section_edit(e){let n=""==$(".mk",e).data("mk")?" ":$(".mk",e).data("mk");function a(e){contents_data.max_markdown_char<e?$("#markdown_editor_modal #markdown_count").addClass("text-danger"):$("#markdown_editor_modal #markdown_count").removeClass("text-danger")}const{Editor:i}=toastui,{codeSyntaxHighlight:t,colorSyntax:s}=i.plugin;contents_data.markdown_editor=new toastui.Editor({el:$("#markdown_editor_modal #edit_note")[0],previewStyle:1==init.is_web?"vertical":"tab",height:"100%",hideModeSwitch:!0,toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task","indent","outdent"],["table","link"],["code","codeblock"]],initialValue:n,language:i18next.languages[0],events:{change:function(e){let n=contents_data.markdown_editor.getMarkdown().length;$("#markdown_editor_modal #markdown_count p").text(n+"/"+contents_data.max_markdown_char),a(n)}},plugins:[[t,{highlighter:Prism}],s]}),$("#markdown_editor_modal #edit_note a").attr("target","_blank"),contents_data.markdown_editor_data=contents_data.markdown_editor.getMarkdown();let d=contents_data.markdown_editor_data.length;$("#markdown_editor_modal #markdown_count p").text(d+"/"+contents_data.max_markdown_char),a(d),contents_data.markdown_editor.focus()}function v_gallery(e){if(null==e)return;let n=new Array,a=e.file_seq.length;for(let i=0;i<a;++i){if(0==e.is_preview[i])continue;let a={type:"image",src:`/file_preview/${space_seq}/${e.file_seq[i]}/4`,title:e.name[i],txt:e.mimetype[i],author:humanize_file_size(e.size[i]),thumb:`/file_preview/${space_seq}/${e.file_seq[i]}/3`,download:`/file_down/${space_seq}/${e.file_seq[i]}/1`,canonical_url:`/file_down/${space_seq}/${e.file_seq[i]}/2`};n.push(a)}return lc_lightbox(n,{open_close_time:0,txt_hidden:!0,img_zoom:!0,download:!0,cmd_position:"outer",nav_btn_pos:"middle"})}function v_temp_gallery(e){if(null==e)return;let n=new Array,a=e.file_seq.length;for(let i=0;i<a;++i){if(0==e.is_preview[i])continue;let a={type:"image",src:`/file_preview/${space_seq}/${e.file_seq[i]}/4`,title:e.name[i],txt:e.mimetype[i],author:humanize_file_size(e.size[i]),thumb:`/file_preview/${space_seq}/${e.file_seq[i]}/3`,download:`/file_down/${space_seq}/${e.file_seq[i]}/1`,canonical_url:`/file_down/${space_seq}/${e.file_seq[i]}/2`};n.push(a)}card_detail.lcl_temp_obj=lc_lightbox(n,{download:!0})}function v_comment_chain(e){e.prepend(`<div class="row">\n<span class="pull-left">${v_user_photo_drop(account_list.get_user_account(),!0)}</span>\n<div class="input_chain_form">\n<div class="input_chain" data-i18n="card:reply.add comment"></div>\n</div>\n</div>`),$(".account_drop a",e).webuiPopover("destroy").webuiPopover(init.popover_option)}function v_comment(e){$(">",e).remove(),e.append('<div class="row label_relative">\n<div id="reply_to_account"></div>\n<textarea id="comment_input" type="text" class="comment_input" maxlength="5000" data-i18n="[placeholder]card:reply.add comment"></textarea>\n<div id="reply_file_zone"></div>\n<div class="reply_btn_group">\n<div id="reply_to_add_btn" class="btn btn-default btn-sm btn-unborder">\n<i class="fas fa-user fa-lg"></i>\n</div>\n<div id="reply_file_add_btn" class="btn btn-default btn-sm btn-unborder">\n<i class="fas fa-paperclip fa-lg"></i>\n</div>\n<div class="pull-right">\n<div id="create_article_reply_btn" class="btn btn-primary btn-sm">\n<i class="fas fa-plus fa-lg"></i><span data-i18n="card:contents.comments"></span>\n</div>\n<div id="comment_cancel_btn" class="btn btn-danger btn-sm">\n<i class="fas fa-ban fa-lg"></i><span data-i18n="card:contents.comments"></span>\n</div>\n</div>\n</div>\n<div id="dropzone_msg" class="text-center">\n<div>\n<div><i class="fas fa-cloud-upload-alt fa-4x"></i></div>\n<h4 data-i18n="cs:drop upload"></h4>\n</div>\n</div>\n</div>'),article_file_dropzone($(".row",e),"#reply_file_zone","#reply_file_add_btn"),$("#comment_input").focus(),$(e).localize()}function v_article_reply(e,n,a){$(">",e).remove(),$(e).addClass("lcl_list"),1==a&&v_comment_chain(e),v_reply(e,n,!1)}function v_reply(e,n,a,i=!0){if(null==n)return;let t=$(document.createDocumentFragment());const s=n.article_reply_seq.length,d=JSON.parse(n.json__file_name),l=JSON.parse(n.json__file_is_preview),o=JSON.parse(n.json__file_seq),_=JSON.parse(n.json__file_size),r=JSON.parse(n.json__to_account_seq);for(let e=0;e<s;++e){let a=account_list.get_account(n.account_seq[e]);t.prepend(`<hr>\n<div class="media">\n<div class="media-left"></div>\n<div id="media_body" class="media-body" data-article_reply_seq="${n.article_reply_seq[e]}"></div>\n</div>`),t.find(".media-left:first").append(v_user_photo_drop(a));let i=t.find(".media-body:first");i.append(`<span class="label label-normal moment_time" data-ctime="${n.ctime[e]}">${moment_time(n.ctime[e])}</span>`),account_list.is_user_account(a.account_seq)&&i.prepend(`<div id="reply_btn_group" class="pull-right">\n<button class="btn btn-warning btn-xs reply_edit_btn" data-article_reply_seq="${n.article_reply_seq[e]}">\n<i class="fas fa-edit"></i><span data-i18n="card:contents.edit"></span>\n</button>\n<button class="btn btn-danger btn-xs reply_del_btn">\n<i class="fas fa-trash"></i><span data-i18n="card:contents.delete"></span>\n</button>\n</div>`),i.append(`<div id="v_reply_to_account" class="h_auto border_bottom"></div>\n<div id="comment_note" class="border_bottom padding_5">\n<p class="note_p">${n.note[e]}</p>\n</div>\n<ul id="v_file_list" class="lcl_list"></ul>`),set_account_breadcrumb(r[e],t.find(".media-body:first #v_reply_to_account"),!1);const s=o[e].length;contents_data.init_gallery_index();for(let n=0;n<s&&null!=o[e][n];++n)t.find(".media-body:first #v_file_list").append(`${v_file_preview(l[e][n],o[e][n],null,d[e][n],_[e][n],contents_data.gallery_index++,"li")}\n`)}e.append(t),$(".account_drop a",e).webuiPopover("destroy").webuiPopover(init.popover_option)}