function info_btn_control(t,a){1==t.is_deleted&&($("#card_btn_group .dropdown-menu",a).append('<li class="divider"></li>\n<li class="dropdown-item">\n<a id="card_recover_btn" class="dis dis_o">\n<i class="fas fa-reply"></i>\n<span data-i18n="card:info.recover"></span>\n</a>\n</li>'),$("#card_btn_group #card_delete_btn span",a).remove(),$("#card_btn_group #card_delete_btn",a).append('<span data-i18n="card:info.remove"></span>')),1==t.is_hidden?$("#card_btn_group #card_hidden_btn",a).append('<i class="fas fa-eye"></i>\n<span data-i18n="card:info.show"></span>'):$("#card_btn_group #card_hidden_btn",a).append('<i class="fas fa-eye-slash"></i>\n<span data-i18n="card:info.hide"></span>'),1==t.is_bookmark?$("#card_btn_group #card_del_bookmark_btn",a).append('<i class="fas fa-lg fa-star"></i>'):($("#card_btn_group #card_set_bookmark_btn",a).addClass("uncheck"),$("#card_btn_group #card_set_bookmark_btn",a).append('<i class="far fa-lg fa-star"></i>')),1==t.is_lock?$("#card_btn_group #card_set_lock_btn",a).append('<i class="fas fa-lg fa-lock"></i>'):($("#card_btn_group #card_set_lock_btn",a).addClass("uncheck"),$("#card_btn_group #card_set_lock_btn",a).append('<i class="fas fa-lg fa-unlock"></i>')),1==t.is_todo||$("#card_btn_group #card_set_todo_btn",a).addClass("uncheck"),$("#card_btn_group #card_set_todo_btn",a).append('<i class="fas fa-lg fa-running"></i>')}function info_controll(t,a,s=!1,n="card"){for(i=0;i<=100;i+=10){let s=t.per_done==i?"selected":"";$("#per_done_combobox",a).append(`<option value="${i}" ${s}>${i}%</option>`)}set_auth_select($("#owner_select",a),t.owner_account_seq,!1),set_auth_select($("#viewer_select",a),t.list_viewer_account_seq,!0),1==s?$(".dis.dis_root",a).each((function(t,a){$(a).attr("disabled","disabled"),$(a).attr("id","")})):1==t.is_owner?1==t.is_deleted?($("#per_done_combobox",a).remove(),$(".dis:not(.dis_o)",a).each((function(t,a){$(a).attr("disabled","disabled"),$(a).attr("id","")}))):1==t.is_lock&&($("#per_done_combobox",a).remove(),$(".dis:not(.dis_osl)",a).each((function(t,a){$(a).attr("disabled","disabled"),$(a).attr("id","")}))):($("#per_done_combobox",a).remove(),$(".dis:not(.dis_book)",a).each((function(t,a){$(a).attr("disabled","disabled"),$(a).attr("id","")})));let e={...init.popover_click_option};e.placement="auto-right",e.width="15px",e.title="",e.content=`<ul class="${n} card_priority_pop tool-items">\n<li id="info_urgent_btn">\n<div class="btn btn-danger uncheck dropdown-item">\n<i class="fas fa-angle-double-up fa-lg"></i>\n</div>\n</li>\n<li id="info_high_btn">\n<div class="btn btn-warning uncheck dropdown-item">\n<i class="fas fa-angle-up fa-lg"></i>\n</div>\n</li>\n<li id="info_medium_btn">\n<div class="btn btn-primary uncheck dropdown-item">\n<i class="fas fa-minus fa-md"></i>\n</div>\n</li>\n<li id="info_low_btn">\n<div class="btn btn-dark uncheck dropdown-item">\n<i class="fas fa-angle-down fa-lg"></i>\n</div>\n</li>\n<li id="info_lowest_btn">\n<div class="btn btn-light uncheck dropdown-item">\n<i class="fas fa-angle-double-down fa-lg"></i>\n</div>\n</li>\n</ul>`,e.onShow=function(t){t.localize()},$("#card_priority_btn",a).webuiPopover("destroy").webuiPopover(e),e.content=`<ul class="${n} card_state_pop tool-items">\n<li id="info_ready_btn">\n<div class="btn btn-grey uncheck">\n<i class="far fa-circle fa-lg"></i>\n</div>\n</li>\n<li id="info_progress_btn">\n<div class="btn btn-primary uncheck">\n<i class="far fa-play-circle fa-lg"></i>\n</div>\n</li>\n<li id="info_stop_btn">\n<div class="btn btn-warning uncheck">\n<i class="far fa-pause-circle fa-lg"></i>\n</div>\n</li>\n<li id="info_cancel_btn">\n<div class="btn btn-danger uncheck">\n<i class="far fa-stop-circle fa-lg"></i>\n</div>\n</li>\n<li id="info_complete_btn">\n<div class="btn btn-success uncheck">\n<i class="far fa-check-circle fa-lg"></i>\n</div>\n</li>\n</ul>`,$("#card_state_btn",a).webuiPopover("destroy").webuiPopover(e)}function v_info(t,a,s){let n="",e="";switch(t.status){case card_detail.type_status_enum.ready:n="far fa-circle",e="btn-toolbar-grey";break;case card_detail.type_status_enum.progress:n="far fa-play-circle",e="btn-toolbar-primary";break;case card_detail.type_status_enum.stop:n="far fa-pause-circle",e="btn-toolbar-warning";break;case card_detail.type_status_enum.cancel:n="far fa-stop-circle",e="btn-toolbar-danger";break;case card_detail.type_status_enum.complete:n="far fa-check-circle",e="btn-toolbar-success"}let i="",l="";switch(t.priority){case card_detail.type_priority_enum.urgent:i="fa-angle-double-up",l="btn-toolbar-danger";break;case card_detail.type_priority_enum.high:i="fa-angle-up",l="btn-toolbar-warning";break;case card_detail.type_priority_enum.medium:i="fa-minus",l="btn-toolbar-primary";break;case card_detail.type_priority_enum.low:i="fa-angle-down",l="btn-toolbar-dark";break;case card_detail.type_priority_enum.lowest:i="fa-angle-double-down",l="btn-toolbar-light"}let c="card_set_bookmark_btn";1==t.is_bookmark&&(c="card_del_bookmark_btn");let d="",o=`<div id="card_title_edit" class="col-xs-9 compact_row over_wrapper input_chain">\n${t.title}\n</div>`;0==t.is_editable&&(o=`<div class="col-xs-9 compact_row over_wrapper input_chain">\n${t.title}\n</div>`);let _=`<span id="card_date_btn" class="dis dis_time"\ndata-start_ts="${moment().valueOf()}"\ndata-end_ts="${moment().valueOf()}"\ndata-is_allday="0"\ndata-is_repeat="0"\ndata-is_schedule="0">\n<div class="dis dis_time btn btn-normal btn-xs" data-i18n="card:info.date.date"></div>\n</span>`;1==t.is_schedule&&(_=`<span id="card_date_btn" class="dis dis_time"\ndata-start_ts="${t.schedule_item.start_ts}"\ndata-end_ts="${t.schedule_item.end_ts}"\ndata-is_allday="${t.schedule_item.is_all_day}"\ndata-is_repeat="${t.schedule_item.is_repeat}"\ndata-is_schedule="${t.is_schedule}">\n${schedule_time(t.schedule_item.start_ts,t.schedule_item.end_ts,t.schedule_item.is_all_day,t.schedule_item.is_repeat,t.is_schedule)}\n</span>`),1==$("#tree").fancytree("getTree").getNodeByKey(s.toString()).hasChildren()&&(d='<li class="divider"></li>\n<li class="dropdown-submenu pull-left dis">\n<a id="submenu_btn" class="submenu_btn" type="button">\n<i class="fas fa-level-down-alt"></i><span data-i18n="tree:tree.drop.under"></span>\n</a>\n<ul id="under_batch_btns" class="dropdown-menu" role="menu">\n<li id="card_state_batch_btn" class="dropdown-item">\n<a><i class="fas fa-play"></i><span data-i18n="tree:tree.drop.attribute batch"></span></a>\n</li>\n<li class="divider"></li>\n<li id="card_move_batch_btn" class="dropdown-item">\n<a><i class="far fa-share-square"></i><span data-i18n="tree:tree.drop.move batch"></span></a>\n</li>\n</ul>\n</li>'),a.prepend(`<div class="info_form" data-card_seq="${s}">\n<div class="col-lg-12">\n<div class="col-lg-6 xs_size">\n<div class="row">\n<div class="col-xs-3">\n<label class="pull-right info_tm_7" data-i18n="card:info.card title"></label>\n</div>\n${o}\n</div>\n<div class="row">\n<div class="col-xs-3">\n<label class="pull-right">\n<div id="add_owner_btn" class="dis fas fa-user fa-lg type_member_owner btn btn-sm btn-danger"\ndata-toggle="tooltip" title="" data-i18n="[title]card:tip.owner"></div>\n<div class="no_wrap" data-i18n="card:info.owner"></div>\n</label>\n</div>\n<div id="owner_select" class="col-xs-9 auth_select compact_row">\n<div id="owner_flow_btn" class="dis btn btn-sm btn-unborder"\ndata-toggle="tooltip" title="" data-i18n="[title]card:tip.history">\n<i class="fas fa-history fa-lg"></i>\n</div>\n</div>\n</div>\n</div>\n<div class="col-lg-6 xs_size">\n<div class="row">\n<div class="col-xs-3">\n<label class="pull-right info_tm_7"><span data-i18n="card:info.link copy"></span></label>\n</div>\n<div class="col-xs-9 compact_row">\n<span id="card_seq_copy" class="btn btn-sm btn-default" data-card_seq="${s}"\ndata-toggle="tooltip" title="" data-i18n="[title]card:tip.copy">\n<i class="far fa-clone"></i>\n</span>\n<span># ${s}</span>\n</div>\n</div>\n<div class="row">\n<div class="col-xs-3">\n<label class="pull-right info_tm_7" data-i18n="card:info.date.date_label"></label>\n</div>\n<div class="col-xs-9 compact_row info_tm_7">\n${_}\n</div>\n</div>\n<div class="row">\n<div class="col-xs-3">\n<label class="pull-right info_tm_3"><span data-i18n="card:info.progress"></span></label>\n</div>\n<div class="col-xs-6 compact_row">\n<div class="progress">\n<div class="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em; width: ${t.per_done}%;">\n${t.per_done}%\n</div>\n</div>\n</div>\n<div class="col-xs-3">\n<select id="per_done_combobox" class="chosen_select"></select>\n</div>\n</div>\n</div>\n</div>\n<div class="info_collapse col-lg-12 ">\n<div class="col-lg-6 xs_size">\n<div class="row">\n<div class="col-xs-3">\n<label class="pull-right">\n<div id="add_viewer_btn" class="dis fas fa-user fa-lg type_member_viewer btn btn-sm btn-viewer btn-sm"\ndata-toggle="tooltip" title="" data-i18n="[title]card:tip.viewer"></div>\n<div class="no_wrap" data-i18n="card:info.viewer"></div>\n</label>\n</div>\n<div id="viewer_select" class="col-xs-9 auth_select compact_row"></div>\n</div>\n<div class="row">\n<div class="col-xs-3">\n<label id="cost_label" class="pull-right info_tm_7" data-i18n="card:info.cost"></label>\n</div>\n<div id="cost_select" class="col-xs-9 compact_row"><span id="cost_view_btn" class="btn btn-default btn-sm" data-card_seq="${s}"> ${parseInt(t.sum_cost_time_this/60)}h ${t.sum_cost_time_this%60}m</span></div>\n</div>\n<div class="row">\n<div class="col-xs-3">\n<label class="pull-right info_tm_7" data-i18n="card:info.under cost"></label>\n</div>\n<div class="col-xs-9 compact_row"><span id="cost_under_btn" class="btn btn-default btn-sm" data-card_seq="${s}"> ${parseInt(t.sum_cost_time_under/60)}h ${t.sum_cost_time_under%60}m</span></div>\n</div>\n</div>\n<div class="col-lg-6 xs_size">\n<div class="row">\n<div class="col-xs-3">\n<label class="pull-right info_tm_7" data-i18n="card:info.creator"></label>\n</div>\n<div id="card_creator_drop" class="col-xs-9 compact_row">\n</div>\n</div>\n<div class="row">\n<div class="col-xs-3">\n<label class="pull-right"><span data-i18n="card:info.created"></span></label>\n</div>\n<div class="col-xs-9 compact_row">\n<span class="label label-normal moment_time" data-ctime="${t.ctime}">${moment_time(t.ctime)}</span>\n\x3c!--<span class="hidden lts_time" data-ctime="${t.ctime}"> ${lts_time(t.ctime)}</span>--\x3e\n</div>\n</div>\n<div class="row">\n<div class="col-xs-3">\n<label class="pull-right info_tm_3"><span data-i18n="card:info.state"></span></label>\n</div>\n<div class="col-xs-9 compact_row">\n${select_state_sytle(t.is_hidden,t.is_deleted)}\n</div>\n</div>\n</div>\n</div>\n</div>`),a.prepend(`<div id="card_btn_group" class="info_btn_group" data-card_seq="${s}">\n<div id="card_state_btn" class="dis btn btn-sm ${e}">\n\x3c!--data-toggle="tooltip" title="" data-i18n="[title]card:tip.state">--\x3e\n<i class="${n} fa-lg"></i></div>\n\x3c!--<div id="state_toolbar" class="hidden">--\x3e\n\x3c!--<a id="info_ready_btn" class="btn btn-grey uncheck" title="" data-i18n="[title]card:tip.state select.ready">--\x3e\n\x3c!--<i class="far fa-circle fa-lg"></i>--\x3e\n\x3c!--</a>--\x3e\n\x3c!--<a id="info_progress_btn" class="btn btn-primary uncheck" title="" data-i18n="[title]card:tip.state select.progress">--\x3e\n\x3c!--<i class="far fa-play-circle fa-lg"></i>--\x3e\n\x3c!--</a>--\x3e\n\x3c!--<a id="info_stop_btn" class="btn btn-warning uncheck" title="" data-i18n="[title]card:tip.state select.stop">--\x3e\n\x3c!--<i class="far fa-pause-circle fa-lg"></i>--\x3e\n\x3c!--</a>--\x3e\n\x3c!--<a id="info_cancel_btn" class="btn btn-danger uncheck" title="" data-i18n="[title]card:tip.state select.cancel">--\x3e\n\x3c!--<i class="far fa-stop-circle fa-lg"></i>--\x3e\n\x3c!--</a>--\x3e\n\x3c!--<a id="info_complete_btn" class="btn btn-success uncheck" title="" data-i18n="[title]card:tip.state select.complete">--\x3e\n\x3c!--<i class="far fa-check-circle fa-lg"></i>--\x3e\n\x3c!--</a>--\x3e\n\x3c!--</div>--\x3e\n<div id="${c}" class="dis dis_o dis_osl dis_book bookmark btn btn-sm btn-info"\ndata-toggle="tooltip" title="" data-i18n="[title]card:tip.bookmark"></div>\n<div id="card_priority_btn" class="dis btn btn-sm ${l}">\n\x3c!--data-toggle="tooltip" title="" data-i18n="[title]card:tip.priority">--\x3e\n<i class="fas ${i} fa-lg"></i>\n</div>\n\x3c!--<div id="priority_toolbar" class="hidden">--\x3e\n\x3c!--<a id="info_urgent_btn" class="btn btn-danger uncheck">--\x3e\n\x3c!--<i class="fas fa-angle-double-up fa-lg"></i>--\x3e\n\x3c!--</a>--\x3e\n\x3c!--<a id="info_high_btn" class="btn btn-warning uncheck">--\x3e\n\x3c!--<i class="fas fa-angle-up fa-lg"></i>--\x3e\n\x3c!--</a>--\x3e\n\x3c!--<a id="info_medium_btn" class="btn btn-primary uncheck">--\x3e\n\x3c!--<i class="fas fa-minus fa-md"></i>--\x3e\n\x3c!--</a>--\x3e\n\x3c!--<a id="info_low_btn" class="btn btn-dark uncheck">--\x3e\n\x3c!--<i class="fas fa-angle-down fa-lg"></i>--\x3e\n\x3c!--</a>--\x3e\n\x3c!--<a id="info_lowest_btn" class="btn btn-light uncheck">--\x3e\n\x3c!--<i class="fas fa-angle-double-down fa-lg"></i>--\x3e\n\x3c!--</a>--\x3e\n\x3c!--</div>--\x3e\n<div id="card_set_todo_btn" class="dis btn btn-sm btn-worker"\ndata-toggle="tooltip" title="" data-i18n="[title]card:tip.todo">\n</div>\n<div id="card_set_lock_btn" class="dis dis_os dis_osl btn btn-sm btn-gold"\ndata-toggle="tooltip" title="" data-i18n="[title]card:tip.lock">\n</div>\n<div id="card_create_btn" class="dis btn btn-sm btn-default card_create_btn"\ndata-toggle="tooltip" title="" data-i18n="[title]card:tip.create">\n<i class="fas fa-plus fa-lg"></i>\n</div>\n<span class="dropdown pull-right">\n<a type="button" data-toggle="dropdown" aria-haspopup="true"\naria-expanded="false"><div class="btn btn-default btn-sm"><i class="fas fa-ellipsis-h fa-lg"></i></div></a>\n<ul class="dropdown-menu" role="menu">\n<li class="dropdown-item">\n<a id="card_title_btn" class="dis dis_root">\n<i class="fas fa-edit"></i>\n<span data-i18n="tree:tree.drop.title"></span>\n</a>\n</li>\n<li class="divider"></li>\n<li class="dropdown-item">\n<a id="card_hidden_btn" class="dis dis_root"></a>\n</li>\n<li class="divider"></li>\n<li class="dropdown-item">\n<a id="card_move_modal_btn" class="dis dis_root">\n<i class="far fa-share-square"></i>\n<span data-i18n="card:info.move"></span>\n</a>\n</li>\n${d}\n<li class="divider"></li>\n<li class="dropdown-item">\n<a id="card_delete_btn" class="dis dis_o dis_root">\n<i class="fas fa-trash"></i>\n<span data-i18n="card:info.delete"></span>\n</a>\n</li>\n</ul>\n</span>\n</div>`),$("#card_creator_drop",a).append(v_user_photo_drop(account_list.get_account(t.create_account_seq)))}function select_type_relation(t){switch(t){case card_detail.enum_link_relation.relate:return'<strong data-i18n="card:link.relate"></strong>';case card_detail.enum_link_relation.duplicate:return'<strong data-i18n="card:link.duplicate"></strong>';default:return'<strong data-i18n="card:link.relate"></strong>'}}function select_link_title(t,a,s){let n="";return(t=1==t)&&(n="fancytree-hidden"),(a=1==a)&&(n="fancytree-deleted"),`<span class="${n} title_style"> ${s}</span>`}function v_link(t,a){$(a).append('<div id="link_area" class="col-xs-12">\n<div id="link_head" class="col-xs-12">\n<div id="link_create_veiw" class="dis btn btn-default btn-sm pull-right">\n<i class="fas fa-plus"></i><span data-i18n="card:link.link add"></span>\n</div>\n<h4 class="text-gray" data-i18n="card:link.link"></h4>\n<span data-i18n="card:link.ex"></span>\n</div>\n<div id="link_list" class="col-xs-12"></div>\n</div>');let s=t.list_link_info.card_link_seq.length;for(let n=0;n<s;++n){let s=account_list.get_account(t.list_link_info.owner_account_seq[n]);$("#link_list",a).append(`<div class="row">\n<div class="col-xs-2 over_wrapper text-center">\n${select_type_relation(t.list_link_info.type_relation[n])}\n</div>\n<div id="link_target_info" class="col-xs-10">\n<div>\n<div id="link_del_btn" class="dis btn btn-danger btn-sm pull-right" data-link_seq="${t.list_link_info.card_link_seq[n]}">\n<i class="fas fa-trash"></i>\n</div>\n<div class="pull-right">${v_user_photo_drop(s,!0)}</div>\n<div id="view_contents_btn" style="text-align: left" class="over_wrapper" data-card_seq="${t.list_link_info.card_seq[n]}" data-link_seq="${t.list_link_info.card_link_seq[n]}">\n${select_link_title(t.list_link_info.is_hidden[n],t.list_link_info.is_deleted[n],t.list_link_info.title[n],t.list_link_info.card_seq[n],t.list_link_info.card_link_seq[n])}\n</div>\n</div>\n<div id="status_icons">\n<span id="per_done" class="pull-right">${t.list_link_info.per_done[n]}%</span>\n<span id="priority" class="pull-right">${set_priority_icon(t.list_link_info.priority[n])}</span>\n<span class="pull-right">${select_state_icon(t.list_link_info.status[n])}</span>\n</div>\n</div>\n</div>`)}$("#link_area .account_drop a",a).webuiPopover("destroy").webuiPopover(init.popover_option)}function set_auth_select(t,a,s,n=card_detail.v_auth_max_count){if(a)if(0!=s){let s=a.length,e=a.length;for(let i=0;i<e&&i<n;++i)--s,t.append(v_user_photo_drop(account_list.get_account(a[i])));if(0<s){t.append(`<span class="dropdown info_tm_7">\n<a data-toggle="dropdown" aria-haspopup="true"\naria-expanded="false"><span><i class="fas fa-plus"></i> ${s}</span></a>\n<ul id="auth_drop_ul" class="dropdown-menu dropdown-menu-right" role="menu"></ul>\n</span>`);for(let s=n;s<e;++s){let n=account_list.get_account(a[s]);$("#auth_drop_ul",t).append(`${v_user_photo_drop(n,!0)}<span>${n.name}</span>\n<li class="divider">`)}$("#auth_drop_ul .account_drop a",t).webuiPopover("destroy").webuiPopover(init.popover_option),$("#auth_drop_ul .dropdown",t).addClass("dropdown-submenu"),$("#auth_drop_ul .dropdown",t).removeClass("dropdown")}}else{let s=account_list.get_account(a);t.prepend(v_user_photo_drop(s))}}function sort_section(t){let a=$(t).closest("#contents_area");Sortable.create(t,{handle:".content-sort-handle",animation:250,swapThreshold:1,forceFallback:!0,draggable:".list-group-item",onUpdate:function(t){timeline_set_article_section_order(t)},onChoose:function(t){a.addClass("dz-drag-lock")},onUnchoose:function(){a.removeClass("dz-drag-lock")}})}function v_card_timeline(t){$("#tabs-card-contents #card_contents").remove(),$("#tabs-card-contents #contents").append('<div id="card_contents" data-mcs-theme="dark">\n<div id="contents_area">\n<h3 class="text-center">Please select a card</h3>\n</div>\n<div id="timeline_area" class="panel-body">\n</div>\n</div>').data("article_seq",t.list_article[0].article_seq),card_detail.edit_mode==card_detail.enum_edit_mode.view?card_detail.is_editable?($("#tabs-card-contents #card_contents").prepend('<div id="note_edit_btn" class="btn btn-sm btn-primary note_edit_btn"><i class="fas fa-edit fa-lg"></i></div>'),v_contents($("#card-tabs #tabs-card-contents #contents_area"),contents_parser(t.list_article[0].info_article))):v_contents($("#card-tabs #tabs-card-contents #contents_area"),contents_parser(t.list_article[0].info_article)):card_detail.is_editable?v_editor($("#card-tabs #tabs-card-contents #contents_area"),contents_parser(t.list_article[0].info_article),t.list_article[0].article_seq):v_contents($("#card-tabs #tabs-card-contents #contents_area"),contents_parser(t.list_article[0].info_article)),v_article_reply($("#card-tabs #tabs-card-contents #timeline_area"),t.list_article[0].info_article_reply,t.is_use_comment)}function set_priority_icon(t){let a="",s="";switch(t){case card_detail.type_priority_enum.urgent:a="fa-angle-double-up",s="text-danger";break;case card_detail.type_priority_enum.high:a="fa-angle-up",s="text-warning";break;case card_detail.type_priority_enum.medium:a="fa-minus",s="text-primary";break;case card_detail.type_priority_enum.low:a="fa-angle-down",s="text-dark";break;case card_detail.type_priority_enum.lowest:a="fa-angle-double-down",s="text-light"}return`<i class="fas fa-lg ${a} ${s}"></i>`}function v_owner_flow(t){$("#owner_flow_modal .modal-body >").remove();let a=t.card_owner_flow_seq.length;for(let s=0;s<a;++s)console.log(t.card_owner_flow_seq[s]),$("#owner_flow_modal .modal-body").append(`<div class="list-group-item">\n<div class="pull-left mr_10">${v_user_photo_drop(account_list.get_account(t.action_account_seq[s]),!0)}</div>\n<div>\n<small class="pull-right">${moment_time(t.ctime[s])}</small>\n${v_user_photo_drop(account_list.get_account(t.from_account_seq[s]),!0)}\n<i class="fas fa-arrow-right"></i>\n${v_user_photo_drop(account_list.get_account(t.to_account_seq[s]),!0)}\n<div class="pre_wrap ml_35 mt_5">${t.note[s]}</div>\n</div>\n</div>`)}function v_card_cost(t,a){$("#cost_list_modal .modal-body >").remove(),$("#cost_list_modal .modal-body").data("card_seq",a),$("#cost_list_modal .modal-body").append('<div id="cost_list"><div class="list"></div></div>'),t.is_creatable&&$("#cost_list_modal #cost_list").prepend('<div id="cost_input">\n<div class="col-sm-12">\n<label><span data-i18n="card:cost.comment"></span></label>\n<input id="cost_note" class="form-control input-sm" data-i18n="[placeholder]" maxlength="5000">\n</div>\n<div class="col-sm-12">\n<div class="cost_time">\n<div class="col-xs-9 col-sm-5">\n<label class="col-xs-4 info_tm_7"><span class="pull-right" data-i18n="card:cost.hours"></span></label>\n<input id="cost_h" type="text" value="0" class="input-sm" maxlength="100">\n</div>\n<div class="col-xs-9 col-sm-5">\n<label class="col-xs-4 info_tm_7"><span class="pull-right" data-i18n="card:cost.minutes"></span></label>\n<input id="cost_m" type="text" value="0" class="input-sm" maxlength="100">\n</div>\n<div class="col-xs-3 col-sm-2">\n<div id="set_cost" class="btn btn-primary pull-right"><i class="fas fa-plus"></i></div>\n</div>\n</div>\n</div>\n</div><hr>');let s=$(document.createDocumentFragment());for(let a=t.list_cost_log.card_cost_seq.length-1;0<=a;--a){let n=account_list.get_account(t.list_cost_log.account_seq[a]);s.append(`<div data-cost_seq="${t.list_cost_log.card_cost_seq[a]}" data-cost_time="${t.list_cost_log.cost_time[a]}" class="list_item">\n<div class="media-left"></div>\n<div class="media-body">\n<div class="col-xs-12">\n<strong>${parseInt(t.list_cost_log.cost_time[a]/60)}h ${t.list_cost_log.cost_time[a]%60}m</strong>\n<span id="cost_note"></span>\n<span id="cost_controll_btn" class="pull-right">\n<div id="cost_del_btn" class="btn btn-danger btn-sm pull-right"><i class="fas fa-trash"></i></div>\n<div id="cost_modify_btn" class="btn btn-success btn-sm pull-right"><i class="fas fa-edit"></i></div>\n</span>\n</div>\n<div class="col-xs-12">\n<small class="pull-right">${lll_time(t.list_cost_log.ctime[a])}</small>\n</div>\n</div>\n<div class="hidden">\n<span class="cost_time">${t.list_cost_log.cost_time[a]}</span>\n<span class="ctime">${t.list_cost_log.ctime[a]}</span>\n</div>\n</div>`),$(".media-left:last",s).append(v_user_photo_drop(n)),$("#cost_note:last",s).text(t.list_cost_log.note[a]),0==t.list_cost_log.is_editable[a]&&$("#cost_controll_btn:last .btn",s).attr("disabled",!0)}$("#cost_list_modal .list").append(s);new List("cost_list",{valueNames:["cost_time","ctime"]}),$("#cost_h").TouchSpin({min:0,max:100,step:1,boostat:5,maxboostedstep:10,buttondown_class:"btn btn-default",buttonup_class:"btn btn-default"}),$("#cost_m").TouchSpin({min:-10,max:60,step:10,boostat:5,maxboostedstep:10,buttondown_class:"btn btn-default",buttonup_class:"btn btn-default"})}function v_card_cost_view(t,a){$("#cost_view_modal .modal-body >").remove(),$("#cost_view_modal .modal-body").data("card_seq",a),$("#cost_view_modal .modal-body").append('<div id="cost_list"><div class="list"></div></div>');let s=$(document.createDocumentFragment());for(let a=t.list_cost_log.card_cost_seq.length-1;0<=a;--a){let n=account_list.get_account(t.list_cost_log.account_seq[a]);s.append(`<div data-cost_seq="${t.list_cost_log.card_cost_seq[a]}" data-cost_time="${t.list_cost_log.cost_time[a]}" class="list_item">\n<div class="media-left"></div>\n<div class="media-body">\n<div class="col-xs-12">\n<strong>${parseInt(t.list_cost_log.cost_time[a]/60)}h ${t.list_cost_log.cost_time[a]%60}m</strong>\n<span id="cost_note"></span>\n</div>\n<div class="col-xs-12">\n<small class="pull-right">${lll_time(t.list_cost_log.ctime[a])}</small>\n</div>\n</div>\n<div class="hidden">\n<span class="cost_time">${t.list_cost_log.cost_time[a]}</span>\n<span class="ctime">${t.list_cost_log.ctime[a]}</span>\n</div>\n</div>`),$(".media-left:last",s).append(v_user_photo_drop(n)),$("#cost_note:last",s).text(t.list_cost_log.note[a])}$("#cost_view_modal .list").append(s);new List("cost_list",{valueNames:["cost_time","ctime"]})}function v_cost_modify(t){let a=$(t).parents(".media-body"),s=$(t).parents(".list_item"),n=$("#cost_note",s).text();$("#cost_list_modal .modal-body .btn").attr("disabled",!0),$("#cost_list_modal .modal-body input").attr("disabled",!0),a.children().remove(),a.append(`<div class="col-sm-12">\n<label>cost time</label>\n<input id="cost_note" class="form-control input-sm" data-i18n="[placeholder]" maxlength="5000">\n</div>\n<div id="cost_modify" class="col-sm-12">\n<div class="row cost_time">\n<div class="col-xs-9 col-sm-5">\n<label class="col-xs-4 info_tm_7"><span class="pull-right">시간:</span></label>\n<input id="cost_h" type="text" value="${parseInt(s.data("cost_time")/60)}" class="input-sm" maxlength="100">\n</div>\n<div class="col-xs-9 col-sm-5">\n<label class="col-xs-4 info_tm_7"><span class="pull-right">분:</span></label>\n<input id="cost_m" type="text" value="${s.data("cost_time")%60}" class="input-sm" maxlength="100">\n</div>\n<div class="col-xs-3 col-sm-2">\n<div id="cost_cancel_btn" class="btn btn-danger btn-sm pull-right"><i class="fas fa-ban"></i></div>\n<div id="cost_update_btn" class="btn btn-primary btn-sm pull-right"><i class="fas fa-pen-alt"></i></div>\n</div>\n</div>\n</div>`),$("#cost_note",a).val(n),$("#cost_modify #cost_h").TouchSpin({min:0,max:100,step:1,boostat:5,maxboostedstep:10,buttondown_class:"btn btn-default",buttonup_class:"btn btn-default"}),$("#cost_modify #cost_m").TouchSpin({min:-10,max:60,step:10,boostat:5,maxboostedstep:10,buttondown_class:"btn btn-default",buttonup_class:"btn btn-default"})}function v_card_bookmark(t){if($("#card_bookmark_modal .modal-body >").remove(),0==t.card_seq.length)return;let a=$("#card_bookmark_modal").data("tree_type");if(a==tree_data.enum_tree_type.card){$("#card_bookmark_modal .modal-body").append('<div id="bookmark_list">\n<div id="list_search">\n<input class="search" data-i18n="[placeholder]chat:member.search" maxlength="100"/>\n</div>\n<div>\n<span class="btn btn-sm btn-default sort" data-sort="title"><i class="fas fa-sort-alpha-down"></i></span>\n<span class="btn btn-sm btn-default sort" data-sort="state"><i class="far fa-square"></i></span>\n<span class="btn btn-sm btn-default sort" data-sort="status"><i class="far fa-play-circle"></i></span>\n<span class="btn btn-sm btn-default sort" data-sort="priority"><i class="fas fa-angle-double-up"></i></span>\n<span class="btn btn-sm btn-default sort" data-sort="per_done"><i class="fas fa-percent"></i></span>\n<span class="btn btn-sm btn-default sort" data-sort="name"><i class="fas fa-user"></i></span>\n</div>\n<div class="list"></div>\n</div>');let a=t.card_seq.length;for(let s=0;s<a;++s){let a=0;1==t.is_hidden[s]&&(a=1),1==t.is_deleted[s]&&(a=2);let n=account_list.get_account(t.owner_account_seq[s]);$("#bookmark_list .list").append(`<div data-card_seq="${t.card_seq[s]}" class="col-xs-12 list_item">\n<div class="over_wrapper">\n<i id="set_bookmark_btn" class="fas fa-star fa-2x text-info pull-left"></i>\n<div class="pull-right account">\n<div id="go_card" class="btn btn-success btn-sm"><i class="fas fa-external-link-square-alt"></i></div>\n</div>\n<span class="pull-left">${select_state_icon(t.status[s])}</span>\n${select_title_sytle(t.is_hidden[s],t.is_deleted[s],t.title[s],t.card_seq[s])}\n<div id="status_icons" class="pull-right">\n<span>${select_state_sytle(t.is_hidden[s],t.is_deleted[s])}</span>\n<span id="priority">${set_priority_icon(t.priority[s])}</span>\n<span id="per_done">${t.per_done[s]}%</span>\n</div>\n</div>\n<div class="hidden">\n<span class="title">${t.title[s]}</span>\n<span class="state">${a}</span>\n<span class="status">${t.status[s]}</span>\n<sapn class="priority">${t.priority[s]}</sapn>\n<span class="account_name">${n.name}</span>\n<sapn class="per_done">${t.per_done[s]}</sapn>\n</div>\n</div>`),$("#bookmark_list .list .account:last").prepend(v_user_photo_drop(n))}}else if(a==tree_data.enum_tree_type.note){$("#card_bookmark_modal .modal-body").append('<div id="bookmark_list">\n<div id="list_search">\n<input class="search" data-i18n="[placeholder]chat:member.search" maxlength="100"/>\n</div>\n<div>\n<span class="btn btn-sm btn-default sort" data-sort="title"><i class="fas fa-sort-alpha-down"></i></span>\n</div>\n<div class="list"></div>\n</div>');let a=t.note_seq.length;for(let s=0;s<a;++s){let a=0;t.is_deleted[s]&&(a=2),$("#bookmark_list .list").append(`<div data-card_seq="${t.note_seq[s]}" class="col-xs-12 list_item">\n<div class="over_wrapper">\n<i id="set_bookmark_btn" class="fas fa-star fa-2x text-info pull-left"></i>\n<div class="pull-right account">\n<div id="go_card" class="btn btn-success btn-sm"><i class="fas fa-external-link-square-alt"></i></div>\n</div>\n\x3c!--<span class="pull-left">${select_state_icon(t.status[s])}</span>--\x3e\n${select_title_sytle(!1,t.is_deleted[s],t.title[s],t.note_seq[s])}\n<div id="status_icons" class="pull-right">\n<span>${select_state_sytle(!1,t.is_deleted[s])}</span>\n</div>\n</div>\n<div class="hidden">\n<span class="title">${t.title[s]}</span>\n<span class="state">${a}</span>\n</div>\n</div>`)}}new List("bookmark_list",{valueNames:["title","state","status","priority","name","per_done"]})}function v_account_select_list(t,a=[]){$(">",t).remove(),a.some((function(a){let s=account_list.get_account(a);null!=s&&$(t).append(`<div class="btn btn-default unselect_btn btn-unborder" data-toggle="tooltip" title="${s.name}" data-account_seq="${s.account_seq}">\n<img class="img-circle user_photo" src="${s.photo_url}">\n<i class="fas fa-times text-danger"></i>\n</div>`)}))}function v_account_select_tree(t,a,s=[]){v_account_select_list(t,s),a.fancytree("getTree").visit((function(t){t.setSelected(!1),-1!==s.indexOf(t.data.account_seq)&&t.setSelected(!0)}))}function v_card_duplication_tree(t,a,s=null){let n=t.fancytree("getTree"),e=a.fancytree("getTree");e.clear(),null==s?e.rootNode.addChildren(n.getFirstChild().toDict(!0)):(e.rootNode.addChildren(s.toDict(!0)),e.selectAll(!1))}function v_log(t,a=$("#tabs-card-log #log_list")){let s=$(document.createDocumentFragment()),n=t.msg.length;for(let a=0;a<n;++a)$(s).append(`<div class="log_item card_list_item" data-card_seq="${t.target_seq[a]}"\ndata-type_target="${t.type_target[a]}"\ndata-type="${t.type[a]}"\ndata-zlog_seq="${t.zlog_seq[a]}">\n</div>`),$(".log_item:last",s).append(noti.set_noti_msg(t.type[a],t.msg[a],t.target_seq[a],t.type_target[a],t.zlog_seq[a],t.send_account_seq[a],t.ctime[a]));a.append(s)}function v_cost_view_user_list(t){$("#cost_user_list >").remove();let a=$(document.createDocumentFragment()),s=t.account_seq.length;for(let n=0;n<s;++n)$(a).append(`<div id="user_cost_btn" class="cost_item list_item" data-account_seq="${t.account_seq[n]}">\n</div>`),$(".cost_item:last",a).append(`<div>${v_user_photo_drop(account_list.get_account(t.account_seq[n]),!0)}\n<span class="">${humanize_time(t.sum_cost_time[n])}</span>\n</div>`);$(".account_drop a",a).webuiPopover("destroy").webuiPopover(init.popover_option),$("#cost_user_list").append(a)}function v_user_cost_list(t){$("#card_user_cost_list >").remove();let a=$(document.createDocumentFragment()),s=t.card_seq.length;for(let n=0;n<s;++n)$(a).append(`<div class="card_user_cost_item list_item card_list_item" data-card_seq="${t.card_seq[n]}">\n</div>`),$(".card_user_cost_item:last",a).append(`<div class="over_wrapper">${v_user_photo_drop(account_list.get_account(t.owner_account_seq[n]),!0)}\n<b>${t.title[n]}</b>\n<span class="pull-right">${humanize_time(t.sum_cost_time_user[n])} / ${humanize_time(t.sum_cost_time_card[n])}</span>\n</div>`);$(".account_drop a",a).webuiPopover("destroy").webuiPopover(init.popover_option),$("#card_user_cost_list").append(a),$("#cost_user_list_modal").modal()}function v_cost_log_list(t,a){0==a&&$("#card_cost_log_list >").remove();let s=$(document.createDocumentFragment()),n=t.card_seq.length;for(let a=0;a<n;++a)$(s).append(`<div class="card_cost_log_item list_item card_list_item" data-card_seq="${t.card_seq[a]}">\n</div>`),$(".card_cost_log_item:last",s).append(`<div class="over_wrapper">${v_user_photo_drop(account_list.get_account(t.owner_account_seq[a]),!0)}\n<b>${t.title[a]}</b>\n</div>\n<div class="over_wrapper photo_sm" style="margin: 5px 0px 0px 30px;">\n${v_user_photo_drop(account_list.get_account(t.list_cost_log.account_seq[a]),!0)}\n<span>${t.list_cost_log.note[a]}</span>\n<span class="pull-right">\n<b>${humanize_time(t.list_cost_log.cost_time[a])}</b>\n${moment_time(t.list_cost_log.ctime[a])}\n</span>\n</div>\n`);$(".account_drop a",s).webuiPopover("destroy").webuiPopover(init.popover_option),$("#card_cost_log_list").append(s),$("#cost_log_list_modal").modal()}