function v_confirm_progress_icon(n){return 1==n?'<strong data-i18n="user:confirm.completion"></strong>':'<strong data-i18n="user:confirm.progresing"></strong>'}function v_confirm_tile(n,i){return 2==i?`<span class="text-deleted">${n}</span>`:`<span>${n}</span>`}function v_confirm_read_icon(n,i=!0){return 1==i?1==n?'<span data-i18n="user:confirm.read"></span>':'<span data-i18n="user:confirm.unread"></span>':0==n?'<i class="fas fa-envelope fa-fw fa-lg pt_5"></i>':'<i class="far fa-envelope-open fa-fw fa-lg pt_5"></i>'}function v_confirm_pass_icon(n){switch(n){case confirm.enum_confirm_type_pass.ready:return'<span class="text-dark-gray" data-i18n="user:confirm.wait"></span>';case confirm.enum_confirm_type_pass.approval:return'<span class="text-normal" data-i18n="user:confirm.approval"></span>';case confirm.enum_confirm_type_pass.reject:return'<span class="text-danger" data-i18n="user:confirm.reject"></span>';default:return'<span class="text-dark-gray" data-i18n="user:confirm.wait"></span>'}}function v_confirm_list(n,i){$("#confirm_area",i).remove(),$(i).append('<div id="confirm_area" class="col-xs-12">\n<div id="confirm_head" class="col-xs-12">\n<div id="confirm_add_btn" class="dis btn btn-default btn-sm pull-right">\n<i class="fas fa-plus"></i><span data-i18n="user:confirm.confirm add"></span>\n</div>\n<h4 class="text-gray" data-i18n="user:confirm.confirm"></h4>\n<span data-i18n="user:confirm.ex"></span>\n</div>\n<div id="confirm_list" class="col-xs-12"></div>\n</div>');for(let e=n.confirm_seq.length-1;0<=e;--e){let s=account_list.get_account(n.create_account_seq[e]),a=$("#confirm_list",i),t=`<li class="dropdown-item">\n<a id="confirm_cancel_btn" data-confirm_seq="${n.confirm_seq[e]}">\n<i class="fas fa-ban"></i>\n<span data-i18n="user:confirm.cancel"></span>\n</a>\n</li>`,r=`<div class="over_wrapper">\n${n.title[e]}\n</div>`;2==n.state[e]&&(t=`<li class="dropdown-item" disabled="disabled">\n<a id="confirm_cancel_btn" class="canceled" data-confirm_seq="${n.confirm_seq[e]}">\n<i class="fas fa-ban"></i>\n<span data-i18n="user:confirm.cancel"></span>\n</a>\n</li>`,r=`<div class="over_wrapper text-deleted">\n${n.title[e]}\n</div>`),a.append(`<div class="row"  data-confirm_seq="${n.confirm_seq[e]}">\n<div class="col-xs-2 over_wrapper text-center" style="padding: 5px">\n${v_confirm_progress_icon(n.is_all_decision[e])}\n</div>\n<div id="link_target_info" class="col-xs-10">\n<span class="dropdown pull-right">\n<a type="button" data-toggle="dropdown" aria-haspopup="true"\naria-expanded="false"><div class="dis btn btn-default btn-sm"><i class="fas fa-ellipsis-h fa-lg"></i></div></a>\n<ul class="dropdown-menu" role="menu">\n<li class="divider"></li>\n${t}\n</ul>\n</span>\n<div class="pull-right">${v_user_photo_drop(s,!0)}</div>\n${r}\n<small>${lll_time(n.ctime[e])}</small>\n\n</div>\n</div>`)}$("#confirm_area .account_drop a",i).webuiPopover("destroy").webuiPopover(init.popover_option)}function v_confirm_user_list(n,i=!1,e){e.clear(),e.state.clear();let s=n.list_confirm,a=n.list_confirm_decision;const t=s.confirm_seq.length;let r=new Array;for(let n=0;n<t;++n){let i=account_list.get_account(s.create_account_seq[n]);r.push([`<div class="confirm_user_list_flex">\n${null==a?"":v_user_photo_drop(i,!0)}\n</div>`,`<div>\n<div class="over_wrapper pt_2">\n${v_confirm_tile(s.title[n],s.state[n])}\n</div>\n<div class="between_flex">\n<div>\n${v_confirm_progress_icon(s.is_all_decision[n])}\n${null==a?"":v_confirm_read_icon(a.is_read[n])}\n</div>\n<small>${lll_time(s.ctime[n])}</small>\n</div>\n</div>`,s.ctime[n],s.confirm_seq[n]])}e.rows.add(r),e.draw(i),0==i&&(e.row("#confirm_"+confirm.user_table_selected_seq).select(),split_collapse(init.confirm_split,0)),$("#confirm_split_left .account_drop a").webuiPopover("destroy").webuiPopover(init.popover_option)}function v_confirm_user_item(n,i=$("#confirm_split_right"),e=!0,s=!0,a=!0,t=!1,r=!1){let c=$(document.createDocumentFragment()),o=$(document.createDocumentFragment()),l=$(document.createDocumentFragment()),_=$(document.createDocumentFragment()),d=n.confirm_item.file_info,m=d.file_seq.length;if(0<m){c.append('<div id=""  class="row row_margin_unset mt_10">\n<div class="col-xs-2">\n<label class="pull-right" data-i18n="user:confirm.reference file"></label>\n</div>\n<div class="col-xs-10"><hr></div>\n<ul id="confirm_file_list" class="col-xs-10 col-xs-offset-2 lcl_list"></ul>\n</div>'),contents_data.init_gallery_index();for(let n=0;n<m;++n)c.find("#confirm_file_list").append(`<li class="text-center">\n${1==d.file_is_preview[n]?`<span id="lcl_open_btn" class="lcl_item"\ndata-index="${contents_data.gallery_index++}"\ndata-file_seq="${d.file_seq[n]}"\ndata-file_name="${d.file_name[n]}"\ndata-file_size="${d.file_size[n]}"\ndata-file_is_preview="${d.file_is_preview[n]}">\n<img src="/file_preview/${space_seq}/${d.file_seq[n]}/3"/>\n</span>`:'<i class="far fa-file fa-5x"></i>'}\n<div id="file_down_btn" class="over_wrapper" data-file_seq="${d.file_seq[n]}">${d.file_name[n]}</div>\n<div class="over_wrapper">${humanize_file_size(d.file_size[n])}</div>\n</li>`)}let f=n.confirm_item.link_info.list_card,p=f.card_seq.length;if(0<p){o.append('<div id=""  class="row row_margin_unset mt_10">\n<div class="col-xs-2">\n<label class="pull-right" data-i18n="user:confirm.reference card"></label>\n</div>\n<div class="col-xs-10"><hr></div>\n<div id="confirm_card_list" class="col-xs-10 col-xs-offset-2"></div>\n</div>');for(let i=0;i<p;++i)o.find("#confirm_card_list").append(`<div class="list-group-item padding_5 cursor_pointer" data-confirm_seq="${n.confirm_item.confirm_seq}"\ndata-card_seq="${f.card_seq[i]}">\n<span class="pull-left">\n${select_state_icon(f.status[i])}\n</span>\n<span id="go_card" class="pull-right cursor_pointer btn btn-success btn-sm" data-card_seq="${f.card_seq[i]}">\n<i class="fas fa-external-link-square-alt"></i>\n</span>\n${select_title_sytle(f.is_hidden[i],f.is_deleted[i],f.title[i],f.card_seq[i])}\n<div id="status_icons">\n<div>\n<span>\n${select_state_sytle(f.is_hidden[i],f.is_deleted[i])}\n</span>\n<span id="priority">\n${select_priority_icon(f.priority[i],"fa-lg")}\n</span>\n<span id="per_done">${f.per_done[i]}%</span>\n</div>\n</div>\n</div>`)}let v=n.confirm_item.link_info.list_confirm,u=v.confirm_seq.length;if(0<u){l.append('<div id=""  class="row row_margin_unset mt_10">\n<div class="col-xs-2">\n<label class="pull-right" data-i18n="user:confirm.reference confirm"></label>\n</div>\n<div class="col-xs-10"><hr></div>\n<div id="confirm_confirm_list" class="col-xs-10 col-xs-offset-2"></div>\n</div>');for(let n=0;n<u;++n){let i=account_list.get_account(v.send_account_seq[n]);l.find("#confirm_confirm_list").append(`<div class="list-group-item padding_5 cursor_pointer" data-confirm_seq="${v.confirm_seq[n]}"\ndata-confirm_seq="${v.confirm_seq[n]}">\n<div class="pull-left mr_10">\n${v_user_photo_drop(i,!0)}\n</div>\n<div>\n<div class="over_wrapper pt_2">\n${v_confirm_tile(v.title[n],v.state[n])}\n</div>\n<div class="between_flex">\n<div>\n${v_confirm_progress_icon(v.is_all_decision[n])}\n</div>\n</div>\n</div>\n</div>`)}}let g=n.list_confirm_member.account_seq.length;if(0<g)for(let i=0;i<g;++i)_.append(`<div class="padding_5">\n<small class="pull-right">${lll_time(n.list_confirm_member.time_pass[i])}</small>\n<span>${v_user_photo_drop(account_list.get_account(n.list_confirm_member.account_seq[i]),!0)}</span>\n${v_confirm_read_icon(n.list_confirm_member.is_read[i])}\n${v_confirm_pass_icon(n.list_confirm_member.type_pass[i])}\n<div class="pre_wrap ml_35">${n.list_confirm_member.note[i]}</div>\n</div>`);$(">",i).remove(),1==e&&i.append(`<div class="cs_sticky padding_5 between_flex">\n<div>\n${1==s?`<div id="confirm_decision_btn" class="btn btn-normal btn-sm"\ndata-i18n="user:confirm.decision" data-confirm_seq="${n.confirm_item.confirm_seq}"></div>`:""}\n</div>\n<div class="confirm_user_item_btns">\n${1==r?`<div id="confirm_cancel_btn" class="btn btn-warning btn-sm"\ndata-i18n="user:confirm.cancel" data-confirm_seq="${n.confirm_item.confirm_seq}"></div>`:""}\n${1==t?`<div id="confirm_recover_btn" class="btn btn-warning btn-sm"\ndata-i18n="user:confirm.recover" data-confirm_seq="${n.confirm_item.confirm_seq}"></div>`:""}\n${1==a?`<div id="confirm_remove_btn" class="btn btn-danger btn-sm"\ndata-confirm_seq="${n.confirm_item.confirm_seq}"><i class="fas fa-trash"></i></div>`:""}\n</div>\n</div>`),i.append(`<div class="row margin_unset">\n<div class="col-xs-12 confirm_info_head">\n<h4 class="text-gray margin_unset mt_10" data-i18n="user:confirm.info"></h4>\n</div>\n</div>\n<div id="confirm_item_cont" class="row row_margin_unset mt_10">\n<div class="col-xs-2"><label class="pull-right info_tm_7" data-i18n="user:confirm.creator"></label></div>\n<div class="col-xs-10">\n${v_user_photo_drop(account_list.get_account(n.confirm_item.create_account_seq),!0)}\n</div>\n</div>\n<div id="confirm_item">\n<div id="confirm_item_title"  class="row row_margin_unset mt_10">\n<div class="col-xs-2">\n<label class="pull-right" data-i18n="user:confirm.title"></label>\n</div>\n<div class="col-xs-10">\n<span>${n.confirm_item.title}</span>\n</div>\n</div>\n<div id="confirm_item_note"  class="row row_margin_unset mt_10">\n<div class="col-xs-2">\n<label class="pull-right" data-i18n="user:confirm.comment"></label>\n</div>\n<div class="col-xs-10 confirm_comment_view">\n<p>${n.confirm_item.note}</p>\n</div>\n</div>\n</div>\n<hr>\n<div class="row margin_unset">\n<div class="col-xs-12">\n<h4 class="text-gray inline" data-i18n="user:confirm.progress"></h4>\n<h5 class="text-gray inline" data-i18n="user:confirm.read"></h5>\n<h5 class="text-gray inline">${n.list_confirm_member.is_read.filter((n=>1===n)).length} / ${n.list_confirm_member.is_read.length}</h5>\n</div>\n</div>\n<div id="confirm_item_member">\n<div class="col-xs-11 col-xs-offset-1">\n<b class="text-dark-gray">\n<span data-i18n="user:confirm.wait"></span>\n${n.list_confirm_member.type_pass.filter((n=>1==n)).length}\n</b>\n<b class="text-normal">\n<span data-i18n="user:confirm.approval"></span>\n${n.list_confirm_member.type_pass.filter((n=>2==n)).length}\n</b>\n<b class="text-danger">\n<span data-i18n="user:confirm.reject"></span>\n${n.list_confirm_member.type_pass.filter((n=>3==n)).length}\n</b>\n<hr>\n</div>\n<div id="confirm_member" class="col-xs-11 col-xs-offset-1">\n</div>\n</div>`),$("#confirm_item",i).append(o),$("#confirm_item",i).append(c),$("#confirm_item",i).append(l),$("#confirm_member",i).append(_),$(".account_drop a",i).webuiPopover("destroy").webuiPopover(init.popover_option)}function v_confirm_user_item_default(){$("#confirm_split_right >").remove(),$("#confirm_split_right").append('<div class="center_noti text-gray" data-i18n="user:confirm.select confirm"></div>')}function v_confirm_reference_list(n){$("#confirm_reference #confirm_reference_list >").remove();let i=n.length;for(let e=0;e<i;++e)$("#confirm_reference #confirm_reference_list").append(`<div class="list-group-item padding_5" data-reference_seq="${n[e][3]}">\n${n[e][0]}\n<span class="pull-right cursor_pointer remove_btn">\n<i class="fas fa-times fa-2x text-danger"></i>\n</span>\n${n[e][1]}\n</div>`);$("#confirm_reference #confirm_reference_list .confirm_user_list_flex").addClass("pull-left")}function v_todo_list(n,i){$(">",n).remove();let e=i.card_todo_seq.length;for(let s=0;s<e;++s)$(n).append(`<div id="todo_list_item" class="todo_items data_item col-xs-12" data-todo_seq="${i.card_todo_seq[s]}">\n<span class="todo-sort-handle sort-handle move_pointer">\n<div class="center_flex">\n<i class="fas fa-chevron-up"></i>\n</div>\n<div class="center_flex">\n<i class="todo_sort_num over_wrapper">${s+1}</i>\n</div>\n<div class="center_flex">\n<i class="fas fa-chevron-down"></i>\n</div>\n</span>\n<div class="todo_item" data-target_seq="${i.card_todo_seq[s]}">\n<span class="pull-left">\n${select_state_icon(i.status[s])}\n</span>\n${select_title_sytle(i.is_hidden[s],i.is_deleted[s],i.title[s],i.card_todo_seq[s])}\n<div id="status_icons">\n<div class="pull-left">\n<span>\n${select_state_sytle(i.is_hidden[s],i.is_deleted[s])}\n</span>\n<span id="priority">\n${select_priority_icon(i.priority[s],"fa-lg")}\n</span>\n<span id="per_done">${i.per_done[s]}%</span>\n${select_new_icon(i.is_read[s])}\n</div>\n<small class="pull-right">${lll_time(i.rtime[s])}</small>\n</div>\n</div>\n</div>`);Sortable.create($(n)[0],{handle:".todo-sort-handle",animation:100,scrollSensitivity:60,scrollSpeed:20,swapThreshold:1,draggable:".todo_items",onUpdate:function(i){$(".todo_sort_num",n).each((function(n){$(this).text(n+1)}));let e=null;$(i.item).prev().data("todo_seq")&&(e=$(i.item).prev().data("todo_seq")),console.log($(i.item)),$.ajax({url:"/card_set_todo_ordering",method:"POST",data:{space_seq:space_seq,card_todo_seq:$(i.item).data("todo_seq"),front_card_todo_seq:null==e?tree_option.front_seq_enum.front:e,target_account_seq:account_list.enum_account_self.self},success:function(n){0==n.ec||cs_msg.noti_err(n.ec)},dataType:"json"})}}),null!=todo.todo_seq&&$(`#todo_list .todo_items[data-todo_seq="${todo.todo_seq}"]`).addClass("active")}