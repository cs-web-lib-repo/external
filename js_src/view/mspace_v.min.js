function v_dashboard(a,e){$("#space_setting_contents >").remove(),$("#space_setting_contents").append(`<hr>\n<div id="space_summary" class="row">\n<div class="col-md-6 col-lg-3">\n<div class="panel panel-default">\n<div class="panel-heading" data-i18n="mspace:dashboard.space summary"></div>\n<div class="panel-body">\n<h3 class="over_wrapper">${a.name}</h3>\n<span >${lll_time(a.ctime)}</span>\n<span class="label label-success pull-right"><span data-i18n="mspace:dashboard.user count"></span>${a.account__all_count}</span>\n</div>\n</div>\n</div>\n<div class="col-md-6 col-lg-5">\n<div class="panel panel-default">\n<div class="panel-heading" data-i18n="mspace:dashboard.card summary"></div>\n<div class="panel-body">\n<div class="col-xs-6">\n<label class="col-xs-6" data-i18n="mspace:dashboard.card"></label>\n<div class="col-xs-6">\n<span class="label label-primary">${a.card__all_count}</span>\n</div>\n</div>\n<div class="col-xs-6">\n<label class="col-xs-6" data-i18n="mspace:dashboard.file"></label>\n<div class="col-xs-6">\n<span class="label label-primary">${a.card__file_count}</span>\n</div>\n</div>\n<div class="col-xs-6">\n<label class="col-xs-6" data-i18n="mspace:dashboard.link"></label>\n<div class="col-xs-6">\n<span class="label label-primary">${a.card__link_count}</span>\n</div>\n</div>\n<div class="col-xs-6">\n<label class="col-xs-6" data-i18n="mspace:dashboard.cost"></label>\n<div class="col-xs-6">\n<span class="label label-primary">${parseInt(a.card_cost_sum/60)}h ${a.card_cost_sum%60}m</span>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class="col-md-6 col-lg-2">\n<div class="panel panel-default">\n<div class="panel-heading" data-i18n="mspace:dashboard.todo summary"></div>\n<div class="panel-body">\n<div class="col-xs-12">\n<label class="col-xs-7" data-i18n="mspace:dashboard.progress"></label>\n<div class="col-xs-5">\n<span class="label label-primary">${a.todo_count}</span>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class="col-md-6 col-lg-2">\n<div class="panel panel-default">\n<div class="panel-heading" data-i18n="mspace:dashboard.note summary"></div>\n<div class="panel-body">\n<div class="col-xs-12">\n<label class="col-xs-7" data-i18n="mspace:dashboard.note"></label>\n<div class="col-xs-5">\n<span class="label label-primary">${a.note_count}</span>\n</div>\n</div>\n<div class="col-xs-12">\n<label class="col-xs-7" data-i18n="mspace:dashboard.file"></label>\n<div class="col-xs-5">\n<span class="label label-primary">${a.note_file_count}</span>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class="row">\n<div class="col-md-12 col-lg-6" id="card_summary">\n<div class="panel panel-default">\n<div class="panel-heading" data-i18n="mspace:dashboard.card"></div>\n<div class="panel-body">\n<canvas id="card_chart"></canvas>\n<div class="hidden">\n<div id="card_amount" data-i18n="mspace:dashboard.card amount"></div>\n<div id="card_ready" data-i18n="mspace:dashboard.card ready"></div>\n<div id="card_progress" data-i18n="mspace:dashboard.card progress"></div>\n<div id="card_stop" data-i18n="mspace:dashboard.card stop"></div>\n<div id="card_cancel" data-i18n="mspace:dashboard.card cancel"></div>\n<div id="card_complete" data-i18n="mspace:dashboard.card complete"></div>\n<div id="card_deleted" data-i18n="mspace:dashboard.card deleted"></div>\n</div>\n</div>\n</div>\n</div>\n<div class="col-md-12 col-lg-6">\n<div class="panel panel-default">\n<div class="panel-heading" data-i18n="mspace:dashboard.storage"></div>\n<div class="panel-body">\n<canvas id="storage_chart"></canvas>\n<div class="hidden">\n<div id="size_storage" data-i18n="mspace:dashboard.storage"></div>\n<div id="size_capacity" data-i18n="mspace:dashboard.capacity"></div>\n<div id="size_usage" data-i18n="mspace:dashboard.usage"></div>\n</div>\n</div>\n</div>\n</div>\n<div class="col-md-12 col-lg-6">\n<div class="panel panel-default">\n<div class="panel-heading" data-i18n="mspace:dashboard.file"></div>\n<div class="panel-body">\n<canvas id="file_chart"></canvas>\n<div class="hidden">\n<div id="size_file" data-i18n="mspace:dashboard.file"></div>\n<div id="size_card_file" data-i18n="mspace:dashboard.card file"></div>\n<div id="size_note_file" data-i18n="mspace:dashboard.note file"></div>\n</div>\n</div>\n</div>\n</div>\n</div>`),$("#space_setting_contents").localize(),v_dashboard_card(a),v_dashboard_storage(a),v_dashboard_file(a)}function v_intro(a){$("#space_setting_contents >").remove(),$("#space_setting_contents").append(`<div class="col-xs-12">\n<div id="space_intro">\n<div class="col-xs-12 col-sm-6">\n<label><span data-i18n="mspace:dashboard.space name"></span></label>\n<input id="intro_space_name" class="form-control input-sm" value="${a.name}" maxlength="100">\n</div>\n<div class="col-xs-12 col-sm-6">\n<label><span data-i18n="mspace:dashboard.space intro"></span></label>\n<input id="intro_space_note" class="form-control input-sm" value="${a.intro}" maxlength="100">\n</div>\n<div id="space_intro_btn" class="btn btn-primary pull-right" data-i18n="mspace:dashboard.apply"></div>\n</div>\n</div>`)}function v_dashboard_storage(a){let e=a.storage_all_size-a.storage_use_size;new Chart($("#storage_chart"),{type:"doughnut",data:{datasets:[{data:[0,a.storage_use_size,e],backgroundColor:["lightblue","red","#46BFBD"]}],labels:[`${$("#size_storage").text()} : ${humanize_file_size(a.storage_all_size)}`,`${$("#size_usage").text()} : ${humanize_file_size(a.storage_use_size)}`,`${$("#size_capacity").text()} : ${humanize_file_size(e)}`]},options:{legend:{position:"right",onClick:function(){}}}})}function v_dashboard_file(a){new Chart($("#file_chart"),{type:"doughnut",data:{datasets:[{data:[0,a.card_file_size,a.note_file_size],backgroundColor:["lightblue","lightgray","#46BFBD"]}],labels:[`${$("#size_file").text()} : ${humanize_file_size(a.storage_use_size)}${" ("+a.file_count+")"}`,`${$("#size_card_file").text()} : ${humanize_file_size(a.card_file_size)}${" ("+a.card_file_count+")"}`,`${$("#size_note_file").text()} : ${humanize_file_size(a.note_file_size)}${" ("+a.note_file_count+")"}`,`${$("#size_note_file").text()} : ${humanize_file_size(a.file_remove_wait_size)}${" ("+a.file_remove_wait_size+")"}`]},options:{legend:{position:"right"}}})}function v_dashboard_card(a){let e=parseInt(a.card_state_ready_delete_count)+parseInt(a.card_state_cancel_delete_count)+parseInt(a.card_state_progress_delete_count)+parseInt(a.card_state_stop_delete_count)+parseInt(a.card_state_complete_delete_count),s=new Chart($("#card_chart"),{type:"doughnut",data:{datasets:[{data:[0,a.card_state_ready_normal_count,a.card_state_progress_normal_count,a.card_state_stop_normal_count,a.card_state_cancel_normal_count,a.card_state_complete_normal_count,e],backgroundColor:["lightblue","lightgray","#02baf2","#f3bc65","#cc0000","#00b84c","#364347"]}],labels:[`${$("#card_summary #card_amount").text()} : ${a.card_count}`,`${$("#card_summary #card_ready").text()} : ${a.card_state_ready_normal_count}`,`${$("#card_summary #card_progress").text()} : ${a.card_state_progress_normal_count}`,`${$("#card_summary #card_stop").text()} : ${a.card_state_stop_normal_count}`,`${$("#card_summary #card_cancel").text()} : ${a.card_state_cancel_normal_count}`,`${$("#card_summary #card_complete").text()} : ${a.card_state_complete_normal_count}`,`${$("#card_summary #card_deleted").text()} : ${e}`]},hiddenSlices:[6],options:{legend:{position:"right",onClick:function(a,e){0!=e.index&&(s.getDatasetMeta(0).data[e.index].hidden=!s.getDatasetMeta(0).data[e.index].hidden,s.update())}}}})}function v_invite_list(){$("#space_setting_contents >").remove(),$("#space_setting_contents").append('<div id="invite_list" class="mspace_list">\n<table id="invite_list_table" class="display">\n</table>\n</div>'),mspace_data.list_invite_table=$("#invite_list_table").DataTable({deferRender:!0,dom:"tp",order:[[1,"desc"]],language:{emptyTable:"<span data-i18n='mspace:no data'></span>",paginate:{next:">",previous:"<"}},pageLength:100,autoWidth:!1,columnDefs:[{title:"<span data-i18n='mspace:invite.creator'></span>",targets:0,width:"10%"},{title:"<span data-i18n='mspace:invite.create time'></span>",targets:1,width:"10%",searchable:!1,orderData:2},{title:"ctime_sort",targets:2,searchable:!1,visible:!1},{title:"<span data-i18n='mspace:invite.expire time'></span>",targets:3,width:"10%",searchable:!1,orderData:4},{title:"etime_sort",targets:4,searchable:!1,visible:!1},{title:"<span data-i18n='mspace:invite.invite link'></span>",targets:5,width:"30%",searchable:!1},{title:"",targets:6,width:"5%",searchable:!1,orderable:!1},{title:'<div id="create_invite_btn" class="btn btn-primary"><i class="fas fa-plus"></i></div>',targets:7,width:"5%",searchable:!1,orderable:!1}]}),mspace_invite_list(),$("#space_setting_contents").append('<div id="space_invite_guide" class="form-horizontal">\n<hr>\n<h3 class="text-gray" data-i18n="mspace:invite.join guide"></h3>\n<div class="form-group">\n<label class="col-sm-2 control-label" data-i18n="mspace:invite.name guide"></label>\n<div class="col-sm-10">\n<textarea id="guide_name_input" type="text" class="comment_input"\ndata-i18n="[placeholder]mspace:invite.ex name guide" maxlength="5000"></textarea>\n</div>\n</div>\n<div class="form-group">\n<label class="col-sm-2 control-label" data-i18n="mspace:invite.intro guide"></label>\n<div class="col-sm-10">\n<textarea id="guide_intro_input" type="text" class="comment_input"\ndata-i18n="[placeholder]mspace:invite.ex intro guide" maxlength="5000"></textarea>\n</div>\n</div>\n<div id="set_guide_btn" class="btn btn-primary pull-right" data-i18n="mspace:invite.apply">적용</div>\n</div>')}function v_account_list_join_wait(){$("#space_setting_contents >").remove(),$("#space_setting_contents").append('<div id="join_wait_list" class="mspace_list">\n<table id="join_wait_table" class="display">\n</table>\n</div>'),mspace_data.join_wait_table=$("#join_wait_table").DataTable({deferRender:!0,dom:"tp",order:[[1,"desc"]],language:{emptyTable:"<span data-i18n='mspace:no data'></span>",paginate:{next:">",previous:"<"}},pageLength:100,lengthMenu:[[10,25,50,100],[10,25,50,100]],autoWidth:!1,columnDefs:[{title:"<span data-i18n='mspace:join.user'></span>",targets:0,width:"10%"},{title:"<span data-i18n='mspace:join.time'></span>",targets:1,width:"10%",searchable:!1,orderData:2},{title:"ctime_sort",targets:2,searchable:!1,visible:!1},{title:"<span data-i18n='mspace:join.intro'></span>",targets:3,width:"20%",searchable:!1,orderable:!1},{title:"",targets:4,width:"5%",searchable:!1,orderable:!1},{title:"",targets:5,width:"5%",searchable:!1,orderable:!1}]}),mspace_wait_list()}function v_account_list_join_history(){$("#space_setting_contents >").remove(),$("#space_setting_contents").append('<div id="join_history_list" class="mspace_list">\n<table id="join_history_table" class="display">\n</table>\n</div>'),mspace_data.join_history_table=$("#join_history_table").DataTable({deferRender:!0,dom:"t",order:[[3,"desc"]],language:{emptyTable:"<span data-i18n='mspace:no data'></span>",paginate:{next:">",previous:"<"}},pageLength:100,lengthMenu:[[10,25,50,100],[10,25,50,100]],autoWidth:!1,columnDefs:[{title:"<span data-i18n='mspace:log.state'></span>",targets:0,width:"5%"},{title:"<span data-i18n='mspace:log.user'></span>",targets:1,width:"10%"},{title:"<span data-i18n='mspace:log.intro'></span>",targets:2,width:"20%",orderable:!1,searchable:!1},{title:"<span data-i18n='mspace:log.time'></span>",targets:3,width:"10%",searchable:!1,orderData:4},{title:"ctime_sort",targets:4,searchable:!1,visible:!1}]}),mspace_history_list()}function v_account_list(){$("#space_setting_contents >").remove(),$("#space_setting_contents").append('<div id="account_list" class="mspace_list">\n<table id="account_list_table" class="display">\n</table>\n</div>'),mspace_data.account_list_table=$("#account_list_table").DataTable({deferRender:!0,dom:"tp",language:{emptyTable:"<span data-i18n='mspace:no data'></span>",paginate:{next:">",previous:"<"}},pageLength:100,lengthMenu:[[10,25,50,100],[10,25,50,100]],autoWidth:!1,columnDefs:[{title:"<span data-i18n='mspace:user setting.admin'></span>",targets:0,width:"5%",searchable:!1,orderData:1},{title:"is_admin_sort",targets:1,searchable:!1,visible:!1},{title:"<span data-i18n='mspace:user setting.user'></span>",targets:2,width:"10%"},{title:"<span data-i18n='mspace:user setting.state'></span>",targets:3,width:"2%",searchable:!1}]}),mspace_account_list()}function v_group_tree(){$("#space_setting_contents >").remove(),$("#space_setting_contents").append('<div id="morg_tree"></div>');$("#morg_tree").fancytree({extensions:["glyph","wide"],icon:!1,toggleEffect:!1,clickFolderMode:1,selectMode:1,autoCollapse:!1,autoScroll:!0,debugLevel:2,tooltip:!0,strings:{loading:""},glyph:{preset:"bootstrap3",map:{expanderClosed:"fas fa-angle-right fa-lg",expanderLazy:"fas fa-angle-right fa-lg",expanderOpen:"fas fa-caret-down fa-lg"}},wide:{iconWidth:"0.5em",iconSpacing:"0.5em",labelSpacing:"1.1em",levelOfs:"1.5em"},source:function(){return[{title:"접근 가능한 카드들이 없습니다.",key:0}]},loadChildren:function(a,e){let s=$("#morg_tree").fancytree("getTree");if(null!=s.getFirstChild()&&s.getFirstChild().setExpanded(!0,{noAnimation:!0,noEvents:!0}),org_data.morg_expand_list.forEach((function(a){let e=s.getNodeByKey(a);null!=e&&e.setExpanded(!0,{noAnimation:!0,noEvents:!0})})),null!=org_data.morg_active_key){let a=s.getNodeByKey(org_data.morg_active_pkey.key),e=s.getNodeByKey(org_data.morg_active_key.key,a);null!=e&&e.setActive()}$("#"+s.rootNode.ul.id).scrollTop(org_data.morg_scroll_top),$("#org_create_modal").length&&$("#org_create_modal #create_org_input").focus()},collapse:function(a,e){e.node.visit((function(a){a.setExpanded(!1)}),!0)},expand:function(a,e){},postProcess:function(a,e){null!=e&&0!=Array.isArray(e.response)&&e.response[0]},renderNode:function(a,e){if($(e.node.span.lastChild).addClass("fancytree-normal"),!0===e.node.hasChildren()){let a=parseInt($("#morg_tree .ui-fancytree > li > ul").css("padding-left"))*e.node.getLevel();$(".fancytree-expander",e.node.span).css("right",a),$(".fancytree-expander",e.node.span).css("padding-left",a)}else $(e.node.span.firstChild).css("width",0);$(e.node.span.lastChild.children).remove(),$(".fa-star",e.node.span).remove(),$(e.node.li).removeClass(),0==e.node.folder&&$(e.node.span.lastChild).prepend(`<img class="img-circle org_photo org_icon" src="${e.node.data.url}">`),e.node.data.is_admin&&$(e.node.span).prepend('<span class="fas fa-star text-info"></span>')},activate:function(a,e){const s=parseInt($("#morg_tree .ui-fancytree > li > ul").css("padding-left"))*(e.node.getLevel()-1);$(e.node.span).innerWidth($("#morg_tree .ui-fancytree").scrollLeft()+$("#morg_tree .ui-fancytree").prop("clientWidth")-s),$("#morg_tree .ui-fancytree #card_drop").remove(),function(a,e){$("#morg_tree .ui-fancytree #card_drop").remove();let s="btn-sm";if(e.data.is_account){let n=`<li id="org_set_admin_btn" class="dropdown-item" data-org_seq="${e.key}">\n<a><i class="fas fa-star"></i><span data-i18n="mspace:org setting.manager"></span></a>\n</li>`;e.data.is_admin&&(n=`<li id="org_del_admin_btn" class="dropdown-item" data-org_seq="${e.key}">\n<a><i class="far fa-star"></i><span data-i18n="mspace:org setting.manager"></span></a>\n</li>`),a.prepend(`<span id="card_drop" class="pull-right dropdown">\n<span id="card_drop_btn" class="btn btn-default ${s}" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n<i class="fas fa-ellipsis-h"></i>\n</span>\n<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">\n${n}\n<li class="divider"></li>\n<li id="org_account_move_btn" class="dropdown-item" data-org_seq="${e.key}">\n<a><i class="far fa-share-square"></i><span data-i18n="mspace:org setting.move"></span></a>\n</li>\n<li class="divider"></li>\n<li id="org_account_remove_btn" class="dropdown-item" data-org_seq="${e.key}">\n<a><i class="fas fa-trash"></i><span data-i18n="mspace:org setting.remove"></span></a>\n</li>\n</ul>\n</span>`)}else a.prepend(`<span id="card_drop" class="pull-right dropdown">\n<span id="card_drop_btn" class="btn btn-default ${s}" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n<i class="fas fa-ellipsis-h"></i>\n</span>\n<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">\n<li id="org_create_btn" class="dropdown-item" data-org_seq="${e.key}">\n<a><i class="fas fa-plus"></i><span data-i18n="mspace:org setting.create"></span></a>\n</li>\n<li class="divider"></li>\n<li id="org_move_modal_btn" class="dropdown-item" data-org_seq="${e.key}">\n<a><i class="far fa-share-square"></i><span data-i18n="mspace:org setting.move"></span></a>\n</li>\n<li class="divider"></li>\n<li id="org_remove_btn" class="dropdown-item" data-org_seq="${e.key}">\n<a><i class="fas fa-trash"></i><span data-i18n="mspace:org setting.remove"></span></a>\n</li>\n<li class="divider"></li>\n<li id="org_modify_btn" class="dropdown-item" data-org_seq="${e.key}">\n<a><i class="far fa-edit"></i><span data-i18n="mspace:org setting.modify"></span></a>\n</li>\n<li class="divider"></li>\n<li id="org_account_add_btn" class="dropdown-item" data-org_seq="${e.key}">\n<a><i class="fas fa-user-plus"></i><span data-i18n="mspace:org setting.add"></span></a>\n</li>\n</ul>\n</span>`);$("#morg_tree #card_drop").localize()}($(e.node.span),e.node)},click:function(a,e){},keydown:function(a,e){}}),morg_tree_resize()}