class chat_data_{constructor(){this.chat_position_x="35%",this.chat_position_y="20%",this.chat_width="55%",this.chat_height="70%",this.chat_split=null,this.chat_extend_split=null,this.is_web=!0,this.chat_member_list=null,this.room_data=null,this.room_seq=null,this.first_msg_seq=0,this.last_msg_seq=0,this.get_msg_count=30,this.get_before_msg_count=10,this.is_msg_end=!1,this.enum_room_type={one:"1",group:"2"}}set_room_data(t){this.room_data=t}}let chat_data=new chat_data_;$(document).on("click","#chat_member .list div",(function(){$(this).toggleClass("active"),$("i",$(this)).toggleClass("fa-circle"),$("i",this).toggleClass("fa-check-circle")})),$(document).on("click","#modal_member_btn",(function(){$("#multi_select_modal #contents_title_area h3").remove(),$("#multi_select_modal #contents_title_area").append('<h3 class="over_wrapper text-center" data-i18n="chat:member.choose a user"></h3>'),$("#multi_select_modal .modal-footer >").remove(),$("#multi_select_modal .modal-footer").append('<div id="create_room_btn" class="pull-right btn btn-primary" data-i18n="chat:member.create"></div>'),v_account_select_tree($("#multi_select_modal #multi_select_list"),$("#multi_select_modal #multi_select_tree"),[]),$("#multi_select_modal").localize(),$("#multi_select_modal").modal()})),$(document).on("click","#create_room_btn",(function(){set_room_create(tree_data.get_account_selected_seqs($("#multi_select_modal #multi_select_tree").fancytree("getTree")))})),$(document).on("click","#chat_room_list .list > div",(function(){WebuiPopovers.hideAll(),chat_data.is_msg_end=!1,chat_data.first_msg_seq=0,chat_data.last_msg_seq=0,$("#chat_room_list .list > div").removeClass("active"),$(this).addClass("active"),chat_data.room_seq=$(this).data("room_seq"),$("#chat_info .dropdown").removeClass("hidden"),$("#send_msg").removeClass("hidden"),$("#receive_msg").remove();let t=$('<div id="receive_msg" class="v_100_per font_14">\n<div id="dropzone_msg" class="text-center">\n<div>\n<div><i class="fas fa-cloud-upload-alt fa-4x"></i></div>\n<h4 data-i18n="cs:drop upload"></h4>\n</div>\n</div>\n</div>');if($("#chat_contents").off("scroll"),$("#chat_contents").on("scroll",(function(t){0==$(this).scrollTop()&&0==chat_data.is_msg_end&&get_msg_before(chat_data.room_seq,chat_data.first_msg_seq,chat_data.get_before_msg_count,$("#chat_contents").prop("scrollHeight"))})),$("#chat_contents #chat_info").after(t),v_room_msg_read_all(chat_data.room_seq),get_msg_before(chat_data.room_seq,chat_data.last_msg_seq,chat_data.get_msg_count,0),$("#chat_info >").remove(),$("#chat_info").removeClass("center_flex").addClass("between_flex"),$("#chat_info").append(`<div>\n<span id="chat_back_btn"\nclass="btn btn-default btn-sm pull-left hidden">\n<i class="fa fa-bars fa-lg"></i>\n</span>\n</div>\n<h3 id="chat_title" class="text-center over_wrapper">\n${$(".room_title",this).text().trim()}\n</h3>\n<div>\n<span id="chat_extend_btn" class="btn btn-md"><i class="fas fa-columns"></i></span>\n<span id="chat_pop_btn" class="btn btn-md">\n<span data-content="\n<ul class='dropdown-menu'>\n<li id='room_join_btn' class='dropdown-item'>\n<a>\n<i class='fas fa-plus'></i>\n<span data-i18n='chat:join'></span>\n</a>\n</li>\n<li class='divider'></li>\n<li id='room_leave_btn' class='dropdown-item'>\n<a>\n<i class='fas fa-sign-out-alt'></i>\n<span data-i18n='chat:leave'></span>\n</a>\n</li>\n</ul>">\n<i class="fa fa-ellipsis-h fa-lg"></i></span>\n</span>\n</div>`),$("#chat_pop_btn span","#chat_info").webuiPopover("destroy").webuiPopover(init.popover_option),$("#chat_info").localize(),0==chat_data.is_web){$("#chat_panel #chat_back_btn").removeClass("hidden"),$("#chat_panel #chat_extend_back_btn").removeClass("hidden");const t=chat_data.chat_split.getSizes();2==t.length&&chat_data.chat_split.collapse(0),3==t.length&&(chat_data.chat_split.setSizes([0,100,0]),chat_data.chat_extend_split.setSizes([100,0]))}else{3==chat_data.chat_split.getSizes().length&&chat_data.chat_extend_split.setSizes([100,0])}chat_file_dropzone($("#chat_panel #chat #receive_msg"))})),$(document).on("click","#chat_panel #chat_back_btn",(function(){const t=chat_data.chat_split.getSizes();2==t.length&&chat_data.chat_split.setSizes([100,0]),3==t.length&&chat_data.chat_split.setSizes([100,0,0])})),$(document).on("click","#chat_panel #chat_extend_btn",(function(){0==chat_data.is_web||$("#chat_panel #chat_extend").hasClass("hidden")?set_chat_split(!0):set_chat_split(!1)})),$(document).on("click","#chat_panel #chat_extend_back_btn",(function(){chat_data.chat_split.setSizes([0,100,0])})),$(document).on("click","#test111",(function(){chat_data.chat_extend_split.collapse(0)})),$(document).on("click","#test222",(function(){chat_data.chat_extend_split.collapse(1)})),$(document).on("click","#send_msg_btn",(function(){let t=$.trim($("#send_msg #send_msg_input").val());t&&(set_msg(t),$("#send_msg_input").val(""),$("#send_msg_input").height(1).height($("#send_msg_input").prop("scrollHeight")+12),$("#send_msg_input").focus())})),$(document).on("click","#room_join_btn",(function(){$("#multi_select_modal #contents_title_area h3").remove(),$("#multi_select_modal #contents_title_area").append('<h3 class="over_wrapper text-center" data-i18n="chat:member.choose a user"></h3>'),$("#multi_select_modal .modal-footer >").remove(),$("#multi_select_modal .modal-footer").append('<div id="join_btn" class="pull-right btn btn-primary" data-i18n="chat:member.create"></div>'),v_account_select_tree($("#multi_select_modal #multi_select_list"),$("#multi_select_modal #multi_select_tree"),[]),$("#multi_select_modal").localize(),$("#multi_select_modal").modal()})),$(document).on("click","#multi_select_modal #join_btn",(function(){set_room_join(tree_data.get_account_selected_seqs($("#multi_select_modal #multi_select_tree").fancytree("getTree")))})),$(document).on("click","#room_leave_btn",(function(){set_room_leave(),WebuiPopovers.hideAll()})),$(document).on("keydown","#send_msg_input",(function(t){13!=t.keyCode||t.shiftKey?(13==t.keyCode&&t.shiftKey||8==t.keyCode)&&$(this).height(1).height($(this).prop("scrollHeight")+12):$("#send_msg_btn").trigger("click")})),$(document).on("keyup","#send_msg_input",(function(t){13!=t.keyCode||t.shiftKey?(13==t.keyCode&&t.shiftKey||8==t.keyCode)&&$(this).height(1).height($(this).prop("scrollHeight")+12):$("#send_msg_input").val("")})),$(document).on("click",".msg #read_count.has_count",(function(){get_msg_member($(this),$(this).parents(".msg").data("msg_seq"))})),$(document).on("click","#chat_btn",(function(){$(this).toggleClass("btn-chat"),$("#chat_panel").hasClass("hidden")?($("#chat_panel").removeClass("hidden"),init.chat_panel.front(),set_panel_position(init.chat_panel),init.is_web?"maximized"==init.chat_panel.status&&init.chat_panel.normalize().setControlStatus("normalize","enable").resizeit("enable"):"normalized"==init.chat_panel.status&&init.chat_panel.maximize().setControlStatus("normalize","disable").resizeit("disable"),set_chat_split(),set_chat_coll()):$("#chat_panel").addClass("hidden")}));