var file_list_table=$("#tabs-file-list #file_list_table").DataTable({deferRender:!0,dom:"rtp",language:{emptyTable:"<span data-i18n='card:no data'></span>",paginate:{next:">",previous:"<"}},lengthMenu:[[10,25,50,100],[10,25,50,100]],autoWidth:!1,columnDefs:[{title:"#",targets:0,width:"10%",searchable:!1,orderable:!1},{title:"<span data-i18n='card:file.name'></span>",targets:1,width:"35%"},{title:"<span data-i18n='card:file.byte'></span>",targets:2,width:"5%",searchable:!1,orderData:3},{title:"oder_byte",targets:3,visible:!1,searchable:!1},{title:"<span data-i18n='card:file.time'></span>",targets:4,width:"20%",searchable:!1,orderData:5},{title:"oder_time",targets:5,searchable:!1,visible:!1},{title:"<i class='fas fa-trash fa-lg'></i>",targets:6,width:"5%",searchable:!1,orderable:!1},{title:"",targets:7,searchable:!1,visible:!1},{title:"",targets:8,searchable:!1,visible:!1},{title:"",targets:9,searchable:!1,visible:!1},{title:"",targets:10,searchable:!1,visible:!1},{title:"",targets:11,searchable:!1,visible:!1}]});function file_list_preview(e,i,l,t,a,_){return 1==e?`<div id="lcl_table_open_btn" class="lcl_item"\ndata-index="${_}"\ndata-file_seq="${i}"\ndata-file_name="${t}"\ndata-file_mimetype="${l}"\ndata-file_size="${a}"\ndata-file_is_preview="${e}">\n<img src="/file_preview/${space_seq}/${i}/3">\n</div>`:'<td><i class="far fa-file fa-2x"></i></td>'}function file_list_name(e,i,l){return`<div class="over_wrapper">\n<span id="file_down_btn" data-file_seq="${i}" data-card_seq="${l}">\n${e}</span>\n</div>`}function file_list_down(e){return`<div id="file_down_btn" data-file_seq="${e}"\nclass="btn btn-light fas fa-download"></div>`}function file_list_size(e){return`<td data-order="${e}">${humanize_file_size(e)}</td>`}function file_list_del(e,i){return 1==e?`<td>\n<div id="del_file_btn" data-section_seq="${i}"\nclass="btn btn-danger fas fa-trash"></div>\n</td>`:"<td></td>"}function v_file_list(){file_list_table.clear(),$("#file_list").scrollTop(0);const e=card_detail.card_file_list.list_file_info.file_seq.length;let i=new Array,l=0;for(let t=0;t<e;++t)i.push([file_list_preview(card_detail.card_file_list.list_file_info.is_preview[t],card_detail.card_file_list.list_file_info.file_seq[t],card_detail.card_file_list.list_file_info.mimetype[t],card_detail.card_file_list.list_file_info.name[t],card_detail.card_file_list.list_file_info.size[t],l),file_list_name(card_detail.card_file_list.list_file_info.name[t],card_detail.card_file_list.list_file_info.file_seq[t],card_detail.card_file_list.list_file_info.use_seq[t]),file_list_size(card_detail.card_file_list.list_file_info.size[t]),card_detail.card_file_list.list_file_info.size[t],moment_time(card_detail.card_file_list.list_file_info.ctime[t]),card_detail.card_file_list.list_file_info.ctime[t],file_list_del(card_detail.card_file_list.list_file_info.is_deletable[t],card_detail.card_file_list.list_file_info.file_seq[t]),card_detail.card_file_list.list_file_info.file_seq[t],card_detail.card_file_list.list_file_info.name[t],card_detail.card_file_list.list_file_info.mimetype[t],card_detail.card_file_list.list_file_info.size[t],card_detail.card_file_list.list_file_info.is_preview[t]]),1==card_detail.card_file_list.list_file_info.is_preview[t]&&l++;file_list_table.rows.add(i),file_list_table.draw()}$(document).on("click","#card_detail #file_list_search #search_btn",(function(){file_list_table.search($("#file_list_search input").val()).draw(),$("#card_detail #file_list").scrollTop(0),$("#card_detail #file_list").localize()})),$(document).on("keydown","#card_detail #file_list_search input",(function(e){13==e.keyCode&&$("#card_detail #file_list_search #search_btn").trigger("click")})),$("#card_detail select.file_list_len").on("sumo:closed",(function(){file_list_table.page.len($(this).val()).draw(),$("#file_list").scrollTop(0),$("#file_list").localize()})),$(document).on("click","#card_detail #file_list #del_file_btn",(function(e){e.preventDefault(),e.stopPropagation();let i=this;cs_msg.swal_select((function(){$.ajax({url:"/del_file",method:"POST",data:{space_seq:space_seq,v_file_seq:[$(i).data("section_seq")]},success:function(e){0==e.ec?file_list_table.row($(i).parents("tr")).remove().draw():cs_msg.noti_err(e.ec)},dataType:"json"})}))})),$(document).on("click","#card_detail #file_list tr td:not(:first-child)",(function(e){e.preventDefault(),e.stopPropagation();let i=$(this).closest("tr");card_view_handle($("#file_down_btn",i).data("card_seq").toString(),init.info_time_type_enum.card)}));