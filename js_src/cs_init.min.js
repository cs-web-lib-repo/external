function i18n_update(){try{$("body").localize(),init.is_web||$(".sub_tab").text("")}catch(e){}}function sumo_reload(e){e.each((function(e,t){t.sumo.reload()}))}function changeLng(e){i18next.changeLanguage(e),sumo_reload($(".select_column")),sumo_reload($(".select_auth")),sumo_reload($(".select_state")),sumo_reload($(".select_pos")),sumo_reload($(".calendar_state")),sumo_reload($(".select_org")),sumo_reload($("#card_state_batch_modal .select_filter")),sumo_reload($("#confirm_reference_modal .select_confirm_folder")),sumo_reload($("#tabs-calendar .cal_select_view")),sumo_reload($("#calendar_share_modal .cal_select")),sumo_reload($("#event_create_modal .cal_select")),sumo_reload($("#event_edit_modal .cal_select")),moment.locale(i18next.languages[0]),$(".moment_i18n").each((function(e,t){let a=$(t).data("format"),n=$(t).data("time");"n"==a?$(t).text(moment.unix(n).fromNow()):$(t).text(moment.unix(n).format(a))})),calendar.cal.setOption("locale",i18next.languages[0]),calendar.card_cal.setOption("locale",i18next.languages[0]),calendar.note_cal.setOption("locale",i18next.languages[0]),calendar.cal_org_all.setOption("locale",i18next.languages[0]),calendar.cal_org_mgt.setOption("locale",i18next.languages[0]),v_cal_nav_title($("#tabs-calendar #cal_nav_title"),calendar.cal)}i18next.use(i18nextBrowserLanguageDetector).use(i18nextHttpBackend).init({fallbackLng:"en",detection:{order:["localStorage","navigator"],lookupLocalStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]},ns:["cs","tree","card","calendar","user","note","message","chat","org","mspace","error","noti","modal"],nsSeparator:":",defaultNS:"card",backend:{loadPath:"/i18n/{{lng}}/{{ns}}.json",crossDomain:!0}},((e,t)=>{jqueryI18next.init(i18next,$,{useOptionsAttr:!0}),moment.locale(i18next.languages[0]),i18n_update(),$(document).ajaxComplete((function(){i18n_update()})),$("#card_list_select .select_column").SumoSelect({forceCustomRendering:!0}),$("#card_list_select .select_auth").SumoSelect({forceCustomRendering:!0}),$("#card_list_select .select_state").SumoSelect({forceCustomRendering:!0}),$("#note_list_select .select_state").SumoSelect({forceCustomRendering:!0}),$("#file_list_select .select_pos").SumoSelect({forceCustomRendering:!0}),$(".select_len").SumoSelect({forceCustomRendering:!0}),$(".calendar_state").SumoSelect({forceCustomRendering:!0}),$(".select_org").SumoSelect({triggerChangeCombined:!1,forceCustomRendering:!0}),$("#card_state_batch_modal .select_filter").SumoSelect({triggerChangeCombined:!1,forceCustomRendering:!0,csvDispCount:5}),$("#confirm_reference_modal .select_confirm_folder").SumoSelect({forceCustomRendering:!0}),$("#tabs-calendar .cal_select_view").SumoSelect({forceCustomRendering:!0}),$("#event_create_modal .cal_select").SumoSelect({forceCustomRendering:!0}),$("#event_edit_modal .cal_select").SumoSelect({forceCustomRendering:!0})})),i18next.on("languageChanged",(()=>{i18n_update()})),$(document).on("click",".webui-popover #set_lan_ul .dropdown-item",(function(){changeLng($(this).data("lan"))}));const space_seq=$("#space_seq").data("space-seq");$("#space_seq").remove();class init_{constructor(){this.is_web=!0,this.is_pop=!1,this.tree_split=null,this.note_split=null,this.calendar_split=null,this.calendar_set_split=null,this.todo_split=null,this.confirm_split=null,this.message_split=null,this.org_split=null,this.org_card_split=null,this.file_per_panel=null,this.chat_panel=null,this.org_panel=null,this.space_setting_slidebar=null,this.is_admin=!1,this.is_query=!0,this.tree_scroll_left=new Object({left:0}),this.note_tree_scroll_left=new Object({left:0}),this.move_tree_scroll_left=new Object({left:0}),this.batch_tree_scroll_left=new Object({left:0}),this.enum_bread_type={card:1,note:2,account:3},this.asBreadcrumbs_opt={overflow:"right",toggleIconClass:"fas fa-caret-down fa-lg",toggleClass:"btn btn-sm btn-default",responsive:!0,ellipsisText:" ",ellipsisClass:"hidden",dropdownClass:"pull-right",dropdownItem:function(e,t,a){if(null==a)return;return`<li class="account_close_btn" data-account_seq="${a}">\n<a>\n<img class="img-circle user_photo" src="${account_list.get_account(a).photo_url}">\n<i class="fas fa-times text-danger"></i></a>\n</li>`}},this.account_asBreadcrumbs_opt={overflow:"right",toggleIconClass:"fas fa-caret-down fa-lg",toggleClass:"btn btn-sm plus_btn",responsive:!0,dropdownItem:function(e,t,a){if(null==a)return;const n=account_list.get_account(a);return`<li class="pt_2 pb_2">\n${v_user_photo_drop(account_list.get_account(a),!0)}\n${n.name}\n</li>`}},this.main_tabs_enum={tree:"0",todo:"1",calendar:"2",confirm:"3",note:"4",message:"5"},this.card_tabs_enum={info:"0",detail:"1",list:"2",file:"3",calendar:"4",log:"5"},this.note_tabs_enum={info:"0",list:"1",file:"2",calendar:"3"},this.info_time_type_enum={card:1,todo:2,confirm:3,link:4},this.ws_tree_enum={refresh:1,create:2,remove:3,remove_permanently:4,item:5},this.ws_message_enum={folder_list:1,folder_item:2,message_list:3,item_add:4,item_modify:5,item_remove:6},this.ws_note_enum={refresh:1,create:2,remove:3,remove_permanently:4,item:5},this.ws_owner_enum={create:1,modify:2,remove:3},this.ws_todo_enum={count_refresh:1,list_refresh:2,item_read:3},this.ws_confirm_enum={count_refresh:1,list_refresh:2,item_read:3},this.ws_chat_enum={msg_new:1,msg_count:2,room_new:3,room_remove:4,room_member_add:5,room_member_leave:6,room_msg_read_all:7},this.ws_calendar_enum={calendar_list:1,event_update:2,event_remove:3},this.noti_type_enum={card:1,chat:2},this.enum_preview_size={min:0,w600:2,w100:3},this.enum_type={card:1,note:2,message:3},this.get_noti_count=20,this.current_main_tab=this.main_tabs_enum.tree,this.current_sub_tab=this.card_tabs_enum.info,this.current_card_tab_panel=$("#tabs-card-info"),this.current_note_sub_tab=this.note_tabs_enum.info,this.current_note_tab_panel=null,this.popover_option={trigger:"click",animation:"fade",delay:{show:300,hide:300},cache:!1,arrow:!1,padding:!1,backdrop:!0,onShow:function(e){e.localize()}},this.popover_click_option={trigger:"click",animation:"fade",delay:{show:300,hide:300},cache:!1,arrow:!1,padding:!1,backdrop:!0,onShow:function(e){e.localize()}},this.popover_manual_option={trigger:"manual",animation:"fade",delay:{show:300,hide:300},cache:!1,arrow:!1,padding:!1,backdrop:!0,onShow:function(e){e.localize()}},this.popover_search_option={trigger:"sticky",animation:"fade",delay:{show:300,hide:300},cache:!1,arrow:!1,padding:!1,backdrop:!0,onShow:function(e){e.localize()}}}}let init=new init_;class account_list_{constructor(){this.account_seq=null,this.account=null,this.list_account_info=null,this.enum_account_self={self:0},this.enum_account_state={normal:1,stop:2,leave:3,remove:4}}set_list_account_info(e){this.list_account_info=new Map;let t=e.list_account_info,a=t.account_seq.length;for(let e=0;e<a;++e){let a=new Object;a.account_seq=t.account_seq[e],a.name=t.name[e],a.state=t.state[e],a.photo_url=t.photo_url[e],this.list_account_info.set(t.account_seq[e],a)}}set_user_account(e){this.account=e}get_user_account(){return null==this.account&&account_get_profile_space(account_list.enum_account_self.self,user_profile,!1),this.account}is_user_account(e){return this.get_user_account().account_seq==e}get_account(e){return e=parseInt(e),null==account_list.list_account_info&&space_get_account_list(!1),this.list_account_info.get(e)}}let account_list=new account_list_;function space_get_account_list(e=!0){$.ajax({url:"/space_get_account_list",method:"POST",async:e,data:{space_seq:space_seq},success:function(e){0==e.ec?account_list.set_list_account_info(e):cs_msg.noti_err(e.ec)},dataType:"json"})}function socket_connect(e){let t=io("https://"+window.location.hostname,{path:"/sio",transports:["websocket","polling"]});set_tree_split(),set_note_split(),set_calendar_split(),set_calendar_set_split(),set_todo_split(),set_confirm_split(),set_message_split(),t.on("connect",(function(){let a=new Object;a.o=1,a.a1=e,a.a2=space_seq,t.emit("sub",a)})),t.on("card_tree",(function(e){const t=e;let a=$("#tree").fancytree("getTree"),n=null;if(!0!==t.hasOwnProperty("s")||!0!==Number.isInteger(t.s))return;switch(n=0===t.s?a.getFirstChild():a.getNodeByKey(t.s.toString()),t.o){case init.ws_tree_enum.refresh:tree_data.active_key=a.getActiveNode(),tree_data.select_key=a.getSelectedNodes()[0],tree_data.expand_list=[],tree_data.scroll_top=$("#"+a.rootNode.ul.id).scrollTop(),tree_refresh_target(a,n,tree_data.expand_list),$("#"+a.rootNode.ul.id).scrollTop(tree_data.scroll_top);break;case init.ws_tree_enum.create:tree_create(a,t);break;case init.ws_tree_enum.remove:tree_remove(n),info_contoll(a,n,n);break;case init.ws_tree_enum.remove_permanently:info_contoll(a,n,n.getParent()),tree_remove_permanently(a,n);break;case init.ws_tree_enum.item:tree_item(n,t);break;default:tree_data.active_key=a.getActiveNode(),tree_data.select_key=a.getSelectedNodes()[0],tree_data.expand_list=[],tree_data.scroll_top=$("#"+a.rootNode.ul.id).scrollTop(),tree_refresh_target(a,n,tree_data.expand_list),$("#"+a.rootNode.ul.id).scrollTop(tree_data.scroll_top)}const i=a.getSelectedNodes()[0];null!=i&&($("#card_detail #breadcrumb >").remove(),set_breadcrumb(i.parent,$("#card_detail #breadcrumb")),tree_breadcrumb_dropdown($("#card_detail #breadcrumb"),i)),select_controll(a)})),t.on("note_tree",(function(e){const t=e;let a=$("#note_tree").fancytree("getTree"),n=null;if(!0!==t.hasOwnProperty("s")||!0!==Number.isInteger(t.s))return;switch(n=0===t.s?a.getFirstChild():a.getNodeByKey(t.s.toString()),t.o){case init.ws_note_enum.refresh:tree_data.note_active_key=a.getActiveNode(),tree_data.note_select_key=a.getSelectedNodes()[0],tree_data.note_expand_list=[],tree_data.note_scroll_top=$("#"+a.rootNode.ul.id).scrollTop(),tree_refresh_target(a,n,tree_data.note_expand_list),$("#"+a.rootNode.ul.id).scrollTop(tree_data.scroll_top);break;case init.ws_note_enum.create:tree_create(a,t);break;case init.ws_note_enum.remove:tree_remove(n),info_contoll(a,n,n);break;case init.ws_note_enum.remove_permanently:info_contoll(a,n,n.getParent()),tree_remove_permanently(a,n);break;case init.ws_note_enum.item:tree_item(n,t);break;default:tree_data.note_active_key=a.getActiveNode(),tree_data.note_select_key=a.getSelectedNodes()[0],tree_data.note_expand_list=[],tree_data.note_scroll_top=$("#"+a.rootNode.ul.id).scrollTop(),tree_refresh_target(a,n,tree_data.note_expand_list),$("#"+a.rootNode.ul.id).scrollTop(tree_data.scroll_top)}const i=a.getSelectedNodes()[0];null!=i&&($("#note_split_right #breadcrumb >").remove(),set_breadcrumb(i.parent,$("#note_split_right #breadcrumb")),tree_breadcrumb_dropdown($("#note_split_right #breadcrumb"),i))})),t.on("message",(function(e){const t=e;switch(t.o){case init.ws_message_enum.folder_list:get_message_folder_list();break;case init.ws_message_enum.folder_item:for(const e of t.f)get_message_folder_item(e);break;case init.ws_message_enum.message_list:{let e=$("#message_folder_list .list-group-item.active").data("message_folder_seq");for(const a of t.f)e==a&&message_get_list(a);break}case init.ws_message_enum.item_add:$("#message_folder_list .list-group-item.active").data("message_folder_seq")==t.f&&message_get_list_item(t.s,v_message_item_add,t.t);break;case init.ws_message_enum.item_modify:$("#message_folder_list .list-group-item.active").data("message_folder_seq")==t.f&&message_get_list_item(t.s,v_message_item_modify,t.t);break;case init.ws_message_enum.item_remove:{let e=t.s.length;for(let a=0;a<e;++a)message.list_table.row(`#message_${t.s[a]}_type_${t.t[a]}`).remove().draw(!1);break}}})),t.on("card_todo",(function(e){const t=e;switch(t.o){case init.ws_todo_enum.count_refresh:card_get_todo_unread_count();break;case init.ws_todo_enum.list_refresh:init.current_main_tab==init.main_tabs_enum.todo&&card_get_todo($("#tabs-todo #todo_split_left #todo_list"));break;case init.ws_todo_enum.item_read:card_get_todo_unread_count(),$(`#tabs-todo .todo_items[data-card_seq="${t.s}"] .item_new`).text("")}})),t.on("confirm",(function(e){switch(e.o){case init.ws_confirm_enum.count_refresh:card_get_confirm_recv_unread_count();break;case init.ws_confirm_enum.list_refresh:if(init.current_main_tab==init.main_tabs_enum.confirm){let e=$("#confirm_split_center #confirm_period_select > div:not(.uncheck)").data("period");get_confirm_list(!1,$("#confirm_folder_list .list-group-item.active").data("confirm_folder_seq"),confirm.confirm_user_table,e)}break;case init.ws_confirm_enum.item_read:card_get_confirm_recv_unread_count()}})),t.on("account",(function(){space_get_account_list()})),t.on("org",(function(){get_org()})),t.on("space_admin",(function(e){const t=e;account_list.account.is_admin=t.is_admin,1==account_list.account.is_admin?($("#space_setting_btn").removeClass("hidden"),$("#space_setting_btn_hr").removeClass("hidden")):0==account_list.account.is_admin&&($("#space_setting_btn").addClass("hidden"),$("#space_setting_btn_hr").addClass("hidden"),1==$("#space_setting_modal").hasClass("in")&&swal.fire("관리자 권한이 변경되었습니다.").then((e=>{$("#space_setting_modal").modal("hide")})))})),t.on("chat",(function(e){const t=e;switch(t.o){case init.ws_chat_enum.msg_new:$("#chet_new").removeClass("hidden"),0<t.unread_count?$($("#tabs_ul #chat_btn .main_new")[0]).removeClass("hidden"):$($("#tabs_ul #chat_btn .main_new")[0]).addClass("hidden"),chat_data.room_seq==t.r?(v_chat_after(t),set_msg_read()):get_room_list_new_msg_count(t.r);break;case init.ws_chat_enum.msg_count:chat_data.room_seq==t.r&&v_msg_unread(t);break;case init.ws_chat_enum.room_new:get_room_list(!0,t.r);break;case init.ws_chat_enum.room_remove:get_room_list();break;case init.ws_chat_enum.room_member_add:console.log("room member add");break;case init.ws_chat_enum.room_member_leave:console.log("room member leave");break;case init.ws_chat_enum.room_msg_read_all:v_room_msg_read_all(t.r)}})),t.on("calendar",(function(e){const t=e;switch(t.o){case init.ws_calendar_enum.calendar_list:get_calendar_list(),1==calendar.cal_is_first_load&&(v_cal_nav_title($("#tabs-calendar #cal_nav_title"),calendar.cal),calendar.cal_is_first_load=!1);break;case init.ws_calendar_enum.event_update:get_event_item(t.e);break;case init.ws_calendar_enum.event_remove:if(null==calendar.cal.getEventById(t.e))break;calendar.cal.getEventById(t.e).remove()}}))}account_get_profile_space(account_list.enum_account_self.self,user_profile,!0),$((function(){layout_resize(),$.ajax({url:"/get_user_session",method:"POST",async:!1,success:function(e){socket_connect(e)},dataType:"text"});let e={...init.popover_click_option};e.placement="auto-right",e.content='<ul class="dropdown-menu exit_menu">\n<li id="go_spaces_list" class="dropdown-item">\n<span>\n<i class="fa fa-th-large fa-lg fa-fw"></i>\n<span class="toggle_hide" data-i18n="cs:space.list"></span>\n</span>\n</li>\n<li class="dropdown-item">\n<span id="logout">\n<i class="fas fa-sign-out-alt fa-lg fa-fw"></i>\n<span class="toggle_hide" data-i18n="cs:logout"></span>\n</span>\n</li>\n</ul>',e.onShow=function(e){e.localize()},$("#exit_btn").webuiPopover("destroy").webuiPopover(e),e.content='<ul class="dropdown-menu exit_menu">\n<li class="dropdown-item">\n<span id="set_profile_btn">\n<i class="fas fa-user-cog fa-lg fa-fw"></i>\n<span class="toggle_hide" data-i18n="cs:profile setting">fff</span>\n</span>\n</li>\n<li class="dropdown-item">\n<span id="set_lan_btn">\n<i class="fas fa-globe fa-lg fa-fw"></i>\n<span class="toggle_hide" data-i18n="cs:lng"></span>\n</span>\n</li>\n</ul>',e.onShow=function(e){$(e).localize();let t={...init.popover_click_option};t.placement="horizontal",t.content='<ul id="set_lan_ul" class="dropdown-menu">\n<li class="dropdown-item" data-lan="en">\n<a>English</a>\n</li>\n<li class="divider"></li>\n<li class="dropdown-item" data-lan="ko">\n<a>한국어</a>\n</li>\n</ul>',t.multi=!0,$("#set_lan_btn").webuiPopover("destroy").webuiPopover(t)},$("#user_info_section").webuiPopover("destroy").webuiPopover(e),$("#tree_filter_mode #filter_input").webuiPopover("destroy").webuiPopover({trigger:"click",width:$("#tree_filter_mode #filter_input").outerWidth(),cache:!1,arrow:!1,padding:!1,content:'<ul class="card_search_ul list-group card_tree" data-i18n="card:no data">none</ul>',onShow:function(e){e.width($("#tree_filter_mode #filter_input").outerWidth()),e.localize()}}),$("#note_tree_filter_mode #filter_input").webuiPopover("destroy").webuiPopover({trigger:"click",width:$("#note_tree_filter_mode #filter_input").outerWidth(),cache:!1,arrow:!1,padding:!1,content:'<ul class="card_search_ul list-group note_tree" data-i18n="card:no data">none</ul>',onShow:function(e){e.width($("#note_tree_filter_mode #filter_input").outerWidth()),e.localize()}})}));const messaging=firebase.messaging();function set_history(e=init.current_main_tab,t=null,a=null){if(0==init.is_pop){let n={data:[e,t,a]};history.pushState(n,null,"?q="+encodeURIComponent(btoa(JSON.stringify(n))))}}function tree_history_controller(e,t){let a=$("#tree").fancytree("getTree");card_detail.card_node=a.getNodeByKey(t),init.is_web?list_node_click(card_detail.card_node,!0,!1):0==init.tree_split.getSizes()[0]?init.tree_split.collapse(1):list_node_click(card_detail.card_node,!0,!0,1),setTimeout((function(){breadcrumb_path_reset($("#card_detail #breadcrumb"))}),50)}function note_history_controller(e,t){let a=$("#note_tree").fancytree("getTree").getNodeByKey(t);init.is_web?note_node_click(a,!0):0==init.note_split.getSizes()[0]?init.note_split.collapse(1):note_node_click(a,!0,!0,1)}function url_history(e){if(null==e)return;let t=e.data[0],a=e.data[1],n=e.data[2];switch($("#tabs").tabs({active:t}),t){case init.main_tabs_enum.tree:$("#card-tabs").tabs("enable"),tree_history_controller(n,a);break;case init.main_tabs_enum.note:note_history_controller(n,a);break;default:$("#tabs").tabs({active:t})}}function history_controller(e){if(init.is_pop=!0,$(".modal").hasClass("in"))return void $(".modal.in").modal("hide");if(0<$("#lcl_wrap").length)return void lcl_close();if(null==e)return;e.data[0],e.data[1],e.data[2];switch(init.current_main_tab){case init.main_tabs_enum.tree:$("#card-tabs").tabs("enable"),0==init.is_web&&100==init.tree_split.getSizes()[1]&&init.tree_split.setSizes([100,0]);break;case init.main_tabs_enum.note:0==init.is_web&&100==init.note_split.getSizes()[1]&&init.note_split.setSizes([100,0]);break;case init.main_tabs_enum.calendar:break;case init.main_tabs_enum.message:0==init.is_web&&(100==init.message_split.getSizes()[1]?init.message_split.setSizes([100,0,0]):100==init.message_split.getSizes()[2]&&init.message_split.setSizes([0,100,0]));break;case init.main_tabs_enum.todo:0==init.is_web&&100==init.todo_split.getSizes()[1]&&init.todo_split.setSizes([100,0]);break;case init.main_tabs_enum.confirm:0==init.is_web&&(100==init.confirm_split.getSizes()[1]?init.confirm_split.setSizes([100,0,0]):100==init.confirm_split.getSizes()[2]&&init.confirm_split.setSizes([0,100,0]))}init.is_pop=!1}function split_collapse(e,t){try{init.is_web||e.collapse(t)}catch(e){console.log(e)}}function set_split_value(e){100<e[0]+e[1]&&(e[1]=100-e[0])}function set_tree_split(){null!=init.tree_split&&init.tree_split.destroy();let e=[100,0],t=0,a=0;if(1==init.is_web){t=5,a=480;let n=localStorage.getItem("tree_split");n?(e=JSON.parse(n),set_split_value(e)):(e=[30,70],localStorage.setItem("tree_split",JSON.stringify([30,70])))}jQuery.Event("card_bread.resize");init.tree_split=Split(["#tree_split","#card_detail"],{sizes:e,gutterSize:t,minSize:a,snapOffset:0,dragInterval:5,onDrag:function(){$(document).trigger("card_bread.resize")},onDragEnd:function(){localStorage.setItem("tree_split",JSON.stringify(init.tree_split.getSizes())),calendar.card_cal.updateSize(),sub_tab_title_resize()}}),sub_tab_title_resize()}function set_note_split(){null!=init.note_split&&init.note_split.destroy();let e=[100,0],t=0,a=0;if(1==init.is_web){t=5,a=480;let n=localStorage.getItem("note_split");n?(e=JSON.parse(n),set_split_value(e)):(e=[30,70],localStorage.setItem("note_split",JSON.stringify([30,70])))}jQuery.Event("note_bread.resize");init.note_split=Split(["#note_split_left","#note_split_right"],{sizes:e,gutterSize:t,minSize:a,snapOffset:0,dragInterval:5,onDrag:function(){$(document).trigger("note_bread.resize")},onDragEnd:function(){localStorage.setItem("note_split",JSON.stringify(init.note_split.getSizes())),calendar.note_cal.updateSize(),sub_tab_title_resize()}}),sub_tab_title_resize()}function set_calendar_split(){null!=init.calendar_split&&init.calendar_split.destroy();let e=[0,100],t=0,a=0,n=[1/0,1/0];if(1==init.is_web){t=5,a=150,n=[300,1/0];let i=localStorage.getItem("calendar_split");i?(e=JSON.parse(i),set_split_value(e)):(e=[10,90],localStorage.setItem("calendar_split",JSON.stringify([10,90])))}v_mobile_cal_layout(!0,!1);jQuery.Event("main_cal.resize");init.calendar_split=Split(["#main_calendar #calendar_split_left","#main_calendar #calendar_split_right"],{sizes:e,gutterSize:t,minSize:a,maxSize:n,snapOffset:0,dragInterval:5,onDrag:function(){$(document).trigger("main_cal.resize")},onDragEnd:function(){localStorage.setItem("calendar_split",JSON.stringify(init.calendar_split.getSizes())),calendar.cal.updateSize()}})}function set_calendar_set_split(){null!=init.calendar_set_split&&init.calendar_set_split.destroy();let e=[100,0],t=0,a=0,n=[1/0,1/0];if(1==init.is_web){t=5,a=150,n=[300,1/0];let i=localStorage.getItem("calendar_set_split");i?(e=JSON.parse(i),set_split_value(e)):(e=[10,90],localStorage.setItem("calendar_split",JSON.stringify([10,90])))}init.calendar_set_split=Split(["#main_calendar_set #calendar_set_menu","#main_calendar_set #calendar_set_contents"],{sizes:e,gutterSize:t,minSize:a,maxSize:n,snapOffset:0,dragInterval:5,onDragEnd:function(){localStorage.setItem("calendar_set_split",JSON.stringify(init.calendar_set_split.getSizes()))}})}function set_todo_split(){null!=init.todo_split&&init.todo_split.destroy();let e=[100,0],t=0,a=0;if(1==init.is_web){t=5,a=480;let n=localStorage.getItem("todo_split");n?(e=JSON.parse(n),set_split_value(e)):(e=[30,70],localStorage.setItem("todo_split",JSON.stringify(e)))}init.todo_split=Split(["#todo_split_left","#todo_split_right"],{sizes:e,gutterSize:t,minSize:a,onDragEnd:function(){localStorage.setItem("todo_split",JSON.stringify(init.todo_split.getSizes()))}})}function set_confirm_split(){null!=init.confirm_split&&init.confirm_split.destroy();let e=[100,0,0],t=0,a=0,n=0,i="hidden";if(1==init.is_web){t=5,a=[150,480,480],n=[200,1/0,1/0];let s=localStorage.getItem("confirm_split");s?(e=JSON.parse(s),set_split_value(e)):(e=[10,30,60],localStorage.setItem("confirm_split",JSON.stringify(e))),i=""}init.confirm_split=Split(["#confirm_split_left","#confirm_split_center","#confirm_split_right"],{sizes:e,gutterSize:t,minSize:a,maxSize:n,onDragEnd:function(){localStorage.setItem("confirm_split",JSON.stringify(init.confirm_split.getSizes()))}})}function set_message_split(){null!=init.message_split&&(init.message_split.destroy(),$("#message_controller").remove());let e=[100,0,0],t=0,a=0,n=0,i="hidden";if(1==init.is_web){t=5,a=[150,480,480],n=[200,1/0,1/0];let s=localStorage.getItem("message_split");s?(e=JSON.parse(s),100<e[0]+e[1]+e[2]&&(e[2]=100-(e[0]+e[1]))):(e=[10,30,60],localStorage.setItem("message_split",JSON.stringify(e))),i=""}jQuery.Event("message_account.resize");init.message_split=Split(["#message_split_left","#message_split_center","#message_split_right"],{sizes:e,gutterSize:t,minSize:a,maxSize:n,onDrag:function(){$(document).trigger("message_account.resize")},onDragEnd:function(){localStorage.setItem("message_split",JSON.stringify(init.message_split.getSizes()))}}),$("#message_split_center").before(`<div id="message_controller" class="${i} between_flex">\n<div class="between_flex over_wrapper">\n<h4 class="margin_5 web_hidden over_wrapper"></h4>\n<span>\n<div id="message_move_btn" class="btn btn-dark btn-sm dis" disabled="disabled">\n<span data-i18n="message:move"></span>\n<i class="fas fa-caret-down"></i>\n</div>\n<span>\n<a id="message_read_con" class="btn btn-default btn-sm dis" disabled="disabled"\ndata-content='<ul class="dropdown-menu">\n<li class="dropdown-item"><a id="message_read_btn" data-i18n="message:read"></a></li>\n<li class="dropdown-item"><a id="message_unread_btn" data-i18n="message:unread"></a></li>\n</ul>'>\n<span data-i18n="message:mark as"></span>\n<i class="fas fa-caret-down"></i>\n</a>\n</span>\n<span id="message_type_btn_group">\n</span>\n</span>\n</div>\n<div>\n<span class="pull-right">\n<div id="message_remove_btn" class="btn btn-sm btn-danger dis" disabled="disabled">\n<i class="fas fa-trash"></i>\n</div>\n</span>\n</span>\n</div>\n\x3c!--<div id="message_checkbox_option">--\x3e\n\x3c!--</div>--\x3e\n</div>`),$("#message_controller #message_read_con").webuiPopover("destroy").webuiPopover(init.popover_click_option),v_message_controller(message.current_folder)}function set_chat_split(e=!1){if(null!=chat_data.chat_split&&chat_data.chat_split.destroy(),1==e){$("#chat_panel #chat_extend").removeClass("hidden");let e=[100,0,0],t=0,a=0;e=1==chat_data.is_web?[25,50,25]:[0,0,100],chat_data.chat_split=Split(["#chat_slide","#chat","#chat_extend"],{sizes:e,gutterSize:t,minSize:a}),chat_data.chat_extend_split=Split(["#chat_extend_left","#chat_extend_right"],{sizes:[100,0],gutterSize:0,minSize:0})}else{$("#chat_panel #chat_extend").addClass("hidden");let e=[100,0],t=0,a=0;1==chat_data.is_web&&(e=[30,70]),chat_data.chat_split=Split(["#chat_slide","#chat"],{sizes:e,gutterSize:t,minSize:a})}}function set_chat_coll(){const e=chat_data.chat_split.getSizes();$("#chat_panel").width()<580?1==chat_data.is_web&&(2==e.length&&chat_data.chat_split.collapse(1),3==e.length&&chat_data.chat_split.setSizes([100,0,0]),chat_data.is_web=!1,$("#chat_panel #chat_back_btn").removeClass("hidden")):0==chat_data.is_web&&(2==e.length&&chat_data.chat_split.setSizes([30,70]),3==e.length&&chat_data.chat_split.setSizes([25,50,25]),chat_data.is_web=!0,$("#chat_panel #chat_back_btn").addClass("hidden"))}function set_org_all_split(){null!=org_data.org_split&&org_data.org_split.destroy();let e=[100,0];1==org_data.is_web&&(e=[40,60]),org_data.org_split=Split(["#org_tree","#org_detail"],{sizes:e,gutterSize:0,minSize:0})}function set_org_mgt_split(){null!=org_data.org_mgt_split&&org_data.org_mgt_split.destroy();let e=[100,0];1==org_data.is_web&&(e=[40,60]),org_data.org_mgt_split=Split(["#org_mgt_tree","#org_mgt_detail"],{sizes:e,gutterSize:0,minSize:0})}function set_org_member_split(){null!=org_data.org_member_split&&org_data.org_member_split.destroy();let e=[100,0];1==org_data.is_web&&(e=[40,60]),org_data.org_member_split=Split(["#org_member_tree","#org_member_detail"],{sizes:e,gutterSize:0,minSize:0})}function org_split_coll(){$("#org_panel").width()<580?1==org_data.is_web&&(org_data.org_split.collapse(1),org_data.org_mgt_split.collapse(1),org_data.org_member_split.collapse(1),org_data.is_web=!1,$("#org_panel .org_back_btn").removeClass("hidden")):0==org_data.is_web&&(org_data.org_split.setSizes([40,60]),org_data.org_mgt_split.setSizes([40,60]),org_data.org_member_split.setSizes([40,60]),org_data.is_web=!0,$("#org_panel .org_back_btn").addClass("hidden"))}function mspace_resize(){let e=$("#space_setting_modal").outerHeight(!0)-$("#space_setting_modal #contents_title_area").outerHeight(!0);$("#space_setting_modal .modal-body").outerHeight(e)}function morg_tree_resize(){let e=$("#space_setting_modal").outerHeight(!0)-$("#space_setting_modal #contents_title_area").outerHeight(!0)-$("#space_setting_modal #space_setting_info").outerHeight(!0);$("#morg_tree .ui-fancytree").outerHeight(e)}function morg_mvoe_tree_resize(){$("#morg_move_modal .ui-fancytree").outerHeight($("#morg_move_modal .modal-body").height())}function set_panel_position(e){let t=$(e).position(),a=t.left/$(window).width()*100,n=t.top/$(window).height()*100,i=$(e).width()/$(window).width()*100,s=$(".panel-heading",e).outerHeight()/$(window).height()*100;return n<0&&(n=0),100<n+s&&(n=100-s),a<0&&(a=0),100<a+i&&(a=100-i),a+="%",n+="%",$(e).css("left",a),$(e).css("top",n),[a,n]}function card_title_resize(e,t,a=!0){try{let n=$(".ui-fancytree",e),i=n.scrollLeft();if(a||t.left!=i){t.left=i;let a=$(e).fancytree("getTree").getActiveNode();$(".fancytree-title",e).outerWidth(i+n.prop("clientWidth")),$(a.span).innerWidth(i+$(".ui-fancytree",e).prop("clientWidth")-parseInt($(".ui-fancytree ul",e).css("padding-left"))*(a.getLevel()-1))}}catch(e){}}function breadcrumb_path_reset(e,t=init.enum_bread_type.card){e.asBreadcrumbs("destroy"),e.asBreadcrumbs({toggleIconClass:"fas fa-caret-down fa-lg",toggleClass:"btn btn-xs btn-default",dropdownItem:function(e,a,n){let i=null;switch(t){case init.enum_bread_type.card:i=$("#tree").fancytree("getTree").getNodeByKey(n);break;case init.enum_bread_type.note:i=$("#note_tree").fancytree("getTree").getNodeByKey(n);case init.enum_bread_type.account:}return`<li class="${e.dropdownItemClass} dropdown-item">\n<a class="bread_node_btn" data-node_key="${n}">\n${get_tree_icon(i)}${a.trim()}\n</a>\n</li>`}})}function sub_tab_title_resize(){$("#tabs-tree #card_detail").width()<768?($("#tabs-tree .sub_tab").addClass("hidden"),$("#tabs-tree .xs_size").addClass("info_xs")):($("#tabs-tree .sub_tab").removeClass("hidden"),$("#tabs-tree .xs_size").removeClass("info_xs")),$("#tabs-note #note_detail").width()<768?($("#tabs-note .sub_tab").addClass("hidden"),$("#tabs-note .xs_size").addClass("info_xs")):($("#tabs-note .sub_tab").removeClass("hidden"),$("#tabs-note .xs_size").removeClass("info_xs")),$("#tabs-todo #todo_split_right").width()<768?$("#tabs-todo .xs_size").addClass("info_xs"):$("#tabs-todo .xs_size").removeClass("info_xs")}function web_mobile_switch(){if($("#content").width()<768)$("#content").removeClass("web_app"),$("#content").addClass("mobile_app"),$(".ui-fancytree.fancytree-container").removeClass("tree_web"),$(".ui-fancytree.fancytree-container").addClass("tree_mobile"),$(".mobile_app #main_calendar #calendar").swipe({swipe:function(e,t,a,n,i,s){if(1!=calendar.is_navigation_stop)switch(console.log(t),t){case"left":$("#tabs-calendar #cal_next").trigger("click");break;case"right":$("#tabs-calendar #cal_prev").trigger("click");break;case"up":case"down":break;default:calendar.is_navigation_stop=!1}else calendar.is_navigation_stop=!1}}),1==init.is_web&&(init.is_web=!1,1==$("#markdown_editor_modal").hasClass("in")&&contents_data.markdown_editor.changePreviewStyle("tab"),set_tree_split(),set_note_split(),set_calendar_split(),set_calendar_set_split(),set_confirm_split(),set_todo_split(),set_message_split(),$(".func_panel:not(.hidden)").each((function(e,t){try{t.setControlStatus("normalize","disable").maximize().resizeit("disable")}catch(e){}})),$(".back_btn").removeClass("hidden"),$(".slide_toggle").removeClass("hidden"),$("#main_menu").addClass("hidden").removeClass("main_menu_open").removeClass("fixed"),$("#tree").fancytree("getTree").render(),$("#note_tree").fancytree("getTree").render(),$("#card_move_modal").hasClass("in")&&$("#move_tree").fancytree("getTree").render(),$("#card_link_modal").hasClass("in")&&$("#link_tree").fancytree("getTree").render(),$("#org_card_modal").hasClass("in")&&$("#org_card_tree").fancytree("getTree").render());else if($("#content").addClass("web_app"),$("#content").removeClass("mobile_app"),$(".web_app #main_calendar #calendar").swipe("destroy"),$(".ui-fancytree.fancytree-container").removeClass("tree_mobile"),$(".ui-fancytree.fancytree-container").addClass("tree_web"),0==init.is_web){init.is_web=!0,1==$("#markdown_editor_modal").hasClass("in")&&contents_data.markdown_editor.changePreviewStyle("vertical"),set_tree_split(),set_note_split(),set_calendar_split(),set_calendar_set_split(),set_todo_split(),set_confirm_split(),set_message_split(),$(".func_panel:not(.hidden)").each((function(e,t){try{t.setControlStatus("normalize","enable").normalize().resizeit("enable")}catch(e){}})),$(".back_btn").addClass("hidden"),$(".slide_toggle").addClass("hidden");try{$("#main_menu").removeClass("hidden").removeClass("fixed").removeClass("main_menu_open"),$("#menu_overlay").addClass("hidden"),$(".sub_tab").localize()}catch(e){console.log(e)}$("#tree").fancytree("getTree").render(),$("#note_tree").fancytree("getTree").render(),$("#card_move_modal").hasClass("in")&&$("#move_tree").fancytree("getTree").render(),$("#card_link_modal").hasClass("in")&&$("#link_tree").fancytree("getTree").render(),$("#org_card_modal").hasClass("in")&&$("#org_card_tree").fancytree("getTree").render()}sub_tab_title_resize()}function layout_resize(){web_mobile_switch(),mspace_resize(),morg_tree_resize();try{set_slidebar_width($("#space_setting"))}catch(e){}}function set_slidebar_width(e,t=window.innerWidth){let a=e.css("-webkit-transform").match(/-?[\d\.]+/g);null!=a&&e.width(t-a[4])}function set_space_slidebar(e){null==e?((e=new slidebars($("#space_setting"))).init(),e.open("space_setting_slide"),set_slidebar_width($("#space_setting")),$(e.events).on("opened",(function(){set_slidebar_width($("#space_setting"))})),$(e.events).on("closed",(function(){set_slidebar_width($("#space_setting"))})),$("#space_setting_modal .slide_toggle").on("click",(function(t){t.stopPropagation(),t.preventDefault(),e.toggle("space_setting_slide")}))):e.open("space_setting_slide")}messaging.requestPermission().then((function(){return messaging.getToken()})).then((function(e){let t=new Date(Date.now());console.log("fcm token",e,"----------------------",t.toLocaleString()),$.ajax({url:"/set_token_registration",method:"POST",data:{registration_token:e},success:function(e){},dataType:"json"})})).catch((function(e){console.log("fcm no",e)})),messaging.onTokenRefresh((function(){messaging.getToken().then((function(e){let t=new Date(Date.now());console.log("refreshed fcm token",e,"----------------------",t.toLocaleString()),$.ajax({url:"/set_token_registration",method:"POST",data:{registration_token:e},success:function(e){console.log(e)},dataType:"json"})})).catch((function(e){}))})),messaging.onMessage((function(e){new Noty({text:`<img class="user_photo img-circle" src="${e.notification.icon}"> ${e.notification.body}`,type:"success",layout:"bottomLeft",timeout:3e3}).show()})),$("#tabs").tabs({activate:function(e,t){switch(init.current_main_tab=t.newTab.index().toString(),init.current_main_tab){case init.main_tabs_enum.tree:set_tree_split(),$("#tree").fancytree("getTree").render(),$(document).trigger("card_bread.resize"),set_history(init.current_main_tab,card_detail.card_seq,null);break;case init.main_tabs_enum.note:set_note_split(),$("#note_tree").fancytree("getTree").render(),$(document).trigger("note_bread.resize"),set_history(init.current_main_tab,null,null);break;case init.main_tabs_enum.calendar:set_calendar_split(),get_event_list(),set_history(init.current_main_tab,null,null);break;case init.main_tabs_enum.message:set_message_split(),get_message_folder_list(),set_history(init.current_main_tab,null,null);break;case init.main_tabs_enum.todo:set_todo_split(),card_get_todo($("#tabs-todo #todo_split_left #todo_list")),set_history(init.current_main_tab,null,null);break;case init.main_tabs_enum.confirm:{set_confirm_split();let e=$("#confirm_split_center #confirm_period_select > div:not(.uncheck)").data("period");get_confirm_list(!0,$("#confirm_folder_list .list-group-item.active").data("confirm_folder_seq"),confirm.confirm_user_table,e),set_history(init.current_main_tab,null,null);break}}}}).addClass("ui-tabs-vertical ui-helper-clearfix"),$("#card-tabs").tabs({activate:function(e,t){init.current_sub_tab=t.newTab.index().toString(),list_node_click(card_detail.card_node,!0,!1)},disabled:[0,1,2,3,4,5]}),$("#note-tabs").tabs({activate:function(e,t){init.current_note_sub_tab=t.newTab.index().toString(),note_node_click(note.note_node,!0,!1)},disabled:[0,1,2,3,4,5]}),window.addEventListener("popstate",(function(){WebuiPopovers.hideAll(),null==history.state?history.go(1):history_controller(history.state)})),$(document).on("card_bread.resize",$.throttle(70,(function(){$("#card_detail #breadcrumb").resize(),sub_tab_title_resize(),init.current_sub_tab==init.card_tabs_enum.detail&&($("#reply_to_account.breadcrumb").resize(),$("#v_reply_to_account.breadcrumb").resize()),init.current_sub_tab==init.card_tabs_enum.calendar&&calendar.card_cal.updateSize()}))),$(document).on("note_bread.resize",$.throttle(70,(function(){$("#note_split_right #breadcrumb").resize(),sub_tab_title_resize(),init.current_note_sub_tab==init.note_tabs_enum.calendar&&calendar.note_cal.updateSize()}))),$(document).on("main_cal.resize",$.throttle(70,(function(){calendar.cal.updateSize()}))),$(document).on("message_account.resize",$.throttle(100,(function(){$("#message_table .recv_account").each((function(e,t){$(t).asBreadcrumbs("destroy"),$(t).asBreadcrumbs(init.account_asBreadcrumbs_opt),$(".dropdown > .plus_btn",t).append($(".breadcrumb-dropdown-menu > li:not(.is-hidden)",t).length),$(".account_drop a",t).webuiPopover("destroy").webuiPopover(init.popover_option)}))}))),$(window).resize((function(e){null==$(e.target)[0].id&&(layout_resize(),WebuiPopovers.hideAll())})),$(document).on("click","#menu_btn",(function(){1==init.is_web?$("#main_menu").toggleClass("main_menu_open"):($("#menu_overlay").toggleClass("hidden"),$("#main_menu").toggleClass("fixed").toggleClass("main_menu_open").toggleClass("hidden"))})),$(document).on("click","#menu_overlay",(function(){$("#menu_overlay").addClass("hidden"),$("#main_menu").removeClass("fixed").removeClass("main_menu_open").addClass("hidden")})),$(document).on("click","#main_menu",(function(){0==init.is_web&&($("#menu_overlay").addClass("hidden"),$("#main_menu").removeClass("fixed").removeClass("main_menu_open").addClass("hidden"))})),$((function(){init.file_per_panel=jsPanel.create({content:'\n<div class="padding_10">\n<div id="upload_clear_btn" class="btn btn-danger mb_5" data-i18n="cs:dz.clear"></div>\n<div class="dropzone"></div>\n</div>',id:"file_per_previews",headerTitle:"",resizeit:!1,maximizedMargin:0,dragit:!1,syncMargins:!0,iconfont:["fas fa-chevron-up fa-lg fa-fw","fas fa-window-minimize fa-lg fa-fw","fas fa-window-restore fa-lg fa-fw","fas fa-window-maximize fa-lg fa-fw","fas fa-times fa-lg fa-fw text-danger"],theme:"light",css:{controlbar:"font_15"},headerControls:{size:"xl",maximize:"remove",normalize:"remove",minimize:"remove"},onwindowresize:function(e,t){file_panel_controller(t)},onbeforesmallify:function(e){return e.reposition({my:"right-bottom",at:"right-bottom",offsetX:-10,offsetY:$(e.content).height()-10}),!0},onunsmallified:function(e){return e.reposition({my:"right-bottom",at:"right-bottom",offsetX:-10,offsetY:-10}),!0},onbeforeclose:function(e){return $(e).toggleClass("hidden"),!1},callback:function(e){file_panel_controller(e),$(e).addClass("hidden")}}),init.chat_panel=jsPanel.create({content:'<div id="chat_slide" class="split split-horizontal">\n<div id="modal_member_btn" class="btn btn-primary">\n<i class="fa fa-plus fa-fw"></i>\n</div>\n<div id="chat_room_list"></div>\n</div>\n<div id="chat" class="split split-horizontal">\n<div id="chat_contents">\n<div id="chat_info" class="center_flex v_100_per over_wrapper cs_sticky">\n<h3 id="chat_title" class="text-center over_wrapper"\ndata-i18n="chat:chat.select chat room">\n</h3>\n</div>\n<div id="send_msg" class="between_flex v_100_per hidden cs_sticky_bottom">\n<div class="flex_item_default">\n<textarea id="send_msg_input" type="text" maxlength="5000"\ndata-i18n="[placeholder]chat:chat.add message"\nplaceholder=""></textarea>\n</div>\n<div class="">\n<div id="chat_file_add_btn" class="btn"><i\nclass="fas fa-paperclip fa-lg"></i></div>\n<div id="send_msg_btn" class="btn btn-primary pull-right"><i\nclass="fas fa-paper-plane fa-lg"></i></div>\n</div>\n</div>\n</div>\n</div>\n<div id="chat_extend" class="split split-horizontal h_100_per hidden">\n<div id="chat_extend_left" class="split split-horizontal h_100_per overflow_hidden"><div id="test111" class="btn">go to</div></div>\n<div id="chat_extend_right" class="split split-horizontal h_100_per overflow_hidden"><div id="test222" class="btn">back</div></div>\n</div>',id:"chat_panel",headerTitle:'<i class="fas fa-comments mr_5"></i><span data-i18n="chat:chat.chat"></span>',maximizedMargin:0,syncMargins:!0,iconfont:["fas fa-chevron-up fa-lg fa-fw","fas fa-window-minimize fa-lg fa-fw","fas fa-compress fa-lg fa-fw","fas fa-expand fa-lg fa-fw","fas fa-times fa-lg fa-fw text-danger"],theme:"forestgreen",css:{controlbar:"font_15"},headerControls:{size:"xl",minimize:"remove",smallify:"remove"},contentOverflow:"hidden",contentSize:{width:"auto",height:"auto"},panelSize:{width:chat_data.chat_width,height:chat_data.chat_height},position:{my:"center",at:"center",offsetX:25,offsetY:25},resizeit:{minWidth:400,minHeight:500,resize:(e,t,a)=>{chat_data.chat_width=$(e).css("width",t.width/window.innerWidth*100+"%"),chat_data.chat_height=$(e).css("height",t.height/window.innerHeight*100+"%"),set_chat_coll()}},onwindowresize:function(e,t){$(t).hasClass("hidden")||(t.resize({width:chat_data.chat_width,height:chat_data.chat_height}),set_chat_coll(),set_panel_position(t))},onbeforeclose:function(e){return $(e).toggleClass("hidden"),$("#main_menu #chat_btn").toggleClass("btn-chat"),!1},callback:function(e){set_chat_split(),get_room_list(!1),$(e).addClass("hidden").addClass("func_panel")}}),init.org_panel=jsPanel.create({content:'<div id="org_tabs">\n<ul id="org_ul">\n<li>\n<a href="#org_all">\n<div id="org_all_btn"\nclass="btn btn-grey btn-sm"\ndata-i18n="org:dept">\n</div>\n</a>\n</li>\n<li>\n<a href="#org_mgt">\n<div id="org_management_btn"\nclass="btn btn-grey btn-sm uncheck"\ndata-i18n="org:manage">\n</div>\n</a>\n</li>\n<li>\n<a href="#org_member_info">\n<div id="org_member_btn"\nclass="btn btn-grey btn-sm uncheck"\ndata-i18n="org:info">\n</div>\n</a>\n</li>\n</ul>\n<div id="org_all">\n<div id="org_detail" class="split split-horizontal">\n<div id="org_info" class="cs_sticky"></div>\n<div id="org_center" class="col-xs-12">\n<ul class="cs_sticky border_unset">\n<li>\n<a href="#org_all_card"><i\nclass="fas fa-tasks fa-lg"></i></a>\n</li>\n<li>\n<a href="#org_all_todo"><i\nclass="fas fa-running fa-lg"></i></a>\n</li>\n<li>\n<a href="#org_all_schedule"><i\nclass="far fa-calendar fa-lg"></i></a>\n</li>\n</ul>\n<div id="org_all_card">\n<div id="owner_card_search" class="col-xs-12 cs_sticky org_search">\n<div class="col-xs-6 input-group pull-right">\n<input type="text" value=""\nclass="form-control input-sm search_input"\nplaceholder=""\nmaxlength="100"\ndata-i18n="[placeholder]card:card title">\n<span class="btn btn-default input-group-addon text-gray clear_btn clear_btn hidden">\n<i class="fas fa-times"></i>\n</span>\n<span class="btn btn-dark input-group-addon search_btn">\n<i class="fa fa-search"></i>\n</span>\n</div>\n</div>\n<table id="card_tables" class="display"></table>\n</div>\n<div id="org_all_todo">\n<div id="todo_card_search" class="col-xs-12 cs_sticky org_search">\n<div class="col-xs-6 input-group pull-right">\n<input type="text" value=""\nclass="form-control input-sm search_input"\nplaceholder=""\nmaxlength="100"\ndata-i18n="[placeholder]card:card title">\n<span class="btn btn-default input-group-addon text-gray clear_btn clear_btn hidden">\n<i class="fas fa-times"></i>\n</span>\n<span class="btn btn-dark input-group-addon search_btn">\n<i class="fa fa-search"></i>\n</span>\n</div>\n</div>\n<table id="todo_tables" class="display"></table>\n</div>\n<div id="org_all_schedule">\n<div id="calendar_v" class="panel"></div>\n</div>\n</div>\n</div>\n</div>\n<div id="org_mgt">\n<div id="org_mgt_detail" class="split split-horizontal">\n<div id="org_mgt_info" class="cs_sticky">\n</div>\n<div id="org_center" class="col-xs-12">\n<ul class="cs_sticky border_unset">\n<li>\n<a href="#org_mgt_card"><i\nclass="fas fa-tasks fa-lg"></i></a>\n</li>\n<li>\n<a href="#org_mgt_todo"><i\nclass="fas fa-running fa-lg"></i></a>\n</li>\n<li>\n<a href="#org_mgt_schedule"><i\nclass="far fa-calendar fa-lg"></i></a>\n</li>\n</ul>\n<div id="org_mgt_card">\n<div id="owner_card_search" class="col-xs-12 cs_sticky org_search">\n<div class="col-xs-6 input-group pull-right">\n<input type="text" value=""\nclass="form-control input-sm search_input"\nplaceholder=""\nmaxlength="100"\ndata-i18n="[placeholder]card:card title">\n<span class="btn btn-default input-group-addon text-gray clear_btn clear_btn hidden">\n<i class="fas fa-times"></i>\n</span>\n<span class="btn btn-dark input-group-addon search_btn">\n<i class="fa fa-search"></i>\n</span>\n</div>\n</div>\n<table id="card_tables" class="display"></table>\n</div>\n<div id="org_mgt_todo">\n<div id="todo_card_search" class="col-xs-12 cs_sticky org_search">\n<div class="col-xs-6 input-group pull-right">\n<input type="text" value=""\nclass="form-control input-sm search_input"\nplaceholder=""\nmaxlength="100"\ndata-i18n="[placeholder]card:card title">\n<span class="btn btn-default input-group-addon text-gray clear_btn clear_btn hidden">\n<i class="fas fa-times"></i>\n</span>\n<span class="btn btn-dark input-group-addon search_btn">\n<i class="fa fa-search"></i>\n</span>\n</div>\n</div>\n<table id="todo_tables" class="display"></table>\n</div>\n<div id="org_mgt_schedule">\n<div id="calendar_v" class="panel"></div>\n</div>\n</div>\n</div>\n</div>\n<div id="org_member_info">\n<div id="org_member_detail" class="split split-horizontal padding_10">\n</div>\n</div>\n</div>',id:"org_panel",headerTitle:'<i class="fas fa-sitemap mr_5"></i><span data-i18n="org:org"></span>',maximizedMargin:0,syncMargins:!0,iconfont:["fas fa-chevron-up fa-lg fa-fw","fas fa-window-minimize fa-lg fa-fw","fas fa-compress fa-lg fa-fw","fas fa-expand fa-lg fa-fw","fas fa-times fa-lg fa-fw text-danger"],theme:"info",css:{controlbar:"font_15"},headerControls:{size:"xl",minimize:"remove",smallify:"remove"},contentOverflow:"hidden",contentSize:{width:"auto",height:"auto"},panelSize:{width:org_data.org_width,height:org_data.org_height},position:{my:"center",at:"center",offsetX:-25,offsetY:-25},resizeit:{minWidth:400,minHeight:500,resize:(e,t,a)=>{org_data.org_width=$(e).css("width",t.width/window.innerWidth*100+"%"),org_data.org_height=$(e).css("height",t.height/window.innerHeight*100+"%"),org_split_coll(),calendar.cal_org_all.updateSize(),calendar.cal_org_mgt.updateSize()}},onwindowresize:function(e,t){$(t).hasClass("hidden")||(t.resize({width:org_data.org_width,height:org_data.org_height}),org_split_coll(),set_panel_position(t))},onbeforeclose:function(e){return $(e).toggleClass("hidden"),$("#main_menu #org_btn").toggleClass("btn-org"),!1},onmaximized:function(e,t){org_split_coll(),calendar.cal_org_all.updateSize(),calendar.cal_org_mgt.updateSize()},onnormalized:function(e,t){org_split_coll(),calendar.cal_org_all.updateSize(),calendar.cal_org_mgt.updateSize()},callback:function(e){$(e).addClass("hidden").addClass("func_panel"),$("#org_tree").prependTo("#org_all",e),$("#org_mgt_tree").prependTo("#org_mgt",e),$("#org_member_tree").prependTo("#org_member_info",e),$("#org_tabs").tabs({activate:function(e,t){switch(org_data.org_tab=t.newTab.index().toString(),org_panel_click(),$(".btn",t.oldTab[0]).addClass("uncheck"),$(".btn",t.newTab[0]).removeClass("uncheck"),org_data.org_tab){case org_data.org_tabs_enum.all:set_org_all_split();break;case org_data.org_tabs_enum.mgt:set_org_mgt_split();break;case org_data.org_tabs_enum.member:set_org_member_split()}$("#org_info").asBreadcrumbs("destroy"),$("#org_info").asBreadcrumbs(init.asBreadcrumbs_opt),$("#org_mgt_info").asBreadcrumbs("destroy"),$("#org_mgt_info").asBreadcrumbs(init.asBreadcrumbs_opt)}}),$("#org_all #org_center").tabs({activate:function(e,t){$("#org_detail").animate({scrollTop:0},"fast"),org_data.org_all_tab=t.newTab.index().toString(),org_panel_click()}}),$("#org_mgt #org_center").tabs({activate:function(e,t){$("#org_mgt_detail").animate({scrollTop:0},"fast"),org_data.org_mgt_tab=t.newTab.index().toString(),org_panel_click()}});const t={deferRender:!0,dom:"rtp",order:[1,"desc"],rowId:2,drawCallback:function(){i18n_update()},language:{emptyTable:"<span data-i18n='card:no data'></span>",paginate:{next:">",previous:"<"}},autoWidth:!1,columnDefs:[{title:"",targets:0,width:"5%",orderable:!1,searchable:!1},{title:"",targets:1,width:"5%",searchable:!1,orderable:!0,visible:!1},{title:"",targets:2,width:"5%",searchable:!1,orderable:!1,visible:!1},{title:"",targets:3,width:"5%",visible:!1,orderable:!1,searchable:!0}]},a={deferRender:!0,dom:"rtp",order:[[0,"asc"],[1,"asc"]],rowId:2,drawCallback:function(){i18n_update()},language:{emptyTable:"<span data-i18n='card:no data'></span>",paginate:{next:">",previous:"<"}},autoWidth:!1,columnDefs:[{title:"<i class='fas fa-running'></i>",targets:0,width:"5%",searchable:!1},{title:"<i class='fas fa-user'></i>",targets:1,width:"5%",searchable:!1,orderData:2},{title:"",targets:2,visible:!1,searchable:!1},{title:"",targets:3,width:"100%",searchable:!1,orderable:!1},{title:"",targets:4,visible:!1,searchable:!0}]};org_data.all_card_table=$("#org_panel #org_all_card #card_tables").DataTable(t),org_data.all_todo_table=$("#org_panel #org_all_todo #todo_tables").DataTable(a),org_data.mgt_card_table=$("#org_panel #org_mgt_card #card_tables").DataTable(t),org_data.mgt_todo_table=$("#org_panel #org_mgt_todo #todo_tables").DataTable(a),set_org_all_split(),set_org_mgt_split(),set_org_member_split(),org_split_coll()}}),toastui.Editor.setLanguage(["ko","ko-KR"],{Markdown:"마크다운",WYSIWYG:"위지윅",Write:"편집하기",Preview:"미리보기",Headings:"제목크기",Paragraph:"본문",Bold:"굵게",Italic:"기울임꼴",Strike:"취소선",Code:"인라인 코드",Line:"문단나눔",Blockquote:"인용구","Unordered list":"글머리 기호","Ordered list":"번호 매기기",Task:"체크박스",Indent:"들여쓰기",Outdent:"내어쓰기","Insert link":"링크 삽입","Insert CodeBlock":"코드블럭 삽입","Insert table":"표 삽입","Insert image":"이미지 삽입",Heading:"제목","Image URL":"이미지 주소","Select image file":"이미지 파일을 선택하세요.","Choose a file":"파일 선택","No file":"선택된 파일 없음",Description:"설명",OK:"확인",More:"더 보기",Cancel:"취소",File:"파일",URL:"주소","Link text":"링크 텍스트","Add row to up":"위에 행 추가","Add row to down":"아래에 행 추가","Add column to left":"왼쪽에 열 추가","Add column to right":"오른쪽에 열 추가","Remove row":"행 삭제","Remove column":"열 삭제","Align column to left":"열 왼쪽 정렬","Align column to center":"열 가운데 정렬","Align column to right":"열 오른쪽 정렬","Remove table":"표 삭제","Would you like to paste as table?":"표형태로 붙여 넣겠습니까?","Text color":"글자 색상","Auto scroll enabled":"자동 스크롤 켜짐","Auto scroll disabled":"자동 스크롤 꺼짐","Choose language":"언어 선택"})}));