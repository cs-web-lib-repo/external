function set_message_create(e=0,s){$.ajax({url:"/message_set_create",method:"POST",data:{space_seq:space_seq,title:"test",pmessage_seq:e},success:function(e){0==e.ec?get_message_item(e.message_seq,v_message_create,message.enum_type.ready[0],s):cs_msg.noti_err(e.ec)},dataType:"json"})}function set_message_title(e,s){$.ajax({url:"/message_set_title",method:"POST",data:{space_seq:space_seq,message_seq:e,title:s},success:function(e){0==e.ec||cs_msg.noti_err(e.ec)},dataType:"json"})}function set_message_to_account(e,s){0!=s.length&&$.ajax({url:"/message_set_to_account",method:"POST",data:{space_seq:space_seq,message_seq:e,list_account_seq:s},success:function(e){0==e.ec?($("#message_create_modal #message_right .unselect_btn").remove(),v_account_select_list($("#message_create_modal #message_right #to_account_list"),s),$("#multi_select_modal").modal("hide")):cs_msg.noti_err(e.ec)},dataType:"json"})}function set_message_send(e){$.ajax({url:"/message_set_send",method:"POST",data:{space_seq:space_seq,message_seq:e},success:function(e){0==e.ec?$("#message_create_modal").modal("hide"):cs_msg.noti_err(e.ec)},dataType:"json"})}var v_move_folder=function(e,s,a,_){s.webuiPopover("destroy").webuiPopover(message.popover_option),WebuiPopovers.updateContent(s,(function(){let s=e.message_folder_seq.length,a=$(document.createDocumentFragment());a.append('<ul class="list-group message_folder_list"></ul>');for(let _=0;_<s;++_){let s=parseInt(e.message_folder_seq[_]);s<0?$("ul",a).append(`<li class="list-group-item target_folder over_wrapper" data-message_folder_seq="${e.message_folder_seq[_]}">\n<span data-i18n="${v_get_folder_name(s)}"></span>\n</li>`):$("ul",a).append(`<li class="list-group-item target_folder over_wrapper" data-message_folder_seq="${e.message_folder_seq[_]}">\n<span>${e.name[_]}</span>\n</li>`)}return a.append('<div class="cs_sticky_bottom bc_white border_top">\n<div id="message_folder_move_btn"\nclass="btn btn-normal btn-group-justified"\ndata-i18n="message:move"></div>\n</div>'),a})),WebuiPopovers.show(s)},v_folder_list=function(e){v_message_folder_list(e)};function get_message_folder_list(e=v_folder_list,s,a,_){$.ajax({url:"/message_get_folder_list",method:"POST",data:{space_seq:space_seq},success:function(t){0==t.ec?e(t.list_folder,s,a,_):cs_msg.noti_err(t.ec)},dataType:"json"})}function get_message_folder_item(e){$.ajax({url:"/message_get_folder_item",method:"POST",data:{space_seq:space_seq,message_folder_seq:e},success:function(s){0==s.ec?v_message_folder_item(e,s):cs_msg.noti_err(s.ec)},dataType:"json"})}function set_message_folder_create(e){$.ajax({url:"/message_set_folder_create",method:"POST",data:{space_seq:space_seq,name:e},success:function(e){0==e.ec?(get_message_folder_list(),$("#message_folder_create_modal").modal("hide")):cs_msg.noti_err(e.ec)},dataType:"json"})}function set_message_folder_rename(e,s){$.ajax({url:"/message_set_folder_rename",method:"POST",data:{space_seq:space_seq,message_folder_seq:e,name:s},success:function(e){0==e.ec?$("#message_folder_rename_modal").modal("hide"):cs_msg.noti_err(e.ec)},dataType:"json"})}function del_message_folder_remove(e,s){cs_msg.swal_select((function(){$.ajax({url:"/message_del_folder_remove",method:"POST",data:{space_seq:space_seq,message_folder_seq:e,is_move_trash:s},success:function(e){0==e.ec?get_message_folder_list():cs_msg.noti_err(e.ec)},dataType:"json"})}))}function message_get_list(e,s){$.ajax({url:"/message_get_list",method:"POST",data:{space_seq:space_seq,message_folder_seq:e,limit:0,offset:0},success:function(a){0==a.ec?(a.list_message.json__account_seq=JSON.parse(a.list_message.json__account_seq),v_message_controller(e),v_message_list(a.list_message,e),$(message.list_table.row($(s)).node()).addClass("active")):cs_msg.noti_err(a.ec)},dataType:"json"})}function message_get_list_item(e,s=v_message_item_modify,a,_){$.ajax({url:"/message_get_list_item",method:"POST",data:{space_seq:space_seq,v_message_seq:e,v_type:a},success:function(e){0==e.ec?s(e,_):cs_msg.noti_err(e.ec)},dataType:"json"})}function get_message_history(){$.ajax({url:"/message_get_history",method:"POST",data:{space_seq:space_seq},success:function(e){0==e.ec||cs_msg.noti_err(e.ec)},dataType:"json"})}var v_message_create=function(e,s){message.message_seq=e.list_message.message_seq[0],message.article_seq=e.list_article[0].article_seq,message.message_create_data=e.list_message,null!=s&&(set_message_to_account(message.message_seq,s),v_account_select_list($("#message_create_modal #message_right #to_account_list"),s)),$("#message_create_modal #message_title").val(""),$("#message_create_modal #message_right .unselect_btn").remove(),$("#message_create_modal").modal(),v_editor($("#message_create #contents_area"),[],e.list_article[0].article_seq),sort_section($("#message_create #contents_area #section_group")[0])},v_message_item=function(e){e.list_message.json__account_seq=JSON.parse(e.list_message.json__account_seq),message.message_seq=e.list_message.message_seq[0],message.article_seq=e.list_article[0].article_seq,message.message_item_data=e.list_message,v_message_contents_option(e.list_message),v_contents($("#message_contents"),contents_parser(e.list_article[0].info_article))},v_message_edit=function(e){e.list_message.json__account_seq=JSON.parse(e.list_message.json__account_seq),message.message_seq=e.list_message.message_seq[0],message.article_seq=e.list_article[0].article_seq,message.message_item_data=e.list_message,$("#message_create_modal #message_title").val(e.list_message.title[0]),v_account_select_list($("#message_create_modal #message_right #to_account_list"),e.list_message.json__account_seq[0]),$("#message_create_modal").modal(),v_editor($("#message_create #contents_area"),contents_parser(e.list_article[0].info_article),e.list_article[0].article_seq),sort_section($("#message_create #contents_area #section_group")[0])},v_message_item_add=function(e){e.list_message.json__account_seq=JSON.parse(e.list_message.json__account_seq);let s=e.list_message.message_seq.length;for(let a=0;a<s;++a)message.list_table.row.add(v_message_list_item(e.list_message,a));message.list_table.draw(!1)},v_message_item_modify=function(e){e.list_message.json__account_seq=JSON.parse(e.list_message.json__account_seq);let s=e.list_message.message_seq.length;for(let a=0;a<s;++a)message.list_table.row(`#message_${e.list_message.message_seq[a]}_type_${e.list_message.type[a]}`).data(v_message_list_item(e.list_message,a));message.list_table.draw(!1)};function get_message_item(e,s=v_message_item,a,_){$.ajax({url:"/message_get_item",method:"POST",data:{space_seq:space_seq,message_seq:e,type:a},success:function(e){0==e.ec?s(e,_):cs_msg.noti_err(e.ec)},dataType:"json"})}function set_message_move(e,s,a){$.ajax({url:"/message_set_move",method:"POST",data:{space_seq:space_seq,v_message_seq:e,v_type:s,to_message_folder_seq:a},success:function(e){WebuiPopovers.hideAll(),0==e.ec?message.list_table.rows({selected:!0}).remove().draw(!1):cs_msg.noti_err(e.ec)},dataType:"json"})}function del_check_message_remove(e,s){cs_msg.swal_select((function(){$.ajax({url:"/message_del_remove",method:"POST",async:!1,data:{space_seq:space_seq,v_message_seq:e,v_type:s},success:function(e){0==e.ec||cs_msg.noti_err(e.ec)},dataType:"json"})}))}function del_item_message_remove(e,s){cs_msg.swal_select((function(){$.ajax({url:"/message_del_remove",method:"POST",async:!1,data:{space_seq:space_seq,v_message_seq:e,v_type:s},success:function(e){0==e.ec?(message.list_table.row($("#message_table tbody tr.active")).remove().draw(!1),$("#message_split_right #message_contents_option >").remove(),$("#message_split_right #message_contents >").remove()):cs_msg.noti_err(e.ec)},dataType:"json"})}))}function del_message_trash_clear(){cs_msg.swal_select((function(){$.ajax({url:"/message_del_trash_clear",method:"POST",data:{space_seq:space_seq},success:function(e){0==e.ec||cs_msg.noti_err(e.ec)},dataType:"json"})}),"clear")}function set_message_read(e,s,a){$.ajax({url:"/message_set_read",method:"POST",data:{space_seq:space_seq,v_message_seq:e,v_type:s,is_read:a},success:function(e){0==e.ec||cs_msg.noti_err(e.ec)},dataType:"json"})}