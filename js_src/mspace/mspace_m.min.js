function space_get_account_list(e=!0){$.ajax({url:"/space_get_account_list",method:"POST",async:e,data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec?account_list.set_list_account_info(e):cs_msg.noti_err(e.ec)},dataType:"json"})}function set_invite_create(){$.ajax({url:"/set_invite_create",method:"POST",data:{space_seq:mspace_init.space_seq,expire_day:10},success:function(e){0==e.ec?get_invite_list():cs_msg.noti_err(e.ec)},dataType:"json"})}function get_invite_list(){$.ajax({url:"/get_invite_list",method:"POST",data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec?(mspace_data.set_invite_data(e.list_invite),v_invite_list(),get_join_guide()):cs_msg.noti_err(e.ec)},dataType:"json"})}function del_invite(e){cs_msg.swal_select((function(){$.ajax({url:"/del_invite",method:"POST",data:{space_seq:mspace_init.space_seq,invite_string:e},success:function(e){0==e.ec?get_invite_list():cs_msg.noti_err(e.ec)},dataType:"json"})}))}function get_account_list_join_wait(){$.ajax({url:"/get_account_list_join_wait",method:"POST",data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec?(mspace_data.set_join_wait_data(e),v_account_list_join_wait()):cs_msg.noti_err(e.ec)},dataType:"json"})}function get_account_list_join_history(){$.ajax({url:"/get_account_list_join_history",method:"POST",data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec?(mspace_data.set_join_history_data(e),v_account_list_join_history()):cs_msg.noti_err(e.ec)},dataType:"json"})}function set_account_join_approval(e,t){$.ajax({url:"/set_account_join_approval",method:"POST",data:{space_seq:mspace_init.space_seq,list_account_seq:[e],is_approval:t},success:function(e){0==e.ec?get_account_list_join_wait():cs_msg.noti_err(e.ec)},dataType:"json"})}function get_account_list(){$.ajax({url:"/get_account_list",method:"POST",data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec?(mspace_data.set_account_list_data(e),v_account_list()):cs_msg.noti_err(e.ec)},dataType:"json"})}function set_account_state(e,t){$.ajax({url:"/set_account_state",method:"POST",data:{space_seq:mspace_init.space_seq,list_account_seq:[e],set_account_state:t},success:function(e){0==e.ec?get_account_list():cs_msg.noti_err(e.ec)},dataType:"json"})}function get_space_intro(e=!0){$.ajax({url:"/get_space_intro",method:"POST",data:{space_seq:mspace_init.space_seq},success:function(t){0==t.ec?(e&&v_intro(t),$("#space_name").text(t.name)):cs_msg.noti_err(t.ec)},dataType:"json"})}function set_space_intro(e,t){$.ajax({url:"/set_space_intro",method:"POST",data:{space_seq:mspace_init.space_seq,name:e,note:t},success:function(e){0==e.ec?get_space_intro(!1):cs_msg.noti_err(e.ec)},dataType:"json"})}function set_account_admin(e){$.ajax({url:"/set_account_admin",method:"POST",data:{space_seq:mspace_init.space_seq,account_seq:e},success:function(e){0==e.ec?get_account_list():cs_msg.noti_err(e.ec)},dataType:"json"})}function del_account_admin(e){$.ajax({url:"/del_account_admin",method:"POST",data:{space_seq:mspace_init.space_seq,account_seq:e},success:function(e){0==e.ec?1==account_list.account.is_admin&&get_account_list():cs_msg.noti_err(e.ec)},dataType:"json"})}function get_join_guide(){$.ajax({url:"/get_join_guide",method:"POST",data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec?($("#guide_intro_input").text(e.account_intro),$("#guide_name_input").text(e.account_name)):cs_msg.noti_err(e.ec)},dataType:"json"})}function set_join_guide(e,t){$.ajax({url:"/set_join_guide",method:"POST",data:{space_seq:mspace_init.space_seq,account_name:e,account_intro:t},success:function(e){0==e.ec||cs_msg.noti_err(e.ec)},dataType:"json"})}function get_state(){$.ajax({url:"/get_state",method:"POST",data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec?v_dashboard(e.list_state,e):cs_msg.noti_err(e.ec)},dataType:"json"})}function get_state_history(){$.ajax({url:"/get_state_history",method:"POST",data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec||cs_msg.noti_err(e.ec)},dataType:"json"})}function make_map(e,t,s){let a=e[t],c=e[s],_=new Object;for(let e=0;e<a.length;++e)0==Array.isArray(_[c[e]])&&(_[c[e]]=new Array),_[c[e]].push(e);return _}function make_group_tree(e,t,s){let a=new Object;a.depth=e.depth[s],a.title=e.name[s],a.key=e.org_seq[s],a.porg_seq=e.porg_seq[s],a.v_account_seq=e.json__account_seq[s],a.is_account=!1,a.folder=!0;let c=new Array;for(let a in t[e.org_seq[s]])c.push(make_group_tree(e,t,t[e.org_seq[s]][a]));let _=!1;if(e.json__admin_account_seq[s].forEach((function(e){e!=account_list.account.account_seq||(_=!0)})),e.json__account_seq[s].forEach((function(t){let a=account_list.get_account(t),n=!1;e.json__admin_account_seq[s].forEach((function(e){e!=t||(n=!0)})),c.push({key:"a"+t,title:a.name,folder:!1,data:{url:a.photo_url,account_seq:t,is_account:!0,admin_seq:e.json__admin_account_seq[s],is_admin:n,is_member:_}})})),a.children=new Array,0!=c.length){a.children=c;let e=!1;for(let t=0;t<a.children.length;++t){if(0==a.children[t].folder){e=!1;break}null!=a.children[t].unselectableStatus&&(e=!0)}1==e&&(a.unselectableStatus=!1)}else a.unselectableStatus=!1;return a}function org_tree_reload(e){const t=make_map(e,"org_seq","porg_seq");let s=make_group_tree(e,t,1);if(-1==e.org_seq[0]){let t=new Object;t.depth=e.depth[0],t.title=i18next.t("tree:org_tree.other users"),t.key=e.org_seq[0],t.porg_seq=e.porg_seq[0],t.v_account_seq=e.json__account_seq[0],t.is_account=!1,t.folder=!0;let a=!1,c=new Array;e.json__admin_account_seq[0].forEach((function(e){e!=account_list.account.account_seq||(a=!0)})),e.json__account_seq[0].forEach((function(t){let s=account_list.get_account(t),_=!1;e.json__admin_account_seq[0].forEach((function(e){e!=t||(_=!0)})),c.push({key:"a"+t,title:s.name,folder:!1,data:{url:s.photo_url,account_seq:t,is_account:!0,admin_seq:e.json__admin_account_seq[0],is_admin:_,is_member:a}})})),t.children=c,s=[s,t]}$("#morg_tree").length&&$("#morg_tree").fancytree("getTree").reload(s)}function get_org(){$.ajax({url:"/get_org",method:"POST",async:!1,data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec?(e.info.json__account_seq=JSON.parse(e.info.json__account_seq),e.info.json__admin_account_seq=JSON.parse(e.info.json__admin_account_seq),org_tree_reload(e.info)):cs_msg.noti_err(e.ec)},dataType:"json"})}function set_org_create(e,t){$.ajax({url:"/set_org_create",method:"POST",data:{space_seq:mspace_init.space_seq,porg_seq:e,name:t},success:function(e){0==e.ec?console.log(e):cs_msg.noti_err(e.ec)},dataType:"json"})}function set_org_modify(e,t){$.ajax({url:"/set_org_modify",method:"POST",data:{space_seq:mspace_init.space_seq,org_seq:e,name:t},success:function(e){0==e.ec?$("#org_modify_modal").modal("hide"):cs_msg.noti_err(e.ec)},dataType:"json"})}function del_org_remove(e){cs_msg.swal_select((function(){$.ajax({url:"/del_org_remove",method:"POST",data:{space_seq:mspace_init.space_seq,org_seq:e},success:function(e){0==e.ec?console.log(e):cs_msg.noti_err(e.ec)},dataType:"json"})}))}function get_mspace_state_recent(){$.ajax({url:"/get_status_recent",method:"POST",data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec?(console.log(e),v_dashboard(e,e)):cs_msg.noti_err(e.ec)},dataType:"json"})}let start_time=moment().unix(),end_time=moment().unix();function get_mspace_state_chart_account(e){$.ajax({url:"/get_status_chart_account",method:"POST",data:{space_seq:mspace_init.space_seq,select:e,start_time:start_time,end_time:end_time},success:function(e){0==e.ec?console.log(e):cs_msg.noti_err(e.ec)},dataType:"json"})}function get_mspace_state_chart_card(e){$.ajax({url:"/get_status_chart_card",method:"POST",data:{space_seq:mspace_init.space_seq,select:e,start_time:start_time,end_time:end_time},success:function(e){0==e.ec?console.log(e):cs_msg.noti_err(e.ec)},dataType:"json"})}function get_mspace_state_chart_chat(e){$.ajax({url:"/get_status_chart_chat",method:"POST",data:{space_seq:mspace_init.space_seq,select:e,start_time:start_time,end_time:end_time},success:function(e){0==e.ec?console.log(e):cs_msg.noti_err(e.ec)},dataType:"json"})}function get_mspace_state_chart_file(e){$.ajax({url:"/get_status_chart_file",method:"POST",data:{space_seq:mspace_init.space_seq,select:e,start_time:start_time,end_time:end_time},success:function(e){0==e.ec?console.log(e):cs_msg.noti_err(e.ec)},dataType:"json"})}function get_mspace_state_chart_message(e){$.ajax({url:"/get_status_chart_message",method:"POST",data:{space_seq:mspace_init.space_seq,select:e,start_time:start_time,end_time:end_time},success:function(e){0==e.ec?console.log(e):cs_msg.noti_err(e.ec)},dataType:"json"})}function get_mspace_state_chart_note(e){$.ajax({url:"/get_status_chart_note",method:"POST",data:{space_seq:mspace_init.space_seq,select:e,start_time:start_time,end_time:end_time},success:function(e){0==e.ec?console.log(e):cs_msg.noti_err(e.ec)},dataType:"json"})}function get_mspace_state_chart_storage(e){$.ajax({url:"/get_status_chart_storage",method:"POST",data:{space_seq:mspace_init.space_seq,select:e,start_time:start_time,end_time:end_time},success:function(e){0==e.ec?console.log(e):cs_msg.noti_err(e.ec)},dataType:"json"})}function get_payment_price_unit(){$.ajax({url:"/get_payment_price_unit",method:"POST",data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec?(mspace_data.pay_unit=e.payment_price_unit,mspace_data.pay_type=e.payment_price_unit.type_price_unit[0]):cs_msg.noti_err(e.ec)},dataType:"json"})}function get_payment_bill_chart_realtime(){$.ajax({url:"/get_payment_bill_chart_realtime",method:"POST",data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec?(mspace_data.realtime_chart_data=e,v_realtime_price_chart(e)):cs_msg.noti_err(e.ec)},dataType:"json"})}function get_payment_bill_chart_pay(){$.ajax({url:"/get_payment_bill_chart_pay",method:"POST",data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec?(mspace_data.pay_chart_data=e,v_pay_price_chart(e)):cs_msg.noti_err(e.ec)},dataType:"json"})}function get_payment_bill_price_realtime(){$.ajax({url:"/get_payment_bill_price_realtime",method:"POST",data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec?v_realtime_price(e):cs_msg.noti_err(e.ec)},dataType:"json"})}function get_payment_bill_price_pay(){$.ajax({url:"/get_payment_bill_price_pay",method:"POST",data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec?v_price(e):cs_msg.noti_err(e.ec)},dataType:"json"})}function get_payment_history_list(){$.ajax({url:"/get_payment_history_list",method:"POST",data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec?v_payment_history_list(e):cs_msg.noti_err(e.ec)},dataType:"json"})}function get_payment_history_item(e){$.ajax({url:"/get_payment_history_item",method:"POST",data:{space_seq:mspace_init.space_seq,pay_seq:e},success:function(e){0==e.ec?v_pay_history_chart(e):cs_msg.noti_err(e.ec)},dataType:"json"})}function get_del_space(){$.ajax({url:"/get_del_space",method:"POST",data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec?console.log(e):cs_msg.noti_err(e.ec)},dataType:"json"})}function del_space(){$.ajax({url:"/del_space",method:"POST",data:{space_seq:mspace_init.space_seq},success:function(e){0==e.ec?console.log(e):cs_msg.noti_err(e.ec)},dataType:"json"})}