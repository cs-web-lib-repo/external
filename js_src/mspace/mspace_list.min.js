function mspace_invite_list(){mspace_data.list_invite_table.clear(),mspace_data.list_invite_table.state.clear(),$("#invite_list").scrollTop(0);let a=window.location.hostname+"/";const t=mspace_data.invite_data.create_time.length;let e=new Array;for(let n=0;n<t;++n){let t="https://"+a+"join/"+mspace_data.invite_data.invite_string[n];e.push([mspace_data.invite_data.create_account_name[n],lll_time(mspace_data.invite_data.create_time[n]),mspace_data.invite_data.create_time[n],lll_time(mspace_data.invite_data.expire_time[n]),mspace_data.invite_data.expire_time[n],`<span id="copy_invite" class="btn far fa-clone"\ndata-invite="${t}"></span>`,`<div id="del_invite_btn" class="btn btn-danger fas fa-trash"\ndata-invite="${mspace_data.invite_data.invite_string[n]}"></div>`])}mspace_data.list_invite_table.rows.add(e),mspace_data.list_invite_table.draw()}function mspace_wait_list(){mspace_data.join_wait_table.clear(),mspace_data.join_wait_table.state.clear(),$("#join_wait_list").scrollTop(0);const a=mspace_data.join_wait_data.list_account_info_join_wait.account_seq.length;let t=new Array;for(let e=0;e<a;++e)t.push([mspace_data.join_wait_data.list_account_info_join_wait.name[e],lll_time(mspace_data.join_wait_data.list_account_info_join_wait.ctime[e]),mspace_data.join_wait_data.list_account_info_join_wait.ctime[e],mspace_data.join_wait_data.list_account_info_join_wait.intro[e],`<div id="accept_btn" class="btn btn-primary fas fa-check fa-lg"\ndata-account_seq="${mspace_data.join_wait_data.list_account_info_join_wait.account_seq[e]}"></div>`,`<div id="reject_btn" class="btn btn-warning fas fa-reply fa-lg"\ndata-account_seq="${mspace_data.join_wait_data.list_account_info_join_wait.account_seq[e]}"></div>`]);mspace_data.join_wait_table.rows.add(t),mspace_data.join_wait_table.draw()}function history_type(a){switch(a){case mspace_data.enum_history_join_type.wait:return'<span class="label label-default" data-i18n="mspace:log.wait"></span>';case mspace_data.enum_history_join_type.accept:return'<span class="label label-primary" data-i18n="mspace:log.accept"></span>';case mspace_data.enum_history_join_type.reject:return'<span class="label label-danger" data-i18n="mspace:log.reject"></span>';case mspace_data.enum_history_join_type.cancel:return'<span class="label label-warning" data-i18n="mspace:log.cancel"></span>';case mspace_data.enum_history_join_type.leave:return'<span class="label label-info" data-i18n="mspace:log.leave"></span></span>';case mspace_data.enum_history_join_type.remove:return'<span class="label label-info" data-i18n="mspace:log.remove"></span></span>'}}function mspace_history_list(){mspace_data.join_history_table.clear(),mspace_data.join_history_table.state.clear(),$("#join_wait_list").scrollTop(0);const a=mspace_data.join_history_data.list_account_info_join_history.account_seq.length;let t=new Array;for(let e=0;e<a;++e)t.push([history_type(mspace_data.join_history_data.list_account_info_join_history.type[e]),mspace_data.join_history_data.list_account_info_join_history.name[e],mspace_data.join_history_data.list_account_info_join_history.intro[e],lll_time(mspace_data.join_history_data.list_account_info_join_history.ctime[e]),mspace_data.join_history_data.list_account_info_join_history.ctime[e]]);mspace_data.join_history_table.rows.add(t),mspace_data.join_history_table.draw()}function account_state_icon(a,t){let e,n=!1;switch(a){case mspace_data.enum_ret_state.normal:e='<span class="label label-primary pull-left" data-i18n="mspace:user setting.normal"></span>',n=!0;break;case mspace_data.enum_ret_state.stop:e='<span class="label label-warning pull-left" data-i18n="mspace:user setting.stop"></span>',n=!0;break;case mspace_data.enum_ret_state.leave:e='<span class="label label-success pull-left" data-i18n="mspace:user setting.leave"></span>',n=!1;break;case mspace_data.enum_ret_state.remove:e='<span class="label label-danger pull-left" data-i18n="mspace:user setting.remove"></span>',n=!1}return n&&(e+=`<span class="dropdown pull-right">\n<a type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n<i class="fas fa-lg fa-ellipsis-h"></i>\n</a>\n<ul class="dropdown-menu" role="menu">\n<li id="user_normal_btn" class="dropdown-item" data-account_seq="${t}">\n<a><i class="fas fa-play"></i><span data-i18n="mspace:user setting.normal"></span></a>\n</li>\n<li id="user_stop_btn" class="dropdown-item" data-account_seq="${t}">\n<a><i class="fas fa-stop"></i><sapn data-i18n="mspace:user setting.stop"></sapn></a>\n</li>\n<li id="user_leave_btn" class="dropdown-item" data-account_seq="${t}">\n<a><i class="fas fa-sign-out-alt"></i><span data-i18n="mspace:user setting.remove"></span></a>\n</li>\n</ul>\n</span>`),e}function admin_state_icon(a){return 1==a?`<span id="del_account_btn" data-account_seq="${mspace_data.account_list_data.list_account_info.account_seq[i]}"><i class="far fa-lg fa-check-square text-primary"></i></span>`:`<span id="set_account_btn" data-account_seq="${mspace_data.account_list_data.list_account_info.account_seq[i]}"><i class="far fa-lg fa-square"></i></span>`}function mspace_account_list(){mspace_data.account_list_table.clear(),mspace_data.account_list_table.state.clear(),$("#join_wait_list").scrollTop(0);const a=mspace_data.account_list_data.list_account_info.account_seq.length;let t=new Array;for(i=0;i<a;++i)t.push([admin_state_icon(mspace_data.account_list_data.list_account_info.is_admin[i]),mspace_data.account_list_data.list_account_info.is_admin[i],mspace_data.account_list_data.list_account_info.name[i],account_state_icon(mspace_data.account_list_data.list_account_info.state[i],mspace_data.account_list_data.list_account_info.account_seq[i])]);mspace_data.account_list_table.rows.add(t),mspace_data.account_list_table.draw()}function mspace_pay_history_list(a){mspace_data.payment_history_table.clear(),mspace_data.payment_history_table.state.clear();const t=a.list_payment_pay_info.pay_seq.length;let e=new Array;for(let n=0;n<t;++n){let t=account_list.get_account(a.list_payment_pay_info.action_account_seq[n]);e.push([`<img class="img-circle user_photo" src="${t.photo_url}">`,`${money_add_comma(a.list_payment_pay_info.pay_price_account_1000[n]/1e3)} ${v_get_money_icon()}`,`${money_add_comma(a.list_payment_pay_info.pay_price_storage_1000[n]/1e3)} ${v_get_money_icon()}`,`${money_add_comma(a.list_payment_pay_info.pay_price_amount[n])} ${v_get_money_icon()}`,moment.unix(a.list_payment_pay_info.pay_date[n]).format("lll"),a.list_payment_pay_info.pay_date[n],a.list_payment_pay_info.pay_seq[n]])}mspace_data.payment_history_table.rows.add(e),mspace_data.payment_history_table.draw()}$(document).on("click","#create_invite_btn",(function(){set_invite_create()})),$(document).on("click","#space_setting #del_invite_btn",(function(){del_invite($(this).data("invite"))})),$(document).on("click","#copy_invite",(function(){let a=$("<input>");$(this).append(a),a.val($(this).data("invite")).select(),document.execCommand("copy"),a.remove()})),$(document).on("click","#set_guide_btn",(function(){set_join_guide($("#guide_name_input").val(),$("#guide_intro_input").val())})),$(document).on("click","#space_setting #accept_btn",(function(){set_account_join_approval($(this).data("account_seq"),mspace_data.enum_approval.accept)})),$(document).on("click","#space_setting #reject_btn",(function(){set_account_join_approval($(this).data("account_seq"),mspace_data.enum_approval.reject)})),$(document).on("click","#space_setting #user_normal_btn",(function(){set_account_state($(this).data("account_seq"),mspace_data.enum_account_state.normal)})),$(document).on("click","#space_setting #user_stop_btn",(function(){set_account_state($(this).data("account_seq"),mspace_data.enum_account_state.stop)})),$(document).on("click","#space_setting #user_leave_btn",(function(){set_account_state($(this).data("account_seq"),mspace_data.enum_account_state.remove)})),$(document).on("click","#space_setting #set_account_btn",(function(){set_account_admin($(this).data("account_seq"))})),$(document).on("click","#space_setting #del_account_btn",(function(){del_account_admin($(this).data("account_seq"))}));